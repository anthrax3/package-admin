function e(e){try{return 0!==angular.element(e).length}catch(t){return!1}}function t(t,r){if(!t||""===t||n.hasOwnProperty(t))throw"textAngular Error: A unique name is required for a Tool Definition";if(r.display&&(""===r.display||!e(r.display))||!r.display&&!r.buttontext&&!r.iconclass)throw'textAngular Error: Tool Definition for "'+t+'" does not have a valid display/iconclass/buttontext value';n[t]=r}angular.module("neContentEditors",[]).factory("neMarkdown",["$document","NeRemarked","neMarked",function(e,t,n){function r(e,t,n){var r=e.inputValue.substring(e.start-t.length,e.start),i=e.inputValue.substring(e.end,e.end+n.length);return r===t&&i===n}function i(e,t,n,i){return i=i||"toggle",function(a){var o="";return e=e||"",t=t||"",a&&a.end>a.start&&"replace"!==i?"remove"===i||"toggle"===i&&r(a,e,t)?(o=a.inputValue.substring(0,a.start-e.length)+a.value+a.inputValue.substring(a.end+t.length,a.inputValue.length),a.select(a.start-e.length,a.end-e.length)):(o=e+a.value+t,o=a.inputValue.substring(0,a.start)+o+a.inputValue.substring(a.end,a.inputValue.length),a.select(a.start+e.length,a.end+e.length)):a&&(n||""===n)&&(o=a.inputValue.substring(0,a.start)+e+n+t+a.inputValue.substring(a.end,a.inputValue.length),a.select(a.start+e.length,a.start+n.length+e.length)),o}}function a(e,t){var n,r,i="\n";for(n=1;t+3>n;n++)for(r=1;e+1>r;r++)i+=1===r?"\n":" | ",i+=1===n?"col "+r:2===n?"-----":"row "+(n-2);return i+"\n"}var o,s={},l={link_list:!1,h1_setext:!1,h2_setext:!1,h_atx_suf:!1,gfm_code:!1,li_bullet:"*",hr_char:"-",indnt_str:"    ",bold_char:"*",emph_char:"_",gfm_del:!0,gfm_tbls:!0,tbl_edges:!1,hash_lnks:!1,br_only:!1},u=new t(l);return s.parseHTML=function(e){return u.render(e||"")},o={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},n.setOptions(o),s.renderHTML=function(e){return n(e||"")},s.editor={bold:i("**","**","bold text"),italic:i("*","*","italic text"),strikethrough:i("~~","~~","strikethrough text"),h1:i("\n# ","","headline 1"),h2:i("\n## ","","headline 2"),h3:i("\n### ","","headline 3"),h4:i("\n#### ","","headline 4"),h5:i("\n##### ","","headline 5"),h6:i("\n###### ","","headline 6"),ol:i("\n1. ","","numbered list"),ul:i("\n- ","","bulleted list"),indent:i(" ","","","replace"),dedent:i(" ","","","remove"),blocquote:i("\n> ","","blocquote text"),hr:i("\n\n-----\n\n","","","replace"),link:function(e,t,n){return t||""===t||(t=prompt("Please enter link url","http://")),t?i("","[ "+(n||"link text")+" ]( "+t+" )","","replace")(e):""},image:function(e,t){return t||""===t||(t=prompt("Please enter image url","http://")),t?i("","![]( "+t+' "")',"","replace")(e):""},table:function(e,t,n){return t=parseInt(t,10),n=parseInt(n,10),t>0&&n>0?i("",a(t,n),"","add")(e):e.inputValue}},s}]).controller("NeMdCtrl",["$scope","neMarkdown",function(e,t){e.editor=t.editor}]).controller("NeWsCtrl",["$scope","neWysiwyg",function(e,t){e.editor=t.editor}]).factory("neWysiwyg",["$document","neModals",function(e){function t(e,t){var n,r,i,a,o,s,l,u,c=window.getSelection(),d=e.range;c.removeAllRanges(),d.deleteContents(),n=d.startContainer,r=d.startOffset,d=document.createRange(),3===n.nodeType&&3===t.nodeType?(n.insertData(r,t.nodeValue),d.setEnd(n,r+t.length),d.setStart(n,r+t.length)):(3===n.nodeType?(a=n,n=a.parentNode,o=a.nodeValue,s=o.substr(0,r),l=o.substr(r),u=document.createTextNode(s),i=document.createTextNode(l),n.insertBefore(i,a),n.insertBefore(t,i),n.insertBefore(u,t),n.removeChild(a)):(i=n.childNodes[r],n.insertBefore(t,i)),d.setEnd(i,0),d.setStart(i,0)),c.addRange(d)}function n(t,n){return function(r){return e[0].execCommand(t,!1,n),r.parent.html()}}var r=["#ffffff","#ffccc9","#ffce93","#fffc9e","#ffffc7","#9aff99","#96fffb","#cdffff","#cbcefb","#cfcfcf","#fd6864","#fe996b","#fffe65","#fcff2f","#67fd9a","#38fff8","#68fdff","#9698ed","#c0c0c0","#fe0000","#f8a102","#ffcc67","#f8ff00","#34ff34","#68cbd0","#34cdf9","#6665cd","#9b9b9b","#cb0000","#f56b00","#ffcb2f","#ffc702","#32cb00","#00d2cb","#3166ff","#6434fc","#656565","#9a0000","#ce6301","#cd9934","#999903","#009901","#329a9d","#3531ff","#6200c9","#343434","#680100","#963400","#986536","#646809","#036400","#34696d","#00009b","#303498","#000000","#330001","#643403","#663234","#343300","#013300","#003532","#010066","#340096"],i=[{name:"Extra Small",css:"xx-small",value:"1"},{name:"Small",css:"x-small",value:"2"},{name:"Medium",css:"small",value:"3"},{name:"Large",css:"medium",value:"4"},{name:"Extra Large",css:"large",value:"5"},{name:"Huge",css:"x-large",value:"6"}],a={undo:n("undo"),redo:n("redo"),bold:n("bold"),italic:n("italic"),strikethrough:n("strikeThrough"),underline:n("underline"),quote:n("quote"),h1:n("formatblock","<h1>"),h2:n("formatblock","<h2>"),h3:n("formatblock","<h3>"),h4:n("formatblock","<h4>"),h5:n("formatblock","<h5>"),h6:n("formatblock","<h6>"),fontSizes:i,fontSize:function(e,t){return n("fontsize",t)(e)},colors:r,color:function(e,t){return n("forecolor",t)(e)},bgColor:function(e,t){return n("hilitecolor",t)(e)},justifyLeft:n("justifyleft"),justifyCenter:n("justifycenter"),justifyRight:n("justifyright"),justifyFull:n("justifyfull"),ol:n("insertorderedlist"),ul:n("insertunorderedlist"),indent:n("indent"),outdent:n("outdent"),unlink:n("unlink"),link:function(e,n,r){if(n||""===n||(n=prompt("Please enter link url","http://")),n){var i=angular.element('<a href="'+n+'">'+(r||n)+"</a>");return t(e,i[0]),e.parent.html()}return""},image:function(e,n){if(n||""===n||(n=prompt("Please enter image url","http://")),n){var r=angular.element('<img src="'+n+'">');return t(e,r[0]),e.parent.html()}return""},table:function(n,r,i){var a,o,s,l,u,c,d,p,f,h;if(i=parseInt(i,10),r=parseInt(r,10),a=e[0],i>0&&r>0){for(o=a.createElement("table"),s=a.createElement("thead"),l=a.createElement("tbody"),c=a.createElement("tr"),f=0;r>f;f++)u=a.createElement("th"),u.innerHTML="col "+(f+1),p=a.createElement("br"),u.appendChild(p),c.appendChild(u);for(s.appendChild(c),h=0;i>h;h++){for(c=a.createElement("tr"),f=0;r>f;f++)d=a.createElement("td"),d.innerHTML="row "+(h+1),p=a.createElement("br"),d.appendChild(p),c.appendChild(d);l.appendChild(c)}o.appendChild(s),o.appendChild(l),t(n,o)}return n.parent.html()},hr:n("inserthorizontalrule")};return this.editor=a,this}]).directive("neContenteditable",["$sce",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){function i(e){var i=t.html();n.stripBr&&"<br>"===i&&(i=""),(e&&i||!e)&&r.$setViewValue(i)}r&&(n.contenteditable||t.attr("contenteditable","true"),r.$render=function(){t.html(r.$viewValue||"")},t.on("blur keyup change",function(){e.$apply(i)}),i(!0))}}}]).directive("neSelectionModel",[function(){return{restrict:"A",require:"^ngModel",scope:{neSelectionModel:"="},link:function(e,t,n){function r(){function t(e,t,n){e.focus(),e.setSelectionRange?e.setSelectionRange(t,n):e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveEnd("character",n),e.moveStart("character",t),e.select())}function n(){var r=this,i=r.selectionStart,a=r.selectionEnd;e.$apply(function(){e.neSelectionModel={parent:angular.element(r),value:r.value.substring(i,a),inputValue:r.value,start:i,end:a,select:function(e,i){setTimeout(function(){t(r,e,i),n.call(r)},0)}}})}this.setSelection=t,this.getSelection=n}function i(e,t){for(;e;){if(t(e))return e;e=e.parentNode}}function a(){function t(){}function n(){var n=this,r=i(angular.element(n)[0],function(e){return"HTML"===e.tagName}).parentNode,a=r.getSelection(),o=a.getRangeAt(0).startOffset,s=a.getRangeAt(0).endOffset,l=angular.element(n);e.$apply(function(){e.neSelectionModel={range:a.getRangeAt(0),parent:l,value:l.html().substring(o,s),inputValue:l.html(),start:o,startElement:a.getRangeAt(0).startContainer,end:s,endElement:a.getRangeAt(0).endContainer,select:function(e,r,i,a){var o=i||this.startElement,s=a||this.endElement;setTimeout(function(){t(n,e,r,o,s)},0)}}})}this.setSelection=t,this.getSelection=n}if("TEXTAREA"!==t[0].nodeName&&"true"!==n.contenteditable)throw new Error('neSelectionModel directive can be used only on <textarea> or contentEditable="true" element');var o="TEXTAREA"===t[0].nodeName?new r:new a;t.on("mouseup keyup",o.getSelection),e.$on("$destroy",function(){t.unbind("mouseup keyup",o.getSelection),e.neSelectionModel=null})}}}]).factory("NeRemarked",[function(){var e=function(e){function t(e,r){if(!r)return e;for(var i in e)"Object"==n(r[i])?t(e[i],r[i]):"undefined"!=typeof r[i]&&(e[i]=r[i])}function n(e){return Object.prototype.toString.call(e).slice(8,-1)}function r(e,t){for(var n="";t-->0;)n+=e;return n}function i(e){for(var e=e.replace(/^\s\s*/,""),t=/\s/,n=e.length;t.test(e.charAt(--n)););return e.slice(0,n+1)}function a(e,t){var n,r,i;if(!e)return"";for(n="<"+e,i=0;i<t.attributes.length;i++)r=t.attributes.item(i),n+=" "+r.nodeName+'="'+r.nodeValue+'"';return n+">"}function o(e){return e?"</"+e+">":""}function s(e,t){return e.replace(/^/gm,t)}function l(e){return("#text"==e.nodeName?"txt":e.nodeName).toLowerCase()}function u(e,t){var n,r;return t instanceof Array?(n=t[0],r=t[1]):n=r=t,n=n instanceof Function?n.call(this,e):n,r=r instanceof Function?r.call(this,e):r,n+e+r}function c(e){return e.outerHTML||function(e){var t,n=document.createElement("div");return n.appendChild(e.cloneNode(!0)),t=n.innerHTML,n=null,t}(e)}var d,p,f=[],h={link_list:!1,h1_setext:!0,h2_setext:!0,h_atx_suf:!1,gfm_code:!1,li_bullet:"*-+"[0],hr_char:"-_*"[0],indnt_str:["    ","	","  "][0],bold_char:"*_"[0],emph_char:"*_"[1],gfm_del:!0,gfm_tbls:!0,tbl_edges:!1,hash_lnks:!1,br_only:!1,col_pre:"col ",unsup_tags:{ignore:"script style noscript",inline:"span sup sub i u b center big",block2:"div form fieldset dl header footer address article aside figure hgroup section",block1c:"dt dd caption legend figcaption output",block2c:"canvas audio video iframe"},tag_remap:{i:"em",b:"strong"}};t(h,e),this.render=function(e){var t,n,i,a,o,s,u,c;if(f=[],"string"==typeof e&&(t=e,e=document.createElement("div"),e.innerHTML=t),n=new d.tag(e,null,0),i=n.rend().replace(/^[\t ]+\n/gm,"\n"),h.link_list&&f.length>0){for(i+="\n\n",a=0,o=0;o<f.length;o++)f[o].e.title&&(s=f[o].e.href.length,s&&s>a&&(a=s));for(u=0;u<f.length;u++)c=f[u].e.title?r(" ",a+2-f[u].e.href.length)+'"'+f[u].e.title+'"':"",i+="  ["+(+u+1)+"]: "+("a"==l(f[u].e)?f[u].e.href:f[u].e.src)+c+"\n"}return i.replace(/^[\t ]+\n/gm,"\n")},d={},d.tag=klass({wrap:"",lnPfx:"",lnInd:0,init:function(e,t,n){this.e=e,this.p=t,this.i=n,this.c=[],this.tag=l(e),this.initK()},initK:function(){var e,t,n,r,i,a,o,s,u,c,p,g,m,b,v,y;if(this.e.hasChildNodes()){if(t=h.unsup_tags.inline,"table"==l(this.e)&&this.e.hasChildNodes()&&!this.e.tHead){if(i=document.createElement("thead"),a=this.e.tBodies[0],o=a.rows[0],s=o.cells[0],"th"==l(s))i.appendChild(o);else for(e=0,c=o.cells.length,p=i.insertRow();e++<c;)u=document.createElement("th"),u.textContent=h.col_pre+e,p.appendChild(u);this.e.insertBefore(i,a)}for(e in this.e.childNodes)if(/\d+/.test(e)&&(n=this.e.childNodes[e],r=l(n),r in h.tag_remap&&(r=h.tag_remap[r]),!h.unsup_tags.ignore.test(r))){if("txt"==r&&/^\s+$/.test(n.textContent)){if(0==e||e==this.e.childNodes.length-1)continue;if(g=this.e.childNodes[e-1],m=this.e.childNodes[e+1],g&&!l(g).match(t)||m&&!l(m).match(t))continue}b=null,d[r]||(v=h.unsup_tags,v.inline.test(r)?r="tinl":v.block2.test(r)?r="tblk":v.block1c.test(r)?r="ctblk":v.block2c.test(r)?(r="ctblk",b=["\n\n",""]):r="rawhtml"),y=new d[r](n,this,this.c.length),b&&(y.wrap=b),(y instanceof d.a&&n.href||y instanceof d.img)&&(y.lnkid=f.length,f.push(y)),this.c.push(y)}}},rend:function(){return this.rendK().replace(/\n{3,}/gm,"\n\n")},rendK:function(){var e,t,n="";for(t=0;t<this.c.length;t++)e=this.c[t],n+=(e.bef||"")+e.rend()+(e.aft||"");return n.replace(/^\n+|\n+$/,"")}}),d.blk=d.tag.extend({wrap:["\n\n",""],wrapK:null,tagr:!1,lnInd:null,init:function(e,t,n){this.supr(e,t,n),null===this.lnInd&&(this.lnInd=this.p&&this.tagr&&this.c[0]instanceof d.blk?4:0),null===this.wrapK&&(this.wrapK=this.tagr&&this.c[0]instanceof d.blk?"\n":"")},rend:function(){return u.call(this,(this.tagr?a(this.tag,this.e):"")+u.call(this,s(s(this.rendK(),this.lnPfx),r(" ",this.lnInd)),this.wrapK)+(this.tagr?o(this.tag):""),this.wrap)},rendK:function(){var e,t,n,r=this.supr();if(this.p instanceof d.li){if(e=null,t=r.match(/^[\t ]+/gm),!t)return r;for(n=0;n<t.length;n++)(null===e||t[n][0].length<e.length)&&(e=t[n][0]);return r.replace(new RegExp("^"+e),"")}return r}}),d.tblk=d.blk.extend({tagr:!0}),d.cblk=d.blk.extend({wrap:["\n",""]}),d.ctblk=d.cblk.extend({tagr:!0}),d.inl=d.tag.extend({rend:function(){return u.call(this,this.rendK(),this.wrap)}}),d.tinl=d.inl.extend({tagr:!0,rend:function(){return a(this.tag,this.e)+u.call(this,this.rendK(),this.wrap)+o(this.tag)}}),d.p=d.blk.extend({rendK:function(){return this.supr().replace(/^\s+/gm,"")}}),d.list=d.blk.extend({expn:!1,wrap:[function(){return this.p instanceof d.li?"\n":"\n\n"},""]}),d.ul=d.list.extend({}),d.ol=d.list.extend({}),d.li=d.cblk.extend({wrap:["\n",function(e){return this.p.expn||e.match(/\n{2}/gm)?"\n":""}],wrapK:[function(){return"ul"==this.p.tag?h.li_bullet+" ":this.i+1+".  "},""],rendK:function(){return this.supr().replace(/\n([^\n])/gm,"\n"+h.indnt_str+"$1")}}),d.hr=d.blk.extend({wrap:["\n\n",r(h.hr_char,3)]}),d.h=d.blk.extend({}),d.h_setext=d.h.extend({}),h.h1_setext&&(d.h1=d.h_setext.extend({wrapK:["",function(e){return"\n"+r("=",e.length)}]})),h.h2_setext&&(d.h2=d.h_setext.extend({wrapK:["",function(e){return"\n"+r("-",e.length)}]})),d.h_atx=d.h.extend({wrapK:[function(){return r("#",this.tag[1])+" "},function(){return h.h_atx_suf?" "+r("#",this.tag[1]):""}]}),!h.h1_setext&&(d.h1=d.h_atx.extend({})),!h.h2_setext&&(d.h2=d.h_atx.extend({})),d.h3=d.h_atx.extend({}),d.h4=d.h_atx.extend({}),d.h5=d.h_atx.extend({}),d.h6=d.h_atx.extend({}),d.a=d.inl.extend({lnkid:null,rend:function(){var e=this.rendK(),t=this.e.getAttribute("href"),n=this.e.title?' "'+this.e.title+'"':"";return!t||t==e||"#"==t[0]&&!h.hash_lnks?e:h.link_list?"["+e+"] ["+(this.lnkid+1)+"]":"["+e+"]("+t+n+")"}}),d.img=d.inl.extend({lnkid:null,rend:function(){var e,t=this.e.alt,n=this.e.getAttribute("src");return h.link_list?"!["+t+"] ["+(this.lnkid+1)+"]":(e=this.e.title?' "'+this.e.title+'"':"","!["+t+"]("+n+e+")")}}),d.em=d.inl.extend({wrap:h.emph_char}),d.del=h.gfm_del?d.inl.extend({wrap:"~~"}):d.tinl.extend(),d.br=d.inl.extend({wrap:["",function(){var e=h.br_only?"<br>":"  ";return this.p instanceof d.h?"<br>":e+"\n"}]}),d.strong=d.inl.extend({wrap:r(h.bold_char,2)}),d.blockquote=d.blk.extend({lnPfx:"> ",rend:function(){return this.supr().replace(/>[ \t]$/gm,">")}}),d.pre=d.blk.extend({tagr:!0,wrapK:"\n",lnInd:0}),d.code=d.blk.extend({tagr:!1,wrap:"",wrapK:function(e){return-1!==e.indexOf("`")?"``":"`"},lnInd:0,init:function(e,t,n){if(this.supr(e,t,n),this.p instanceof d.pre)if(this.p.tagr=!1,h.gfm_code){var r=this.e.getAttribute("class");r=(r||"").split(" ")[0],0===r.indexOf("lang-")&&(r=r.substr(5)),this.wrapK=["```"+r+"\n","\n```"]}else this.wrapK="",this.p.lnInd=4}}),d.table=h.gfm_tbls?d.blk.extend({cols:[],init:function(e,t,n){this.supr(e,t,n),this.cols=[]},rend:function(){var e,t,n;for(e=0;e<this.c.length;e++)for(t=0;t<this.c[e].c.length;t++)for(n=0;n<this.c[e].c[t].c.length;n++)this.c[e].c[t].c[n].prep();return this.supr()}}):d.tblk.extend(),d.thead=h.gfm_tbls?d.cblk.extend({wrap:["\n",function(){var e,t,n,a,o="";for(e=0;e<this.p.cols.length;e++)t=this.p.cols[e],n="c"==t.a[0]?":":" ",a="r"==t.a[0]||"c"==t.a[0]?":":" ",o+=(0==e&&h.tbl_edges?"|":"")+n+r("-",t.w)+a+(e<this.p.cols.length-1||h.tbl_edges?"|":"");return"\n"+i(o)}]}):d.ctblk.extend(),d.tbody=h.gfm_tbls?d.cblk.extend():d.ctblk.extend(),d.tfoot=h.gfm_tbls?d.cblk.extend():d.ctblk.extend(),d.tr=h.gfm_tbls?d.cblk.extend({wrapK:[h.tbl_edges?"| ":"",h.tbl_edges?" |":""]}):d.ctblk.extend(),d.th=h.gfm_tbls?d.inl.extend({guts:null,wrap:[function(){var e,t=this.p.p.p.cols[this.i],n=0==this.i?"":" ",i=t.w-this.guts.length;switch(t.a[0]){case"r":e=r(" ",i);break;case"c":e=r(" ",Math.floor(i/2));break;default:e=""}return n+e},function(){var e,t=this.p.p.p.cols[this.i],n=this.i==this.p.c.length-1?"":" |",i=t.w-this.guts.length;switch(t.a[0]){case"r":e="";break;case"c":e=r(" ",Math.ceil(i/2));break;default:e=r(" ",i)}return e+n}],prep:function(){var e,t;this.guts=this.rendK(),this.rendK=function(){return this.guts},e=this.p.p.p.cols,e[this.i]||(e[this.i]={w:null,a:""}),t=e[this.i],t.w=Math.max(t.w||0,this.guts.length),this.e.align&&(t.a=this.e.align)}}):d.ctblk.extend(),d.td=d.th.extend(),d.txt=d.inl.extend({initK:function(){this.c=this.e.textContent.split(/^/gm)},rendK:function(){var e=this.c.join("").replace(/\r/gm,"");return this.p instanceof d.code||this.p instanceof d.pre||(e=e.replace(/^\s*#/gm,"\\#").replace(/\*/gm,"\\*")),0==this.i&&(e=e.replace(/^\n+/,"")),this.i==this.p.c.length-1&&(e=e.replace(/\n+$/,"")),e}}),d.rawhtml=d.blk.extend({initK:function(){this.guts=c(this.e)},rendK:function(){return this.guts}});for(p in h.unsup_tags)h.unsup_tags[p]=new RegExp("^(?:"+("inline"==p?"a|em|strong|img|code|del|":"")+h.unsup_tags[p].replace(/\s/g,"|")+")$")};return e}]).factory("neMarked",[function(){return function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||l.defaults,this.rules=c.normal,this.options.gfm&&(this.rules=this.options.tables?c.tables:c.gfm)}function t(e,t){if(this.options=t||l.defaults,this.links=e,this.rules=u.normal,this.renderer=this.options.renderer||new n,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(){}function r(e){this.tokens=[],this.token=null,this.options=e||l.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer}function i(e,encode){return e.replace(encode?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function o(){}function s(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function l(t,n,a){var o,u,c,d,p;if(a||"function"==typeof n){a||(a=n,n=null),n=s({},l.defaults,n||{}),o=n.highlight,d=0;try{u=e.lex(t,n)}catch(f){return a(f)}return c=u.length,(p=function(){var e,t;try{e=r.parse(u,n)}catch(i){t=i}return n.highlight=o,t?a(t):a(null,e)})()}try{return n&&(n=s({},l.defaults,n)),r.parse(e.lex(t,n),n)}catch(f){if(f.message+="\nPlease report this to https://github.com/chjj/marked.",(n||l.defaults).silent)return"<p>An error occured:</p><pre>"+i(f.message+"",!0)+"</pre>";throw f}}var u,c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=a(c.item,"gm")(/bull/g,c.bullet)(),c.list=a(c.list)(/bull/g,c.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",c.html=a(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=a(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=s({},c),c.gfm=s({},c.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),c.gfm.paragraph=a(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=s({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=c,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t){for(var n,r,i,a,o,s,l,u,d,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<s.align.length;u++)s.align[u]=/^ *-+: *$/.test(s.align[u])?"right":/^ *:-+: *$/.test(s.align[u])?"center":/^ *:-+ *$/.test(s.align[u])?"left":null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].split(/ *\| */);this.tokens.push(s)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),a=i[2],this.tokens.push({type:"list_start",ordered:a.length>1}),i=i[0].match(this.rules.item),n=!1,d=i.length,u=0;d>u;u++)s=i[u],l=s.length,s=s.replace(/^ *([*+-]|\d+\.) +/,""),~s.indexOf("\n ")&&(l-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&u!==d-1&&(o=c.bullet.exec(i[u+1])[0],a===o||a.length>1&&o.length>1||(e=i.slice(u+1).join("\n")+e,u=d-1)),r=n||/\n\n(?!\s*$)/.test(s),u!==d-1&&(n="\n"===s.charAt(s.length-1),r||(r=n)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(s,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<s.align.length;u++)s.align[u]=/^ *-+: *$/.test(s.align[u])?"right":/^ *:-+: *$/.test(s.align[u])?"center":/^ *:-+ *$/.test(s.align[u])?"left":null;for(u=0;u<s.cells.length;u++)s.cells[u]=s.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens},u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/},u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=a(u.link)("inside",u._inside)("href",u._href)(),u.reflink=a(u.reflink)("inside",u._inside)(),u.normal=s({},u),u.pedantic=s({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=s({},u.normal,{escape:a(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=s({},u.gfm,{br:a(u.br)("{2,}","*")(),text:a(u.gfm.text)("{2,}","*")()}),t.rules=u,t.output=function(e,n,r){var i=new t(n,r);return i.output(e)},t.prototype.output=function(e){for(var t,n,r,a,o="";e;)if(a=this.rules.escape.exec(e))e=e.substring(a[0].length),o+=a[1];else if(a=this.rules.autolink.exec(e))e=e.substring(a[0].length),"@"===a[2]?(n=this.mangle(":"===a[1].charAt(6)?a[1].substring(7):a[1]),r=this.mangle("mailto:")+n):(n=i(a[1]),r=n),o+=this.renderer.link(r,null,n);else if(a=this.rules.url.exec(e))e=e.substring(a[0].length),n=i(a[1]),r=n,o+=this.renderer.link(r,null,n);else if(a=this.rules.tag.exec(e))e=e.substring(a[0].length),o+=this.options.sanitize?i(a[0]):a[0];else if(a=this.rules.link.exec(e))e=e.substring(a[0].length),o+=this.outputLink(a,{href:a[2],title:a[3]});else if((a=this.rules.reflink.exec(e))||(a=this.rules.nolink.exec(e))){if(e=e.substring(a[0].length),t=(a[2]||a[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){o+=a[0].charAt(0),e=a[0].substring(1)+e;continue}o+=this.outputLink(a,t)}else if(a=this.rules.strong.exec(e))e=e.substring(a[0].length),o+=this.renderer.strong(this.output(a[2]||a[1]));else if(a=this.rules.em.exec(e))e=e.substring(a[0].length),o+=this.renderer.em(this.output(a[2]||a[1]));else if(a=this.rules.code.exec(e))e=e.substring(a[0].length),o+=this.renderer.codespan(i(a[2],!0));else if(a=this.rules.br.exec(e))e=e.substring(a[0].length),o+=this.renderer.br();else if(a=this.rules.del.exec(e))e=e.substring(a[0].length),o+=this.renderer.del(this.output(a[1]));else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),o+=i(this.smartypants(a[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return o},t.prototype.outputLink=function(e,t){var n=i(t.href),r=t.title?i(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,i(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t,n="",r=e.length,i=0;r>i;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t){return t?'<pre><code class="lang-'+t+'">'+i(e)+"\n</code></pre>\n":"<pre><code>"+i(e,!0)+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t){return"<h"+t+">"+e+"</h"+t+">\n"},n.prototype.hr=function(){return"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){var r='<a href="'+e+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=">"},r.parse=function(e,t,n){var i=new r(t,n);return i.parse(e)},r.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){var e,t,n,r,i,a,o,s,l;switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth);case"code":return this.renderer.code(this.token.text,this.token.lang);case"table":for(e="",t="",i="",n=0;n<this.token.header.length;n++)a={header:!0,align:this.token.align[n]},i+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});for(e+=this.renderer.tablerow(i),n=0;n<this.token.cells.length;n++){for(r=this.token.cells[n],i="",o=0;o<r.length;o++)i+=this.renderer.tablecell(this.inline.output(r[o]),{header:!1,align:this.token.align[o]});t+=this.renderer.tablerow(i)}return this.renderer.table(e,t);case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":for(t="",s=this.token.ordered;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,s);case"list_item_start":for(t="";"list_item_end"!==this.next().type;)t+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(t);case"loose_item_start":for(t="";"list_item_end"!==this.next().type;)t+=this.tok();return this.renderer.listitem(t);case"html":return l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text),this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},o.exec=o,l.options=l.setOptions=function(e){return s(l.defaults,e),l},l.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,smartypants:!1,renderer:new n},l.Parser=r,l.parser=r.parse,l.Renderer=n,l.Lexer=e,l.lexer=e.lex,l.InlineLexer=t,l.inlineLexer=t.output,l.parse=l,"object"==typeof exports?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):this.marked=l}.call(function(){return this||("undefined"!=typeof window?window:global)}()),marked}]),!function(e,t){"function"==typeof define?define(t):"undefined"!=typeof module?module.exports=t():this[e]=t()}("klass",function(){function e(e){return i.call(t(e)?e:function(){},e,1)}function t(e){return typeof e===s}function n(e,t,n){return function(){var r,i=this.supr;return this.supr=n[u][e],r=t.apply(this,arguments),this.supr=i,r}}function r(e,r,i){for(var a in r)r.hasOwnProperty(a)&&(e[a]=t(r[a])&&t(i[u][a])&&l.test(r[a])?n(a,r[a],i):r[a])}function i(e,n){function i(){}function a(){this.init?this.init.apply(this,arguments):(n||l&&o.apply(this,arguments),c.apply(this,arguments))}i[u]=this[u];var o=this,s=new i,l=t(e),c=l?e:this,d=l?{}:e;return a.methods=function(e){return r(s,e,o),a[u]=s,this},a.methods.call(a,d).prototype.constructor=a,a.extend=arguments.callee,
a[u].implement=a.statics=function(e,t){return e="string"==typeof e?function(){var n={};return n[e]=t,n}():e,r(this,e,o),this},a}var a=this,o=a.klass,s="function",l=/xyz/.test(function(){xyz})?/\bsupr\b/:/.*/,u="prototype";return e.noConflict=function(){return a.klass=o,this},a.klass=e,e}),angular.module("neDirectives",["neObject"]).directive("neInitData",[function(){return{priority:1e3,restrict:"AE",compile:function(){return{pre:function(e,t,n){n.neInitData?e.$eval((n.neInitAs?n.neInitAs+"=":"")+n.neInitData):t.html()&&e.$eval((n.neInitAs?n.neInitAs+"=":"")+t.html()),n.neInitDone&&e.$eval(n.neInitDone)}}}}}]).service("neKeyPressHandler",[function(){return function(e,t,n){return function(r,i,a){function o(i){i.which===t&&(r.$apply(function(){r.$eval(a[e])}),n&&i.preventDefault())}var s;s="INPUT"===i[0].nodeName?i:angular.element(document),s.bind("keydown keypress",o),r.$on("$destroy",function(){s.unbind("keydown keypress",o)})}}}]).directive("neKeypressEnter",["neKeyPressHandler",function(e){return e("neKeypressEnter",13,!0)}]).directive("neKeypressEscape",["neKeyPressHandler",function(e){return e("neKeypressEscape",27,!0)}]).directive("neKeypressRight",["neKeyPressHandler",function(e){return e("neKeypressRight",39)}]).directive("neKeypressLeft",["neKeyPressHandler",function(e){return e("neKeypressLeft",37)}]).directive("neKeypressUp",["neKeyPressHandler",function(e){return e("neKeypressUp",38)}]).directive("neKeypressDown",["neKeyPressHandler",function(e){return e("neKeypressDown",40)}]).directive("neKeypressBackspace",["neKeyPressHandler",function(e){return e("neKeypressBackspace",8)}]).directive("neLoadingStart",["$timeout",function(e){return function(t,n,r){"IMG"===n[0].nodeName&&r.$observe("src",function(){e(function(){t.$eval(r.neLoadingStart)})})}}]).directive("neLoadingEnd",["$timeout",function(e){return function(t,n,r){function i(n){e(function(){t.$eval(r.neLoadingEnd)},5),n.preventDefault()}"IMG"===n[0].nodeName&&(n.bind("load",i),t.$on("$destroy",function(){n.unbind("load",i)}))}}]).directive("neStatusIcon",[function(){return{restrict:"A",compile:function(e,t){var n='<div class="right-inner-addon">'+("reverse"!==t.neStatusIcon?'<i class="fa fa-check text-success" ng-show="'+e.attr("ng-model")+'"></i>':"")+("reverse"===t.neStatusIcon?'<i class="fa fa-times text-danger" ng-show="!'+e.attr("ng-model")+'"></i>':"")+"</div>";e.wrap(n),e.removeAttr("status-icon")}}}]).directive("neMatchHrefPath",["$window","$location",function(e,t){return{priority:-100,link:function(n,r,i){function a(){(t.path()+"/").match(new RegExp("^"+o+"[/#?].*"))?r.addClass(l):r.removeClass(l)}var o,s,l=n.$eval(i.neMatchHrefPath)||i.neMatchHrefPath;if(l){if(i.href)try{o=n.$eval(i.href)}catch(u){o=i.href}else if(s=r.find("a")[0],o=s?s.getAttribute("href"):null,s&&o)try{o=n.$eval(o.replace("{{","").replace("}}",""))}catch(u){o=o}o&&-1===o.indexOf("#")?(o=o.replace(/^http:/g,"").replace(/^https:/g,"").replace(e.location.hostname,"").replace(/\/+/g,"/"),(e.location.pathname+"/").match(new RegExp("^"+o+"[/#?].*"))?r.addClass(l):r.removeClass(l)):o&&(o=o.match(/^([^\#]*)\#([^\#\?]*).*$/),o=o?o[o.length-1]:null,o&&n.$on("$locationChangeSuccess",a),a())}}}}]).directive("neFile",[function(){return{restrict:"E",template:'<input type="file" />',replace:!0,require:"ngModel",link:function(e,t,n,r){var i=function(){e.$apply(function(){var e,i;if(n.multiple||""===n.multiple){for(e=[],i=0;i<t[0].files.length;i++)e.push(t[0].files[i]);r.$setViewValue(e)}else r.$setViewValue(t[0].files[0])})};t.attr("accept",n.accept),t.bind("change",i)}}}]).service("neFileDropArea",[function(){return this.bind=function(e,t,n){function r(e){e.stopPropagation(),e.preventDefault()}function i(t){r(t),l||(e.addClass("ne-dragover"),l=!0)}function a(t){r(t),e.removeClass("ne-dragover"),l=!1}function o(e){var r,i,o,s;a(e),r=0,i=e.dataTransfer.files,o=i[0],o&&(r+=o.fileSize,n?(s=new FileReader,s.onerror=function(e){alert("Cannot read file: "+e.target.error)},s.onload=function(){return function(e){t(e.target.result)}}(o),s[n](o)):t(i))}var s=e[0],l=!1;return s.addEventListener("dragenter",i,!1),s.addEventListener("dragover",i,!1),s.addEventListener("dragleave",a,!1),s.addEventListener("drop",o,!1),{unbind:function(){l=null,s.removeEventListener("dragenter",i,!1),s.removeEventListener("dragover",i,!1),s.removeEventListener("dragleave",a,!1),s.removeEventListener("drop",o,!1)}}},this}]).directive("neFileDropArea",["neFileDropArea",function(e){return{restrict:"A",link:function(t,n,r){var i,a=r.neFileDropArea?new RegExp(r.neFileDropArea):null;n.on("load",function(){t.setNaturalHeight(this.naturalHeight),t.setNaturalWidth(this.naturalWidth)}),i=e.bind(n,function(e){var n,i=[],o=r.neFileDrop||r.neFilesDrop||r.ondrop;for(n=0;n<e.length;n++)(!a||e[n].type.match(a))&&i.push(e[n]);t.files=i,i.length&&o&&t.$apply(o)}),t.$on("$destroy",i.unbind)}}}]).directive("neCopy",[function(){return{restrict:"A",link:function(e,t,n){function r(){e[o]=angular.copy(a)}function i(){var t,n=e[o];for(t in n)!n.hasOwnProperty(t)||"$"===t[0]&&"$"===t[1]||(a[t]=n[t])}var a=e.$eval(n.neCopy),o=e.alias||n.neCopyAlias||"$copy";e.$rollback=r,e.$commit=i,a.$commit=i,a.$rollback=r,e.$rollback()}}}]).directive("neFormChange",[function(){return{restrict:"A",require:"^form",link:function(e,t,n,r){e.$watch(function(){return r.$valid},function(t){e.$valid=e.$isValid=t,e.$eval(n.neFormChange)})}}}]).directive("neBindHtml",["$sce",function(){return{restrict:"A",link:function(e,t,n){n.$observe("neBindHtml",function(e){t.html(e)})}}}]).filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),angular.module("neDragdrop",[]).directive("draggable",[function(){return function(e,t,n){function r(e){return e.preventDefault(),!1}function i(t){return t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("Text",this.id),this.classList.add("dragged"),n.drag&&e.$apply(n.drag),!1}function a(){return this.classList.remove("dragged"),!1}var o=t[0];"false"===n.draggable?(o.addEventListener("dragstart",r),e.$on("$destroy",function(){o.removeEventListener("dragstart",r)})):(o.draggable=!0,o.addEventListener("dragstart",i),o.addEventListener("dragend",a),e.$on("$destroy",function(){o.removeEventListener("dragstart",r),o.removeEventListener("dragend",a)}))}}]).directive("droppable",[function(){return function(e,t,n){function r(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("dragover"),!1}function i(){return this.classList.add("dragover"),!1}function a(){return this.classList.remove("dragover"),!1}function o(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault(),this.classList.remove("dragover"),n.drop&&e.$apply(n.drop),!1}var s=t[0];s.addEventListener("dragover",r),s.addEventListener("dragenter",i),s.addEventListener("dragleave",a),s.addEventListener("drop",o),e.$on("$destroy",function(){s.removeEventListener("dragover",r),s.removeEventListener("dragenter",i),s.removeEventListener("dragleave",a),s.removeEventListener("drop",o)})}}]),angular.module("neGrid",["neObject","neLocal"]).run(["$templateCache",function(e){e.put("neGrid/pagination.html",'<div ng-if="!paginationDisabled" class="row text-{{fontSize}}">    <div class="col-xs-12 col-sm-9 col-md-10 text-center">        <div class="btn-group btn-group-{{size}}">           <button class="btn btn-default" ng-disabled="grid.prevDisabled" ng-click="grid.setPage(\'first\')"><span class="fa fa-fast-backward"></span></button>           <button class="btn btn-default" ng-disabled="grid.prevDisabled" ng-click="grid.setPage(\'prev\')"><span class="fa fa-backward"></span></button>        </div>        <span>           <span ng-if="grid.pagesCount"> {{\'page\'|translate}} </span>           <input type="number" class="input-{{size}} width-sm" ng-model="grid.pagination.page" min="1" max="{{grid.pagination.pages||\'\'}}" ne-keypress-enter="grid.setPage(grid.pagination.page)">           <span ng-if="grid.pagesCount"> {{\'of\'|translate}} {{grid.pagesCount}} </span>           <span ng-if="grid.pagesCount" class="hidden-xs">({{grid.pagination.count}} {{\'items\'|translate}})</span>        </span>        <div class="btn-group btn-group-{{size}}">           <button class="btn btn-default" ng-disabled="grid.nextDisabled" ng-click="grid.setPage(\'next\')"><span class="fa fa-forward"></span></button>           <button class="btn btn-default" ng-disabled="grid.nextDisabled || !grid.pagesCount" ng-click="grid.setPage(\'last\')"><span class="fa fa-fast-forward"></span></button>        </div>    </div>    <div class="col-sm-3 col-md-2 text-right hidden-xs">        <div class="input-group">           <input class="input-{{size}} width-sm" type="number" ng-model="grid.limit" ne-keypress-enter="grid.setPage(\'first\')" min="1" max="{{grid.maxLimit}}">           <span class="input-group-btn">               <button class="btn btn-default btn-{{size}}" ng-click="grid.setPage(\'first\')"><span class="fa fa-refresh"></span></button>           </span>        </div>    </div></div>')}]).directive("neGridPagination",[function(){return{templateUrl:"neGrid/pagination.html",scope:{grid:"=neGridPagination"},link:function(e,t,n){e.size=n.neGridPaginationSize||"sm",e.fontSize="base","xs"===e.size&&(e.fontSize="sm"),"lg"===e.size&&(e.fontSize="lg")}}}]).directive("neGridUpdateBlur",["$timeout","neObject",function(e,t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){function a(e){h=e,h?n.addClass(l):n.removeClass(l)}function o(){s(),r.afterUpdate&&e.$eval(r.gridAfterUpdate)}function s(){a(!1),g=i.$viewValue}var l,u,c,d,p,f,h,g;if(i){if(l=r.dirtyClass||"is-dirty","ng-dirty"===l)throw new Error('dirtyClass cannot be equal to "ng-dirty", it is angular reserved class name');if(u=(r.gridUpdateBlur||"").split(","),c=u[0]||"grid",d=u[1]||"item",p=t.deepGet(e,c),f=t.deepGet(e,d),!p)throw new Error('Scope has not grid with name "'+c+'"');if(!f)throw new Error('Scope has not grid item with name "'+d+'"');h=!1,n.on("blur",function(){h&&p.updateItem(f,o)}),n.bind("keydown keypress",function(e){13===e.which&&h&&"INPUT"===n[0].nodeName&&(p.updateItem(f,o),e.preventDefault())}),g="",e.$watch(i.$viewValue,function(){g=i.$viewValue}),i.$viewChangeListeners.push(function(){a(g!==i.$viewValue?!0:!1)})}}}}]).factory("NeGrid",["$timeout","neObject",function(e,t){function n(e){var E,T=[{},n.defaults];for(E=0;E<arguments.length;E++)T.push(arguments[E]);return e=angular.merge.apply(angular,T),this.id=e.id,this.idKey=e.idKey||"id",this.defaultLimit=e.defaultLimit||10,this.limit=e.limit||this.defaultLimit,this.maxLimit=e.maxLimit||100,this.defaultQuery=e.defaultQuery||{},this.defaultSort=e.defaultSort||{},this.interceptLoad=e.interceptLoad||e.beforeLoad||e.loadInterceptor,this.onQuery=e.onQueryChange||e.onQuery||e.onFilter,this.onLoad=e.onLoad,this.onFill=e.onFill||e.onData,this.onSelect=e.onSelect,this.onFocus=e.onFocus,this.onUpdate=e.onUpdate,this.onCreate=e.onCreate,this.onRemove=e.onRemove,this.resource=e.restResource||e.resource,this.getResourceMethod=e.getResourceMethod||e.resourceMethod||("function"==typeof this.resource?this.resource:null)||i,this.autoLoad=e.autoLoad||e.loadOnChange,this.multiSelect=e.multiSelect||e.multiselect||!1,this.silentMode=!1,this.pagination={page:e.page||this.defaultQuery.$page||1},this.page=this.pagination.page,this.pagesCount=1,this.query=t.extend("data",{},e.query||{},{$page:this.page,$limit:this.limit},this.defaultQuery),this.sort=t.extend("data",{},this.defaultSort||{},e.sort||{}),this.items=[],this.disabled=!0,this.doSilent=this.doSilent,this.fillItems=a,this.addItems=o,this.addItem=o,this.appendItems=o,this.appendItem=o,this.prependItems=s,this.prependItem=s,this.setSort=l,this.setSortSilent=r("setSort"),this.setSortBy=u,this.setSortBySilent=r("setSortBy"),this.updateQuery=f,this.updateQuerySilent=r("updateQuery"),this.setQuery=p,this.setQuerySilent=r("setQuery"),this.setFilter=p,this.setFilterSilent=r("setQuery"),this.setPage=d,this.setPageSilent=r("setPage"),this.load=c,this.refresh=c,this.createItem=h,this.updateItem=g,this.refreshItem=m,this.removeItem=b,this.selectItem=w,this.selectAll=x,this.toggleItemSelection=$,this.toggleSelection=k,this.focusItem=v,this.getFocusedItem=y,this.getSelectedItems=S,this.clearSelection=C,this}function r(e){return function(){var t=this;return t.silentMode=!0,t[e].apply(t,arguments),t.silentMode=!1,t}}function i(e){if(!this.resource)throw new Error("NeGrid: resource is undefined");return this.resource[e]}function a(e,t){var n=this;return t=t||{},n.items=e,n.pagination=t,n.pagesCount=Math.ceil(t.count/n.limit),n.prevDisabled=t.page<=1?!0:!t.prev,n.nextDisabled=t.spage>=n.pagesCount?!0:!t.next,"function"!=typeof n.onFill||n.silentMode||n.onFill(n.items,n.pagination,n.query),this}function o(e){return e=Array.isArray(e)?e:[e],Array.prototype.push.apply(this.items,e),this}function s(e){return e=Array.isArray(e)?e:[e],Array.prototype.unshift.apply(this.items,e),this}function l(e,t){var n=this;return n.sort=e,n.setPage("first",t)}function u(e,t){if(e){var n={};return n[e]=t||this.sortDir,this.setSort(n)}}function c(e){var t=this;return(!t.interceptLoad||t.interceptLoad&&t.interceptLoad(t.query)!==!1)&&(t.disabled=!0,t.getResourceMethod("find")(t.query,function(n,r){"function"==typeof t.onLoad&&t.onLoad(n,r),t.fillItems(n,r),e&&e(),t.disabled=!1})),t}function d(e,t,n){var r,i;return"function"==typeof arguments[0]&&(t=arguments[0],e=null),r=this,i="number"==typeof e?e:"first"===e?1:"next"===e?r.pagination.page+1:"last"===e?r.pagesCount:"prev"===e?r.pagination.page-1:"refresh"===e||null===e?r.pagination.page||1:1,r.pagesCount&&i>r.pagesCount&&"number"!=typeof e&&(i=r.pagesCount+0),0>=i&&(i=1),r.page=i,r.updateQuery(n),r.autoLoad&&!r.silentMode?r.load(t):(t&&t(),r)}function p(e,n){var r=this;return r.query=t.extend("data",{},r.defaultQuery||{},e||{}),r.setPage(r.query.$page||"first",n,e),r}function f(e){var n,r=this;return e=e||{},r.page=e.$page||r.page,r.limit=e.$limit||r.limit,r.sort=e.$sort||r.sort,r.page&&("number"!=typeof r.page||r.page<=0)&&(r.page=1),!r.limit||r.limit<0?r.limit=r.defaultLimit:r.limit>r.maxLimit&&(r.limit=r.maxLimit),n=t.extend("data",{},e,{$limit:r.limit,$sort:{},$page:r.page}),r.sort&&(n.$sort=r.sort),n.$sort=t.extend("data",{},r.defaultSort||{},n.$sort||{}),0===Object.keys(n.$sort).length&&delete n.$sort,delete r.query.$page,delete r.query.$sort,delete r.query.$limit,r.query=t.extend("data",n,r.query||{}),r.onQuery&&!r.silentMode&&r.onQuery(r.query),r}function h(e,t){var n=this;return n.getResourceMethod("create",e)(e,function(){n.setPage("first",t),"function"==typeof n.onCreate&&n.onCreate(e),n.autoLoad||n.load(t)}),n}function g(e,n){var r=this;return r.getResourceMethod("update",e)(e,function(i){var a=r.items.indexOf(e),o=angular.copy(e);r.items[a]=t.extend("data",r.items[a],i),r.onUpdate&&r.onUpdate(r.items[a],o),n&&n(r.items[a])}),r}function m(e,n){var r=this,i=r.idKey,a={};return a[i]=t.deepGet(e,i),r.getResourceMethod("find",e)(a,function(i){var a=r.items.indexOf(e);r.items[a]=t.extend("data",r.items[a],i[0]),n&&n(r.items[a])}),r}function b(e,t){var n=this;return n.getResourceMethod("remove",e)(e,function(){n.items.splice(n.items.indexOf(e),1),n.onRemove&&n.onRemove(e),t&&t(e)}),n}function v(e){var t,n=this;if(e.$focused===!0)return n;for(t=0;t<n.items.length;t++)n.items[t].$focused=!1;return e.$focused=!0,n.focusedItem=e,"function"==typeof n.onFocus&&n.onFocus(e),n}function y(){var e,t=this;for(e=0;e<t.items.length;e++)if(t.items[e].$focused===!0)return t.items[e]}function w(e,t){var n,r=this;if(!r.multiSelect)for(n=0;n<r.items.length;n++)delete r.items[n].$selected;return e.$selected="boolean"==typeof t?t:!e.$selected,"function"==typeof r.onSelect&&r.onSelect(e),r}function $(e){return this.selectItem(e)}function x(e){var t,n=this;if(!n.multiSelect)return n;for(t=0;t<n.items.length;t++)n.selectItem(n.items[t],e);return n}function k(){return this.selectAll()}function C(){var e,t=this;for(e=0;e<t.items.length;e++)delete t.items[e].$selected;return t}function S(){var e,t=this,n=[];for(e=0;e<t.items.length;e++)t.items[e].$selected===!0&&n.push(t.items[e]);return n}return n.defaults={},n.define=n.create=function(e){return new n(e)},n}]),angular.module("neLoading",[]).constant("neLoadingDebounce",350).constant("neLoadingEndDelay",300).factory("neLoading",["$timeout","neLoadingDebounce","neLoadingEndDelay",function(e,t,n){function r(e){var t=0,n=e/100;return t=n>=0&&.25>n?(3*Math.random()+3)/100:n>=.25&&.65>n?3*Math.random()/100:n>=.65&&.9>n?2*Math.random()/100:n>=.9&&.99>n?.005:0,e+Math.ceil(100*t)}var i={requestCount:0,isLoading:function(){return i.requestCount>0},statusTimeout:null,status:0,prevStatus:0,lastStart:(new Date).getTime(),statusListeners:[],fireStatusListeners:function(){for(var t=0;t<i.statusListeners.length;t++)!function(t){e(function(){i.statusListeners[t](i.status)},0,!1)}(t)},setStatus:function(a){if(i.statusTimeout&&e.cancel(i.statusTimeout),!(0>a)){i.prevStatus=i.status+0,i.status=a;var o=(new Date).getTime();0===i.prevStatus&&a>0&&(i.lastStart=o),o-i.lastStart>t&&i.fireStatusListeners(),i.status>0&&i.status<99?i.statusTimeout=e(function(){i.setStatus(r(i.status))},t,!1):i.status>=100&&(o-i.lastStart>t?i.statusTimeout=e(function(){i.setStatus(0),i.fireStatusListeners()},n,!1):(i.status=0,i.prevStatus=0))}},reqStarted:function(e){0===i.status&&i.setStatus(1),i.requestCount++,e&&console.log(e,i.requestCount,i.status)},reqEnded:function(e){i.requestCount>0&&i.requestCount--,e&&console.log(e,i.requestCount,i.status),0===i.requestCount&&i.setStatus(100)}};return i}]).factory("neLoadingInterceptor",["$q","$cacheFactory","neLoading",function(e,t,n){function r(e){var n,r;return e?"GET"!==e.method||e.cache===!1?(e.cached=!1,!1):(n=e.cache===!0?t.get("$http"):e.cache,r=void 0!==n?void 0!==n.get(e.url):!1,void 0!==e.cached&&r!==e.cached?e.cached:(e.cached=r,r)):!1}return{request:function(e){return e.ignoreLoading||r(e)||n.reqStarted(),e},response:function(e){return e.config.ignoreLoading||r(e.config)||n.reqEnded(),e},responseError:function(t){return t.config.ignoreLoading||r(t.config)||n.reqEnded(),e.reject(t)}}}]).config(["$httpProvider",function(e){e.interceptors.push("neLoadingInterceptor")}]).controller("NeLoadingCtrl",["$scope","neLoading",function(e,t){t.statusListeners.push(function(t){e.status=t,e.loading=t>0,e.$digest()})}]),angular.module("neLocal",[]).provider("neLocal",[function(){var e="default",t={"default":{common:{}}},n="/";return this.translate=function(r){var i,a;return void 0===r||null===r?"":(i=r+"",a=t[e]||{},a.common=a.common||{},(a[n]?a[n][i]:null)||a.common[i]||(t["default"][n]?t["default"][n][i]:null)||t["default"].common[i]||i||"")},this.setPath=function(e){n=e},this.language=function(t){return t&&(e=t),e},this.languages=function(e){return e?t[e]:t},this.getLanguageId=function(){return e},this.getLanguagePath=function(){return n},this.set=this.translations=function(e,n,r,i){if(t[e]=t[e]||{},t[e].common=t[e].common||{},4===arguments.length)t[e][n]=t[e][n]||{},t[e][n][r]=i;else if(3===arguments.length&&angular.isObject(r))t[e][n]=t[e][n]||{},angular.extend(t[e][n],r);else if(3===arguments.length)i=arguments[2],r=arguments[1],t[e].common[r]=i;else{if(2!==arguments.length)throw new Error("Wrong arguments");r=arguments[1];var a=angular.isObject(r.common);angular.extend(a?t[e]:t[e].common,r)}},this.$get=function(){return this},this}]).run(["$rootScope","$location","neLocal",function(e,t,n){e.$on("$routeChangeStart",function(){n.setPath(t.path())})}]).filter("neTranslate",["neLocal",function(e){return function(t){return e.translate(t)}}]).filter("translate",["neLocal",function(e){return function(t){return e.translate(t)}}]),angular.module("neMenu",[]).factory("NeMenu",["$document","$timeout",function(e,t){function n(e,t){var n,r;if("string"!=typeof e)throw new Error("NeMenu: menu ID is required !");return i[e]?i[e]:(n={id:e},r=angular.merge(this,n,t||{}),r.items=[],i[e]=r,r)}function r(n){t(function(){function r(){t(function(){n.selected=!1,e.unbind("click",r)})}e.bind("click",r)},0,!1)}var i={};return n.prototype.set=function(e,t){var n=this;return n[e]=t,n.onChange&&n.onChange(e,t),n},n.prototype.toggle=function(e){var t=this;return t[e]=!t[e],t.onChange&&t.onChange(e,t[e]),t},n.prototype.select=n.prototype.selectItem=function(e,t){var n,i,a=this;for(t&&(e.onSelect||e.children&&e.children.length)&&(t.preventDefault(),e.selected||r(e)),i=0;i<a.items.length;i++)a.items[i].selected&&(n=a.items[i]),a.items[i].selected=a.items[i]===e?!a.items[i].selected:!1;return a.onSelect&&a.onSelect(e,n),e.onSelect&&e.onSelect(e,n),a},n.prototype.get=n.prototype.getItem=function a(e,t){var n,r,i=this,o=(t?t.children:i.items)||[];for(r=0;r<o.length;r++)if(o[r].id===e)return o[r];for(r=0;r<o.length;r++)if(o[r].children&&(n=a(e,o[r])))return n},n.get=function(e){return i[e]},n}]),angular.module("neModals",[]).factory("neModals",["$timeout","$sce",function(e,t){function n(e){e=e||r.defaults;for(var n in e)this[n]=e[n];return this.id=e.id||"modal_"+Object.keys(r.items).length,this.backdrop=!0,e.backdrop===!1&&(this.backdrop=!1),this.backdropOpacity=this.backdropOpacity||r.defaults.backdropOpacity,this.css=this.css||r.defaults.css,this.zIndex=r.defaults.zIndex,this.showAfterCreate=void 0===this.showAfterCreate?!0:this.showAfterCreate,this.removeOnClose=void 0===this.removeOnClose?!0:this.removeOnClose,this.destroyOnClose=void 0===this.destroyOnClose?!0:this.destroyOnClose,this.html=this.html?t.trustAsHtml(this.html):"",this.include=this.include||this.templateUrl||this.bodyTemplateUrl,this.show=this.open=function(){this.visible||(this.visible=!0,0===r.opened&&angular.element(document.getElementsByTagName("body")).addClass("modal-open"),r.opened++,this.zIndex=r.defaults.zIndex+11*r.opened,r.fireChangeListeners())},this.hide=this.close=function(){this.visible&&(this.visible=!1,r.opened--,this.removeOnClose&&this.destroyOnClose&&r.remove(this.id),0===r.opened&&angular.element(document.getElementsByTagName("body")).removeClass("modal-open"),r.fireChangeListeners(),"function"==typeof this.onClose&&this.onClose())},r.items[this.id]=this,this.showAfterCreate?this.show():r.fireChangeListeners(),this}var r={items:{},defaults:{visible:!1,backdrop:!0,backdropOpacity:.4,css:"",removeOnClose:!1,destroyOnClose:!1,showAfterCreate:!0,title:"modal title",zIndex:1040,text:"",html:"",include:"",buttons:[{text:"Cancel",disabled:!1,css:"btn-default",click:function(){}},{text:"Ok",disabled:!1,css:"btn-primary",click:function(){}}]},opened:0,changeListeners:[],fireChangeListeners:function(){for(var t=0;t<this.changeListeners.length;t++)!function(t){e(function(){r.changeListeners[t](r.items)},0,!1)}(t)}};return r.create=function(e){return new n(e)},r.get=function(e){return r.items[e]},r.remove=function(e){delete r.items[e]},r}]).controller("NeModalsCtrl",["$scope","neModals",function(e,t){t.changeListeners.push(function(t){e.modals=t,e.$digest()})}]).directive("neModalsContainer",[function(){return{templateUrl:"neModals/container.html"}}]).run(["$templateCache",function(e){e.put("neModals/container.html",'<div ng-controller="NeModalsCtrl">    <div ng-repeat="(id,modal) in modals">        <div class="modal ng-hide" ng-show="modal.visible" style="z-index:{{modal.zIndex}};">            <div class="modal-dialog {{modal.css}}" ng-class="{\'modal-full\':modal.wide,\'modal-lg\':modal.large||modal.lg,\'modal-xs\':modal.small||modal.xs}">                <div class="modal-content">                    <div class="modal-header">                        <button class="close" ng-click="modal.hide()"><i class="fa fa-times fa-fw fa-lg"></i></button>                        <button class="close" ng-click="modal.wide = !modal.wide">                            <i style="font-size:15px;margin-right:5px;" class="fa fa-fw" ng-class="{\'fa-expand\':!modal.wide,\'fa-compress\':modal.wide}"></i>                        </button>                        <h4 class="modal-title">{{modal.title|translate}}</h4>                    </div>                    <div class="modal-body">                        {{modal.text|translate}}                        <div ng-bind-html="modal.html"></div>                        <div ng-include="modal.include"></div>                    </div>                    <div class="modal-footer" ng-show="modal.buttons">                        <button ng-repeat="button in modal.buttons" type="button" ng-disabled="button.disabled" class="{{button.css}}" ng-click="button.click()">{{button.text|translate}}</button>                    </div>                </div>            </div>        </div>        <div class="modal-backdrop in" ng-show="modal.visible && modal.backdrop" ng-style="{\'z-index\':modal.zIndex-10,\'opacity\':modal.opacity}"></div>    </div></div>')}]),angular.module("neNotifications",["neLoading"]).factory("neNotifications",["$timeout",function(e){function t(e,t,n,r){2===r.length&&"string"!=typeof r[1]&&(n=r[1],t=r[0],e="")}var n=this;return n.timeout=3e3,n.queue=[],n.changeListeners=[],n.fireListeners=function(){for(var t=0;t<n.changeListeners.length;t++)!function(t){e(function(){n.changeListeners[t](n.queue)},0,!1)}(t)},n.add=n.show=n.create=function(t,r,i,a,o){function s(){n.remove(this.id)}function l(e){e=e||{},delete e.id;var t=n.getIndex(this.id);return t>-1&&(n.queue[t]=angular.merge(this,e)),n.fireListeners(),this}function u(t){var r,i=this;i.timeoutPromise&&e.cancel(i.timeoutPromise),i.fixed||"number"!=typeof t||(r=i.timeout-((new Date).getTime()-i.showTime),r=0>r?0:r,i.showTime=(new Date).getTime(),i.timeout=r+t,i.timeoutPromise=e(function(){n.remove(i.id)},i.timeout,!1))}var c,d,p,f={};return 4===arguments.length&&"string"!=typeof arguments[3]?(o=arguments[3],a=""):3===arguments.length&&"string"!=typeof arguments[2]?(o=arguments[2],i=arguments[1],r=""):2===arguments.length&&"string"!=typeof arguments[2]?(o=arguments[1],i=arguments[0],r="",t="info"):2===arguments.length&&"string"==typeof arguments[2]?(i=arguments[1],r=""):1===arguments.length&&angular.isObject(arguments[0])&&(f=arguments[0],t=f.type,r=f.title,a=f.icon,i=f.text,o=f.timeout),("error"===t||"danger"===t)&&(t="danger"),c=(new Date).getTime()+Math.floor(100*Math.random()+1),d=angular.merge(f,{id:f.id||c,type:t,title:r,icon:a,text:i,timeout:0,fixed:!1,close:s,hide:s,destroy:s,update:l,postpone:u}),d.include=f.bodyTemplateUrl||f.include,p=n.getIndex(d.id),p>-1?n.queue[p]=d:n.queue.push(d),n.fireListeners(),o!==!1&&0!==o?(d.timeout=parseInt(o,10),d.showTime=(new Date).getTime(),d.timeoutPromise=e(function(){n.remove(d.id)},d.timeout||n.timeout,!1)):d.fixed=!0,d},n.error=n.danger=n.danger=function(e,r,i){return t(e,r,i,arguments),this.show("error",e,r,"fa fa-exclamation-circle fa-2x",void 0!==i?i:2*n.timeout)},n.success=function(e,n,r){return t(e,n,r,arguments),this.show("success",e,n,"fa fa-check-circle fa-2x",r)},n.warning=function(e,n,r){return t(e,n,r,arguments),this.show("warning",e,n,"fa fa-warning fa-2x",r)},n.info=function(e,n,r){return t(e,n,r,arguments),this.show("info",e,n,"fa fa-info-circle fa-2x",r)},n.getIndex=function(e){for(var t=0;t<n.queue.length;t++)if(n.queue[t].id===e)return t},n.get=function(e){return n.queue[n.getIndex(e)]},n.remove=n.hide=function(e){var t=n.getIndex(e);-1!==t&&(n.queue.splice(t,1),n.fireListeners())},n}]).controller("NeNotificationsCtrl",["$scope","neNotifications",function(e,t){t.changeListeners.push(function(t){e.notifications=t,e.$digest()})}]).directive("neNotificationsContainer",[function(){return{templateUrl:"neNotifications/container.html"}}]).run(["$templateCache",function(e){e.put("neNotifications/container.html",'<div class="notification-container" ng-controller="NeNotificationsCtrl">    <div ng-show="true" class="ng-hide">        <div ng-repeat="n in notifications" class="alert alert-{{n.type}}" ng-click="n.fixed=true;n.postpone()" ng-mouseenter="n.postpone()" ng-mouseleave="n.postpone(1000)">            <i class="alert-pin fa fa-thumb-tack" ng-if="n.fixed"></i>            <table style="width:100%;word-wrap:break-word" class="table-fixed">                <tr>                    <td style="width:15%">                        <i class="{{n.icon}}"></i>                    </td>                    <td style="padding:0px 5px">                        <div ng-if="!n.include" style="overflow:auto;max-height:200px">                            <strong ng-if="n.title"><span ne-bind-html="{{n.title|translate}}"></span><br></strong>                            <span ne-bind-html="{{n.text|translate}}"></span>                        </div>                        <div ng-if="n.include" ng-include="n.include"></div>                    </td>                    <td style="width:20px">                        <a href="" ng-click="n.close()"><i class="fa fa-fw fa-times"></i></a>                    </td>                </tr>            </table>        </div>        <div class="alert alert-default" ng-show="loading" ng-controller="NeLoadingCtrl">            <table style="width:100%">                <tr>                    <td style="width:15%">                        <i class="fa fa-fw fa-spinner fa-spin fa-2x"></i>                    </td>                    <td style="padding:0px 5px">                        <strong>{{::\'Loading...\'|translate}}</strong>                    </td>                </tr>            </table>        </div>    </div></div>')}]),angular.module("neObject",[]).factory("neObject",["$timeout",function(e){function t(e){var t,n,r;if(!e||"[object Object]"!==Object.prototype.toString.call(e)||e.nodeType||e.setInterval)return!1;if(t=hasOwnProperty.call(e,"constructor"),n=hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"),e.constructor&&!t&&!n)return!1;for(r in e);return void 0===r||x.call(e,r)}function n(){var e,n,i,a,o,s,l=this.extendReservedInstances,u=this,c=arguments[0]||{},d=1,p=arguments.length,f=!1;for(("boolean"==typeof c||"data"===c)&&(f=c,c=arguments[1]||{},d=2),"object"!=typeof c&&"function"!=typeof c&&(c={});p>d;d++){if(e=arguments[d],r(e,l))return c=e;if(null!==e)for(n in e)if(i=c[n],a=e[n],r(a,l))c[n]=a;else if(c!==a)if(f&&a&&(t(a)||(o=Array.isArray(a)))){if(o){if(o=!1,"data"===f){c[n]=a.slice(0);continue}s=i&&Array.isArray(i)?i:[]}else s=i&&t(i)?i:{};c[n]=u.extend(f,s,a)}else void 0!==a&&(c[n]=a)}return c}function r(e,t){for(var n=0;n<t.length;n++)if(e instanceof t[n])return!0;return!1}function i(e,t,n){var r,a;if(angular.isObject(e)){n=n||"";for(a in e)angular.isObject(e[a])&&i(e[a],t,""===n?a:n+"."+a),r=t(""===n?a:n+"."+a,a,e[a]),void 0===r?delete e[a]:e[a]=r}}function a(e,t,n,r){var i,a=t.split("."),o=e;if("this"===t)"push"===r?e.push(n):e=n.toString();else for(i=0;i<a.length;i++)i>=a.length-1?"push"===r?o[a[i]].push(n):o[a[i]]=n:o[a[i]]=void 0===o[a[i]]||null===o[a[i]]?{}:o[a[i]],o=o[a[i]];return e}function o(e,t){var n,r,i;if(!e&&e!==!1&&0!==e||"function"==typeof e)return void 0;if("this"===t)return e;for(n=t.split("."),r=e,i=0;i<n.length;i++){if(!r[n[i]]&&r[n[i]]!==!1&&0!==r[n[i]])return void 0;r=r[n[i]]}return"function"==typeof r?void 0:r}function s(e,t){var n,r;if(e=e||{},t=t||"",n=t.split("."),0!==n.length){if(1===n.length)return void delete e[n[0]];for(r=0;r<n.length-1;r++)if(e=e[n[r]],!e)return;delete e[n[n.length-1]]}}function l(e,t,n){var r,i;2===arguments.length?w(e)?(r=e,n=arguments[1]):(n=arguments[1],t=1):(r={},r[e]=t);for(i in r)"asc"===r[i]&&(r[i]=1),"desc"===r[i]&&(r[i]=-1);return n.sort(function(e,t){for(var n in r){if(o(e,n)>o(t,n))return r[n];if(o(e,n)<o(t,n))return-r[n]}return 0}),n}function u(e,t,n){var r,i=[];for(r in e)"$key"!==r&&"$sortIndex"!==r&&e.hasOwnProperty(r)&&(e.$key=r,t&&(e.$sortIndex=o(e[r],t)),i.push(e[r]));return t?l("$sortIndex",n||"asc",i):i}function c(e,t){var n,r,i;if(!angular.isArray(e)||!t)return{};for(n={},i=0;i<e.length;i++)r=o(e[i],t),n[r]=e[i];return n}function d(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e){return e&&e.window===e}function f(e){return e&&e.$evalAsync&&e.$watch;

}function h(e){return"$"===e[0]&&"$"===e[1]?!0:void 0}function g(e,t,n){if(n=n||h,e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,a,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!angular.isArray(e)){if(angular.isDate(e))return angular.isDate(t)?g(e.getTime(),t.getTime(),n):!1;if(d(e))return d(t)?e.toString()==t.toString():!1;if(f(e)||f(t)||p(e)||p(t)||angular.isArray(t)||angular.isDate(t)||d(t))return!1;a=Object.create(null);for(i in e)if(!n(i)&&!angular.isFunction(e[i])){if(!g(e[i],t[i],n))return!1;a[i]=!0}for(i in t)if(!(i in a||n(i)||!angular.isDefined(t[i])||angular.isFunction(t[i])))return!1;return!0}if(!angular.isArray(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!g(e[i],t[i],n))return!1;return!0}}return!1}function m(t,n,r){n=angular.isUndefined(n)?0:n,r=angular.isUndefined(r)?!0:r;var i;return function(){var a,o;return i&&e.cancel(i),a=this,o=arguments,i=e(function(){i=null,t.apply(a,o)},n,r)}}function b(e,t){var n,r,i,a;if(void 0===t&&(t=!0),"string"==typeof e&&(r=e.match(t?C:k)))return i=Date.parse(r[0]),isNaN(i)||(e=new Date(i)),e;if("object"!=typeof e)return e;for(a in e)n=e[a],"string"==typeof n&&(r=n.match(t?C:k))?(i=Date.parse(r[0]),isNaN(i)||(e[a]=new Date(i))):"object"==typeof n&&b(n,t);return e}function v(e,t){var n;try{n=JSON.parse(e)}catch(r){}return b(n,t)}function y(e,t){var n,r;if("object"!=typeof e||!t)return e;for(n in e)e.hasOwnProperty(n)&&(r=e[n],0===n.indexOf(t)?delete e[n]:"object"==typeof r&&y(r,t))}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function $(e){return Array.isArray(e)}var x=Object.prototype.hasOwnProperty,k=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/,C=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/;return{isObject:w,isArray:$,sortArray:l,extendReservedInstances:[File,FileList,Blob],extend:n,merge:n,setObjValue:a,deepSet:a,getObjValue:o,deepGet:o,deepReplace:i,deepRemove:s,deepEquals:g,deepEqual:g,objectToArray:u,arrayToObject:c,dateStringsToDates:b,fromJson:v,fromJSON:v,removePrefixedProps:y,debounce:m}}]),angular.module("neQuery",["neLocal","neObject"]).config(["neLocalProvider",function(e){e.set("default",{$eq:"=",$lt:"<",$lte:"<=",$gt:">",$gte:">=",$regex_exact:"exact match",$regex_contains:"contains",$regex_begins:"begins with",$regex_ends:"ends with",$in:"is in",$ne:"not equal to",$regex_ncontains:"not contains",$regex_nbegins:"not begins with",$regex_nends:"not ends with",$nin:"is not in",$regex:"custom regex",$size:"items count",$exists:"exists",$and:"and",$or:"or",OR:"OR",AND:"AND",choose:"(choose)",qtype_short_number:"0-9",qtype_short_date:"Date",qtype_short_datetime:"Time",qtype_short_boolean:"Y/N",qtype_short_string:"A-Z",qtype_short_array:"[A]",qtype_short_object:"{O}",qtype_number:"Number",qtype_date:"Date",qtype_datetime:"Date & Time",qtype_boolean:"Boolean",qtype_string:"Text",qtype_array:"Array",qtype_object:"Object",qvalue_true:"True",qvalue_false:"False",Search:"Search","Order By":"Order By","choose field":"choose field","type value":"type value","empty value":"empty value"})}]).run(["$templateCache",function(e){e.put("neQuery/query.html",'<div class="visible-inline-block"><div ng-repeat-start="query in query track by $index" class="visible-inline-block" style="position:relative;margin:2px" ng-style="{\'margin-top\':$first ? \'0px\' : \'2px\'}">    <small ng-if="!$first && query.logical===\'OR\' && !query.length">{{query.logical | translate}}<br></small>    <div ng-if="!query.length" class="visible-inline-block">        <div class="dropdown visible-inline-block" uib-dropdown keyboard-nav>            <button ng-if="query.onlyPredefinedFields" class="btn btn-sm btn-default" uib-dropdown-toggle style="width:142px;height:30px">                <span class="nowrap" ng-if="query.fieldName">{{query.fieldName}}</span><span class="nowrap" ng-if="!query.fieldName">{{::\'choose field\'|translate}}</span>            </button>            <input ng-if="!query.onlyPredefinedFields" type="text" placeholder="{{::\'choose field\'|translate}}" class="input-sm" uib-dropdown-toggle ng-change="query.setFieldByName(query.fieldName);onChange()" ng-model="query.fieldName"/>            <ul ng-if="query.fields.filterByName(query.fieldName, query.field.name).length" class="dropdown-menu" style="max-height:220px;overflow:auto">                <li ng-repeat="field in query.fields.filterByName(query.fieldName, query.field.name)" ng-class="{\'active\':(field.name===query.fieldName)}">                    <a href="" ng-click="query.setField(field);onChange()">			             {{field.name}}			        </a>                </li>            </ul>        </div>        <div class="dropdown visible-inline-block" uib-dropdown keyboard-nav>            <button ng-disabled="query.field.disableOperator" class="btn btn-default btn-sm" uib-dropdown-toggle style="width:120px;height:30px">                <span class="class="nowrap"">{{query.operator | translate}}&nbsp;</span>            </button>            <ul class="dropdown-menu" style="min-width:210px;overflow:auto">                <li ng-if="!query.field.disableType" class="text-center">                    <div class="btn-group btngroup-xs">                        <button class="btn btn-default btn-xs" ng-class="{\'btn-success\':(query.type.name===type)}" style="padding:2px;" uib-tooltip="{{\'qtype_\'+type | translate}}" ng-repeat="type in query.types" ng-click="query.setType(type);$event.stopPropagation();">                        {{\'qtype_short_\'+type | translate}}                        </button>                    </div>                </li>                <li ng-if="!query.field.disableType" class="divider"></li>                <li ng-repeat="operator in query.type.operators" ng-if="!query.field.allowedOperatorIndexes || query.field.allowedOperatorIndexes.indexOf($index)>-1" ng-class="{\'active\':(query.operator===operator)}">                    <a href="" ng-click="query.setOperator(operator);onChange()">			            <span>{{operator | translate}}</span>			        </a>                </li>            </ul>        </div>        <div class="visible-inline-block" ne-query-value="query"></div>        <div class="btn-group btn-group-xs">            <button class="btn btn-default" ng-click="query.next(\'AND\');onChange()">{{::\'AND\' | translate}}</button>            <button class="btn btn-default" ng-click="query.next(\'OR\');onChange()">{{::\'OR\' | translate}}</button>            <button class="btn btn-default" ng-click="query.levelDown();onChange()"><i class="fa fa-fw fa-level-down"></i></button>            <button class="btn btn-default" ng-click="close();query.remove();onChange()"><i class="fa fa-fw fa-minus"></i></button>        </div>    </div>    <div ng-if="query.length" class="visible-inline-block" style="position:relative;">        <small>{{ ($first ? \' \' : query.logical) | translate}}<br></small>        <div class="btn-group btn-group-xs" style="position:absolute;right:0px;top:1px">            <button class="btn btn-default" style="border:1px dashed #999;border-right:none;color:#999;border-bottom: 1px solid transparent;" ng-click="query.next(\'AND\')">{{::\'AND\' | translate}}</button>            <button class="btn btn-default" style="border:none;border-top:1px dashed #999;color:#999;border-bottom: 1px solid transparent;" ng-click="query.next(\'OR\')">{{::\'OR\' | translate}}</button>            <button class="btn btn-default" style="border:1px dashed #999;border-left:none;color:#999;border-bottom: 1px solid transparent;" ng-click="close();query.remove()"><i class="fa fa-minus"></i></button>        </div>        <div class="query-subquery visible-inline-block" ng-include="\'neQuery/query.html\'" style="border:1px dashed #999;padding:8px;margin:2px 0px;"></div>    </div></div><br ng-repeat-end></div>'),e.put("neQuery/date.html",'<input type="text"        class="input-sm"        placeholder="{{(query.field.isEmptyValue(query.value) ? (query.field.placeholder||\'type value\') : \'empty value\')|translate}}"        uib-datepicker-popup        is-open="query.value_opened"        ng-click="query.value_opened=!query.value_opened"        ng-model="query.value"       ng-change="onChange()"/>'),e.put("neQuery/datetime.html",'<input type="text"        class="input-sm"        placeholder="{{(query.field.isEmptyValue(query.value) ? (query.field.placeholder||\'type value\') : \'empty value\')|translate}}"       uib-datetimepicker-popup        show-seconds="true"        is-open="query.value_opened"        ng-click="query.value_opened=!query.value_opened"        ng-model="query.value"       ng-change="onChange()"/>'),e.put("neQuery/number.html",'<input type="number"        class="input-sm"        placeholder="{{(query.field.isEmptyValue(query.value) ? (query.field.placeholder||\'type value\') : \'empty value\')|translate}}"        ng-model="query.value"        ng-change="onChange()"        style="width:142px;"/>'),e.put("neQuery/list.html",'<select class="input-sm"         ng-model="query.value"         ng-options="(value | translate) for value in query.field.values"         ng-change="onChange()"         style="width:142px;"></select>'),e.put("neQuery/boolean.html",'<select class="input-sm"         ng-model="query.value"         ng-options="(\'qvalue_\'+value | translate) for value in [true,false]"         ng-change="onChange()"         style="width:142px;"></select>'),e.put("neQuery/string.html",'<input type="text"        class="input-sm"        placeholder="{{(query.field.isEmptyValue(query.value) ? (query.field.placeholder||\'type value\') : \'empty value\')|translate}}"        ng-model="query.value"        ng-change="onChange()"/>'),e.put("neQuery/string-suggestions.html",'<div class="dropdown visible-inline-block" uib-dropdown keyboard-nav>    <input type="text"            class="input-sm"            placeholder="{{(query.field.isEmptyValue(query.value) ? (query.field.placeholder||\'type value\') : \'empty value\')|translate}}"            uib-dropdown-toggle            ng-model="query.suggestion"            ng-change="query.field.onlySuggestedValues ? query.value=null : query.value=query.suggestion;query.field.createSuggestions(query, query.suggestion);onChange()">    <ul ng-if="query.suggestions.length" class="dropdown-menu" style="max-height:220px;overflow:auto">        <li ng-repeat="value in query.suggestions" ng-class="{\'active\':(value===query.value)}">          <a href="" ng-click="query.value=value.key;query.suggestion=value.name;onChange()">		      {{value.name}}		  </a>        </li>    </ul></div>'),e.put("neQuery/disabled.html",'<input type="text" disabled="disabled" class="input-sm" ng-model="query.value"/>'),e.put("neQuery/sort.html",'<div class="visible-inline-block"><div ng-repeat-start="sort in query.sortBy track by $index" style="display:inline-block;position:relative;margin:2px" ng-style="{\'margin-top\':$first ? \'0px\' : \'2px\'}">    <small>{{::\'Order By\'|translate}}</small>    <div class="visible-inline-block">        <div class="dropdown visible-inline-block" uib-dropdown keyboard-nav>            <button ng-if="query.onlyPredefinedFields" class="btn btn-sm btn-default" uib-dropdown-toggle style="width:142px;height:30px">                <span class="nowrap" ng-if="sort.fieldName">{{sort.fieldName}}</span><span class="nowrap" ng-if="!sort.fieldName">{{::\'choose field\'|translate}}</span>            </button>            <input ng-if="!query.onlyPredefinedFields" type="text" placeholder="{{::\'choose field\'|translate}}" class="input-sm" uib-dropdown-toggle ng-change="query.setSortByName(sort.fieldName, $index);onChange()" ng-model="sort.fieldName" />            <ul ng-if="query.fields.filterByName(sort.fieldName, sort.name).length" class="dropdown-menu" style="max-height:220px;overflow:auto">                <li ng-repeat="field in query.fields.filterByName(sort.fieldName, sort.name)" ng-class="{\'active\':(field.name===sort.fieldName)}">                    <a href="" ng-click="query.setSortField(field,$parent.$index);onChange()">        			    {{field.name}}        			</a>                </li>            </ul>        </div>        <div class="btn-group btn-group-xs">            <button class="btn btn-default" ng-click="query.toggleSortDirection($index);onChange()">                <i class="fa fa-fw" ng-class="{\'fa-sort-amount-asc\':sort.direction===1,\'fa-sort-amount-desc\':sort.direction===-1}"></i>            </button>            <button class="btn btn-default" ng-click="query.addSort($index);onChange()"><i class="fa fa-fw fa-plus"></i></button>            <button class="btn btn-default" ng-click="query.removeSort($index);onChange()"><i class="fa fa-fw fa-minus"></i></button>        </div>    </div></div><br ng-repeat-end><button ng-if="!query.sortBy.length" class="btn btn-default btn-sm" ng-click="query.addSort();onChange()"><i class="fa fa-fw fa-signal"></i> <span class="hidden-sm">{{::\'Order By\'|translate}}</span></button></div>')}]).directive("neQueryValue",[function(){return{restrict:"A",template:'<div ng-include="query.field.template||query.type.templates[query.operator]||query.type.template||query.templates[query.type.name]||query.templates.disabled"></div>',link:function(){}}}]).directive("neQuerySearch",[function(){return{restrict:"A",template:'<div class="pull-left" ne-query="query" ne-query-change="onChange()"></div><div class="pull-left hidden-xs" style="width:20px">&nbsp;</div><div class="pull-left" ne-query-sort="query" ne-query-sort-change="onChange()"></div><button class="btn btn-primary btn-sm" ng-click="searchClick()" style="margin-left:2px">    <i class="fa fa-fw fa-search"></i>    <span class="hidden-sm">{{::\'Search\' | translate}}</span></button>',scope:{query:"=neQuerySearch",searchClick:"&neQuerySearchClick",onQuerySearchChange:"&neQuerySearchChange",querySearchEmpty:"=neQuerySearchEmpty"},link:function(e,t,n){var r=!!n.neQuerySearchEmpty;e.onChange=function(){e.query.setDirty(),r&&(e.querySearchEmpty=e.query.isEmpty()),e.onQuerySearchChange&&e.onQuerySearchChange()},r&&(e.querySearchEmpty=e.query.isEmpty())}}}]).directive("neQuery",[function(){return{restrict:"A",templateUrl:"neQuery/query.html",scope:{query:"=neQuery",onQueryChange:"&neQueryChange",queryEmpty:"=neQueryEmpty"},link:function(e,t,n){var r=!!n.neQueryEmpty;e.onChange=function(){e.query.setDirty(),r&&(e.queryEmpty=e.query.isQueryEmpty()),e.onQueryChange&&e.onQueryChange()},r&&(e.queryEmpty=e.query.isQueryEmpty())}}}]).directive("neQuerySort",[function(){return{restrict:"A",templateUrl:"neQuery/sort.html",scope:{query:"=neQuerySort",onQuerySortChange:"&neQuerySortChange",querySortEmpty:"=neQuerySortEmpty"},link:function(e,t,n){var r=!!n.neQuerySortEmpty;e.onChange=function(){e.query.setDirty(),r&&(e.querySortEmpty=e.query.isSortEmpty()),e.onQuerySortChange&&e.onQuerySortChange()},r&&(e.querySortEmpty=e.query.isSortEmpty())}}}]).factory("NeQuery",["neLocal","neObject",function(e,t){function n(e){return(e||"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function r(e){return(e||"").replace(/\\(?!\\)/g,"")}function i(e){var t,n,r;if(!e)return{};for(t=this,n={},n[L]={},r=0;r<e.length;r++)n[L][e[r].key]=e[r].direction;return n}function a(e){var t,n=this,r=[];if(n.sortBy=[],"[object Object]"===Object.prototype.toString.call(e))for(t in e)n.addSort(),n.setSortByName(t,n.sortBy.length-1).direction=e[t];return r}function o(e,t){if(["string","number","boolean"].indexOf(typeof e)>-1)return!0;if(null===t||void 0===t||"function"==typeof t)return!1;if(["string","number","boolean"].indexOf(typeof t)>-1)return!0;for(var n in t)if(void 0!==e[n]&&null!==e[n])return!0;return!1}function s(e,n){var r,a,l,u,c,d,p,f,h,g={};if(g=t.extend(!0,g,e.options),e.length){for(a=[],l=0,u=0;u<e.length;u++)u>0&&"OR"===e[u].logical&&l++,a[l]=a[l]||[],a[l].push(e[u]);if(0===l)for(d=!1,p=a[l],u=0;u<p.length;u++){c=s(p[u],!0);for(f in c)if(void 0!==g[f]&&null!==g[f])if(p[u].field.merge)g=p[u].field.merge(f,c,g);else{if(o(g[f],c[f])){delete g[f],g=F.AND.build(p),d=!0;break}g[f]=t.extend(!0,g[f],c[f])}else g[f]=c[f];if(d)break}else g=t.extend(!0,g,F.OR.build(a))}else e.operator&&e.field&&e.field.key&&(r=angular.copy(e.value),e.type.onBuild&&(r=e.type.onBuild(r)),e.field.isEmptyValue&&e.field.isEmptyValue(r)||(r=F[e.operator].build("function"==typeof e.field.onBuild?e.field.onBuild(r):r),void 0!==r&&null!==r&&(e.field.build?(h=e.field.build(e.field.key,r,e),g[h.key||e.field.key]=h.key?h.value:h):g[e.field.key]=r)));return n||(g=t.extend(!0,g,i.call(e,e.sortBy))),g}function l(e,t){function n(e,t,n){i=e.append(n),i.type=H[t.typeName],i.value=t.value,i.setFieldByName(t.fieldName,!0),i.setValueByNameAndField(),i.operator=t.operator}var r,i,o,s,u,c,d,p,f,h=this,g=[];for(o in e)-1===["AND","OR","VALUE"].indexOf(o)&&(o===L?a.call(h,e[o]):F[o]||o[0]!==I&&-1===P.indexOf(o)?g.push(o):h.options[o]=e[o]);for(s=0;s<g.length;s++){for(o=g[s],u=null,c=0;c<h.fields.length;c++)if((h.fields[c].field===o||h.fields[c].match&&o.match(h.fields[c].match))&&h.fields[c].parse){u=h.fields[c].parse;break}if(d={},u&&(d=u(o,e[o],t),d&&d.key?(o=d.key,e[o]=d.value):d&&(e[o]=d),Array.isArray(e[o])))for(p in e[o])l.call(h,e[o][p].value,e[o][p].logical||t);else if(r=(F[o]||F.VALUE).parse(o,e[o])){if(Array.isArray(r))for(f=0;f<r.length;f++)n(h,r[f],0===s&&0===f?t:"AND");else if(r.queries)for(i=null,f=0;f<r.queries.length;f++)1!==g.length||t?i?i.parse(r.queries[f],r.logical):(i=h.append(t),i.parse(r.queries[f],r.logical)):h.parse(r.queries[f],0===f&&t?t:r.logical);else 0===s?n(h,r,t):n(h,r,"AND");d.key&&delete e[d.key]}else d.key&&delete e[d.key]}return h}function u(e){var t,n,r;return"boolean"==typeof e?t="boolean":"number"==typeof e?t="number":e instanceof Date?t=0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()?"date":"datetime":"string"==typeof e&&(n=e.match(B),n&&(r=Date.parse(n[0])),isNaN(r)?t="string":(e=new Date(r),t=0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()?"date":"datetime")),{type:t,value:e}}function c(e){var t,n=[];return n.options={},n.sortBy=[],n.build=function(e){return s.call(this,this,e)},n.parse=function(e,t){return l.call(this,e,t)},n.fill=function(e){return this.splice(0,this.length),this.parse(e),this.parent&&this.parent()||0!==this.length||this.append("AND"),n},n.isEmpty=b,n.isQueryEmpty=v,n.isSortEmpty=y,n.isDirty=$,n.setDirty=w,n.clear=m,n.newQuery=c,n.templates=_,n.fields=this.fields,n.types=this.types,n.onlyPredefinedFields=this.onlyPredefinedFields,n.logical=e||"AND",n.append=d,n.next=f,n.levelDown=p,n.remove=h,n.reset=g,n.setFieldByName=x,n.setValueByNameAndField=k,n.setField=C,n.setOperator=S,n.setType=E,n.addSort=T,n.removeSort=D,n.toggleSortDirection=N,n.setSortByName=O,n.setSortField=M,n.parent=n.getParent=function(){return t},n.setParent=function(e){t=e},n.reset(),n}function d(e){var t=this.newQuery(e);return t.setParent(this),this.push(t),t}function p(){var e,t,n=this;if(n.parent()&&!(n.parent().length<=1))return e=n.parent().indexOf(n),t=n.next(n.logical),n.parent().splice(e,1),n.logical="AND",n.setParent(t),t.push(n),t}function f(e){var t,n,r=this;if(r.parent())return t=r.parent().indexOf(r),n=this.newQuery(e),n.setParent(r.parent()),r.parent().splice(t+1,0,n),n}function h(){var e,t=this;if(t.parent()){if(!t.parent().parent()&&1===t.parent().length)return t.reset();if(1===t.parent().length)return t.parent().remove();e=t.parent().indexOf(t),t.parent().splice(e,1),t=null}}function g(){var e=this;if(e.fields.length){if(e.field=e.fields[0],e.type=H[e.field.type],!e.type)throw new Error('Field type "'+e.field.type+'" not recognized, please choose one from "'+Object.keys(H).join(", ")+'"');e.fieldName=e.field.name,e.operator=e.type.operators[e.field.operatorIndex||0]}else e.field=e.field||{},e.type=H[e.type||e.types[0]],e.operator=e.type.operators[0];e.value=null}function m(){return this.splice(0,this.length),this.setDirty(!1),this}function b(e){return e=e||this.build(),this.isQueryEmpty(e)&&this.isSortEmpty(e)}function v(e){e=e||this.build();var t=Object.keys(e).length;return 0===t||1===t&&e.hasOwnProperty("$sort")}function y(e){return e=e||this.build(),0===Object.keys(e.$sort||{}).length}function w(e){return this.$dirty=e=!0,this.$touched=e=!0,this}function $(){return this.$dirty}function x(e,t){var n,r;if(t&&delete this.field,e)for(n=e.toLowerCase(),r=0;r<this.fields.length;r++){if(this.fields[r].key===e||this.fields[r].nameLower===n)return this.setField(this.fields[r]);if(this.fields[r].match&&(e.match(this.fields[r].match)||n.match(this.fields[r].match)))return this.field&&this.field.field===this.fields[r].field?void 0:this.setField(this.fields[r],e)}this.fieldName=e,this.field={key:e}}function k(){if(this.field.suggestions){var e=this;this.field.suggestions("",function(t){var n=t.filter(function(t){return t.key===e.value});n.length&&(e.suggestion=n[0].name)})}}function C(e,t){if(this.type.name!==e.type){if(this.type=H[e.type],!this.type)throw new Error('Field type "'+e.type+'" not recognized, please choose one from "'+Object.keys(H).join(", ")+'"');this.value=null}var n=this.field;this.field=angular.copy(e||{}),this.fieldName=t||this.field.name,this.operator=this.type.operators[this.field.operatorIndex||0],e.onSet&&e.onSet(this,n)}function S(e){this.type.templates&&this.type.templates[this.operator]!==this.type.templates[e]&&(this.value=null),this.operator=e}function E(e){this.type=H[e],this.operator=this.type.operators[0],this.value=null}function T(e){var t={};this.fields.length&&(t.fieldName=this.fields[0].name,t.name=this.fields[0].name,t.key=this.fields[0].key,t.direction=1),isNaN(e)?this.sortBy.push(t):this.sortBy.splice(e+1,0,t)}function D(e){this.sortBy.splice(isNaN(e)?this.sortBy.length-1:e,1)}function N(e){e=e||0,this.sortBy[e].direction=1===this.sortBy[e].direction?-1:1}function O(e,t){var n,r;if(t=t||0,e)for(n=e.toLowerCase(),r=0;r<this.fields.length;r++)if(this.fields[r].key===e||this.fields[r].nameLower===n)return this.sortBy[t].fieldName=this.fields[r].name,this.sortBy[t].name=this.fields[r].name,this.sortBy[t].key=this.fields[r].key,this.sortBy[t];return this.sortBy[t].fieldName=e,this.sortBy[t].key=e,this.sortBy[t]}function M(e,t){t=t||0,this.sortBy[t].fieldName=e.name,this.sortBy[t].name=e.name,this.sortBy[t].key=e.key}function R(e,t){var n,r=[],i=this,a=(e||"").toLowerCase();if(!e||e===t)return i;for(n=0;n<i.length;n++)i[n].nameLower&&i[n].nameLower.match(new RegExp(".*"+a+".*"))&&r.push(i[n]);return r}function A(n,r){var i,a,o,s,l,u,d,p,f={};for(1===arguments.length&&(Array.isArray(arguments[0])?(r=arguments[0],n=null):angular.isObject(arguments[0])&&(f=arguments[0],r=f.fields,n=f.name)),r=r||[],i=0;i<r.length;i++){if(r[i].key=r[i].key||r[i].field||r[i].property,r[i].name=e.translate(r[i].name||r[i].key),r[i].nameLower=(r[i].name||"").toLowerCase(),r[i].behaviour&&(a=null,o={},s=null,"string"==typeof r[i].behaviour?a=r[i].behaviour:(a=Object.keys(r[i].behaviour)[0],o=r[i].behaviour[a]),l=j[a])){u=l.call(r[i],o);for(d in u)r[i][d]=u[d]}r[i].type&&(r[i].disableType=!0),r[i].type=r[i].type||r[i].defaultType||q,r[i].allowedOperatorIndexes=r[i].allowedOperatorIndexes,r[i].operatorIndex>=0&&(r[i].disableOperator=!0),r[i].operatorIndex=r[i].operatorIndex||r[i].defaultOperatorIndex,r[i].values&&!r[i].template&&(r[i].template=_.list),r[i].emptyValues=r[i].emptyValues||r[i].ignoreValues,r[i].isEmptyValue=r[i].isEmptyValue||function(e){return null===e||void 0===e?!0:this.emptyValues||this.type.emptyValues?(this.emptyValues||this.type.emptyValues).indexOf(e)>-1:!1},r[i].loadSuggestions=r[i].loadSuggestions||r[i].getSuggestions||r[i].suggestions,r[i].onlySuggestedValues=r[i].onlySuggestedValues,r[i].loadSuggestions&&(r[i].resetOnFieldChange=!0,r[i].onSet=r[i].onSet||function(e,t){t?(e.value=null,e.suggestion="",e.suggestions=[]):e.suggestion=e.suggestion||e.value},r[i].template=r[i].template||_.suggestions,r[i].createSuggestions=function(e){var n=e.suggestionMinLength||e.suggestionMinSearchLength||3;return t.debounce(function(t,r){r=r||"",r.length>=n&&e.loadSuggestions(r,function(e){t.suggestions=e.map(function(e){return{key:e.key||e,name:e.name||e.key||e}})})},e.suggestionDebounce>=0?e.suggestionDebounce:350)}(r[i]))}return r.filterByName=R,p=c.call({fields:r,types:Object.keys(H)},"AND"),p.name=n,p.onlyPredefinedFields=f.onlyPredefinedFields,p.append("AND"),p}var _={query:"neQuery/query.html",sort:"neQuery/sort.html",disabled:"neQuery/disabled.html",number:"neQuery/number.html",string:"neQuery/string.html","boolean":"neQuery/boolean.html",date:"neQuery/date.html",datetime:"neQuery/datetime.html",list:"neQuery/list.html",suggestions:"neQuery/string-suggestions.html"},L="$sort",P=["$limit","$page","$skip","$sort"],I="$",q="string",H={string:{name:"string",operators:["$regex_exact","$regex_contains","$regex_begins","$regex_ends","$in","$ne","$regex_ncontains","$regex_nbegins","$regex_nends","$nin","$regex"],template:_.string},number:{name:"number",operators:["$eq","$lt","$lte","$gt","$gte"],template:_.number},"boolean":{name:"boolean",operators:["$eq"],template:_["boolean"],onBuild:function(e){return-1!==[!0,"true","True",1,"yes","Yes"].indexOf(e)?!0:!1}},date:{name:"date",operators:["$eq","$lt","$lte","$gt","$gte"],template:_.date},datetime:{name:"datetime",operators:["$eq","$lt","$lte","$gt","$gte"],template:_.datetime},object:{name:"object",operators:["$exists"],template:_["boolean"]},array:{name:"array",operators:["$size"],template:_.string,templates:{$size:_.number}}},B=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/,F={AND:{build:function(e){var t,n,r=[];for(n=0;n<(e.length||0);n++)t=s(e[n],!0),Object.keys(t).length&&r.push(t);return r.length?{$and:r}:{}}},OR:{build:function(e){var t,n,r=[];for(n=0;n<(e.length||0);n++)t=s(e[n],!0),Object.keys(t).length&&r.push(t);return r.length?{$or:r}:{}}},VALUE:{parse:function(e,t){var n,r,i=[],a=u(t),o=a.type;if(t=a.value,"[object Object]"===Object.prototype.toString.call(t)){for(r in t)n=(F[r]||F.VALUE).parse(e,t[r]),n&&i.push(n);return i}return o?{fieldName:e,typeName:o,operator:"string"===o?"$regex_exact":"$eq",value:t}:void 0}},$and:{parse:function(e,t){return Array.isArray(t)?{logical:"AND",queries:t}:null}},$or:{parse:function(e,t){return Array.isArray(t)?{logical:"OR",queries:t}:null}},$eq:{build:function(e){return e},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,r?{fieldName:e,typeName:r,operator:"string"===r?"$regex_exact":"$eq",value:t}:void 0}},$exists:{build:function(e){return{$exists:e}},parse:function(e,t){return"boolean"==typeof t?{fieldName:e,typeName:"object",operator:"$exists",value:t}:void 0}},$size:{build:function(e){return{$size:e}},parse:function(e,t){return"number"==typeof t?{fieldName:e,typeName:"array",operator:"$size",value:t}:void 0}},$lt:{build:function(e){return{$lt:e}},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,"number"===r||"date"===r||"datetime"===r?{fieldName:e,typeName:r,operator:"$lt",value:t}:void 0}},$lte:{build:function(e){return{$lte:e}},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,"number"===r||"date"===r||"datetime"===r?{fieldName:e,typeName:r,operator:"$lte",value:t}:void 0}},$gt:{build:function(e){return{$gt:e}},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,"number"===r||"date"===r||"datetime"===r?{fieldName:e,typeName:r,operator:"$gt",value:t}:void 0}},$gte:{build:function(e){return{$gte:e}},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,"number"===r||"date"===r||"datetime"===r?{fieldName:e,typeName:r,operator:"$gte",value:t}:void 0}},$regex:{build:function(e){return{$regex:e}},parse:function(e,t){var n,r,i,a;for(a=0;a<H.string.operators.length;a++)if(r=H.string.operators[a],F[r]&&F[r].check&&void 0!==(i=F[r].check(t))){n=r,t=i;break}return{fieldName:e,typeName:"string",operator:n||"$regex",value:t}}},$regex_exact:{build:function(e){return e}},$regex_contains:{build:function(e){return e=n(e),{$regex:".*"+e+".*"}},check:function(e){return e=(e.match(/^\.\*(.*)\.\*$/)||[])[1],void 0===e?void 0:r(e)}},$regex_ncontains:{build:function(e){return e=e=n(e),{$regex:"^((?!"+e+").)*$"}},check:function(e){return e=(e.match(/^\^\(\(\?\!(.*)\)\.\)\*\$$/)||[])[1],void 0===e?void 0:r(e)}},$regex_begins:{build:function(e){return e=n(e),{$regex:"^"+e+".*"}},check:function(e){return e=(e.match(/^\^(.*)\.\*$/)||[])[1],void 0===e?void 0:r(e)}},$regex_nbegins:{build:function(e){return e=n(e),{$regex:"^(?!"+e+").*$"}},check:function(e){return e=(e.match(/^\^\(\?\!(.*)\)\.\*\$$/)||[])[1],void 0===e?void 0:r(e)}},$regex_ends:{build:function(e){return e=n(e),{$regex:".*"+e+"$"}},check:function(e){return e=(e.match(/^\.\*(.*)\$$/)||[])[1],void 0===e?void 0:r(e)}},$regex_nends:{build:function(e){return e=n(e),{$regex:"^(?!.*"+e+"$)"}},check:function(e){return e=(e.match(/^\^\(\?\!\.\*(.*)\$\)$/)||[])[1],void 0===e?void 0:r(e)}},$ne:{build:function(e){return{$ne:e}},parse:function(e,t){var n=u(t),r=n.type;return t=n.value,r?{fieldName:e,typeName:r,operator:"$ne",value:t}:void 0}},$in:{build:function(e){return"string"==typeof e&&(e=e.replace(/,\s+/g,",").replace(/\s+,/g,",").replace(/^,/,"").replace(/,$/,"").split(",")),{$in:e}},parse:function(e,t){return Array.isArray(t)?{fieldName:e,typeName:"string",operator:"$in",value:t.join(", ")}:void 0}},$nin:{build:function(e){return"string"==typeof e&&(e=e.replace(/,\s+/g,",").replace(/\s+,/g,",").replace(/^,/,"").replace(/,$/,"").split(",")),{$nin:e}},parse:function(e,t){return Array.isArray(t)?{fieldName:e,typeName:"string",operator:"$nin",value:t.join(", ")}:void 0}}},j={keyValueArray:function(e){var t=this,n=t.field,r=e.prefix||e.keyPrefix||"",i=e.key||e.idKey,a=e.value||e.valueKey;if(!i||!a)throw new Error('neQuery: Cannot set field behaviour, "idKey" or "valueKey" not defined');return{match:new RegExp(n+".*"),build:function(e,t,o){var s={};return s[i]=o.fieldName.replace(n+".",""),s[a]=t,{key:r+n,value:{$elemMatch:s}}},merge:function(e,t,n){return t[e].$elemMatch&&(n[e].$all?n[e].$all.push(t[e]):n[e]={$all:[n[e],t[e]]}),n},parse:function(e,t,o){var s,l,u;if(t.$elemMatch)return s=e+"."+t.$elemMatch[i],{key:s.replace(r,""),value:t.$elemMatch[a]};if(Array.isArray(t.$all)){for(l=[],u=0;u<t.$all.length;u++)t.$all[u].$elemMatch&&(l[u]={value:{},logical:u>0?"AND":o},l[u].value[n+"."+t.$all[u].$elemMatch[i]]=t.$all[u].$elemMatch[a]);return l}}}}};return A.templates=_,A.fieldBehaviours=j,A}]).factory("neQueryTests",["NeQuery","neObject",function(e,t){return function(){function n(e,n,i){var a=r.fill(n).build(),o=t.deepEqual(i||n,a,function(e){return"$sort"===e});o?console.log('Query test "'+e+'" - OK'):console.warn('Query test failed "'+e+'", input query do not match built one',i||n,a)}var r=new e;n("simple range query",{field1:{$gte:1,$lte:2}}),n("simple and[1,2]",{field1:"value1",field2:"value2"}),n("simple and[1,2] with $and operator",{$and:[{field1:"value1"},{field2:"value2"}]},{field1:"value1",field2:"value2"}),n("simple or[1,2] with $or operator",{$or:[{field1:"value1"},{field2:"value2"}]}),n("or[ and[1,2], or[1,2], and[1,2] ]",{$and:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]}),n("or[ or[1,2], and[1,2], or[1,2] ]",{$or:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{$and:[{field1_and1:"value1_and1"},{field2_and1:"value2_and1"}]},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]},{$or:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{field1_and1:"value1_and1",field2_and1:"value2_and1"},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]}),n("and[ or[1,2], and[1,2], or[1,2] ]",{$and:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{$and:[{field1_and1:"value1_and1"},{field2_and1:"value2_and1"}]},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]},{$and:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{
field1_and1:"value1_and1",field2_and1:"value2_and1"},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]}),n("and[ or[1,2], or[1,2] ]",{$and:[{$or:[{field1_or1:"value1_or1"},{field2_or1:"value2_or1"}]},{$or:[{field1_or2:"value1_or2"},{field2_or2:"value2_or2"}]}]}),n("or[ and[1,2], and[1,2] ]",{$or:[{$and:[{field1_and1:"value1_and1"},{field2_and1:"value2_and1"}]},{$and:[{field1_and2:"value1_and2"},{field2_and2:"value2_and2"}]}]},{$or:[{field1_and1:"value1_and1",field2_and1:"value2_and1"},{field1_and2:"value1_and2",field2_and2:"value2_and2"}]}),n("or[ or[1,range], and[range,1,2], or[range,range] ]",{$or:[{$or:[{field1_or1:"value1_or1"},{field2_or1:{$gt:1,$lt:100}}]},{$and:[{field1_and1:{$gt:1,$lt:100}},{field1_and1:"value1_and1"},{field2_and1:"value2_and1"},{$or:[{field1_and1_or:{$gte:1,$lte:100}},{field2_and1_or:"value2_and1_or"}]}]},{$or:[{field1_or2:{$gte:1,$lte:100}},{field2_or2:{$gte:1,$lte:100}}]}]},{$or:[{$or:[{field1_or1:"value1_or1"},{field2_or1:{$gt:1,$lt:100}}]},{$and:[{field1_and1:{$gt:1}},{field1_and1:{$lt:100}},{field1_and1:"value1_and1"},{field2_and1:"value2_and1"},{$or:[{field1_and1_or:{$gte:1,$lte:100}},{field2_and1_or:"value2_and1_or"}]}]},{$or:[{field1_or2:{$gte:1,$lte:100}},{field2_or2:{$gte:1,$lte:100}}]}]})}}]),angular.module("neRest",["neObject","neNotifications","neLoading"]).config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).factory("NeResourceTransformators.dateStringsToDates",["neObject",function(e){return e.dateStringsToDates}]).factory("NeResourceTransformators.removePrefixedProps",["neObject",function(e){return e.removePrefixedProps}]).factory("NeRestResource",["$http","$timeout","neObject","neNotifications","neLoading","NeResourceTransformators.dateStringsToDates","NeResourceTransformators.removePrefixedProps",function(e,t,n,r,i,a,o){function s(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function l(e,t,n){var r=new RegExp(s(t),"g");return e.replace(r,n)}function u(e){return e=e.indexOf("?")>-1?e.replace(/([^\/])\?/,"$1/?"):e+"/",e.replace(/([^:])(\/){2,}/g,"$1/")}function c(e){return!!e.match(/^http:/)||!!e.match(/^https:/)||!!e.match(/^\/\//)}function d(e){var t,n=(e||"").match(/\{([^\{\}]+)/g)||[];for(t=0;t<n.length;t++)n[t]=n[t].substring(1);return n}function p(e){return void 0===e||null===e?"":JSON.stringify(e).replace(/^"/,"").replace(/"$/,"")}function f(e,t,r,i){var a,o,s,d,f,h=this;for(t=u(t||""),a=c(t)?t:e+"/"+t,o=h.options.commands[i].urlParams,f=0;f<o.length;f++)d=n.deepGet(r,o[f]),s="_command"===o[f]?i:void 0===d?"":d,"string"==typeof s&&(s=encodeURIComponent(s).replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/#/g,"%23")),a=l(a,"{"+o[f]+"}",p(s));return u(a)}function h(e,t){var n,r,i=this,a="",o=i.options.commands[t],s=i.options,l=o.queryKey||s.queryKey,u=o.urlParams;if(l)return Object.keys(e).length?"?"+l+"="+JSON.stringify(e):"";for(n in e)if(e.hasOwnProperty(n)&&-1===u.indexOf(n))if(Array.isArray(e[n]))for(r=0;r<e[n].length;r++)a+="&"+n+"="+p(e[n][r]);else void 0!==e[n]&&(a+="&"+n+"="+p(e[n]));return a?"?"+a.substring(1):""}function g(e,t,r,i){var a,o,s=e.commands[t],l=s.dataKey||e.dataKey,u=s.resourceKey||e.resourceKey,c=s.idKey||e.idKey;return i?i=n.deepGet(i,u):r&&(a=n.deepGet(r,l),i=n.deepGet(a,u)),i&&(o=n.deepGet(i,c),void 0!==o&&(i.id=o)),i}function m(e,t,r){var i,a,o=e.commands[t],s=(o.isList,o.dataKey||e.dataKey),l=o.resourceListKey||e.resourceListKey,u=n.deepGet(r,s);if(l&&(u=n.deepGet(u,l)),i=[],Array.isArray(u))for(a=0;a<u.length;a++)i.push(g(e,t,null,u[a]));return i}function b(e,t,r,i){var a=e.commands[t],o=a.queryPageKey||e.queryPageKey,s={count:n.deepGet(r,a.paginationCountKey||e.paginationCountKey)||0,page:n.deepGet(r,a.paginationPageKey||e.paginationPageKey)||n.deepGet(i,o)||0,pages:n.deepGet(r,a.paginationPagesCountKey||e.paginationPagesCountKey)||0,next:n.deepGet(r,a.paginationHasNextKey||e.paginationHasNextKey),prev:n.deepGet(r,a.paginationHasPrevKey||e.paginationHasPrevKey)};return void 0===s.page||void 0===s.pages||void 0!==s.next&&void 0!==s.prev||(s.next=s.page<s.pages,s.prev=s.page>1),s}function v(e,t,r,i){var a,o,s=e.commands[t],l=s.additionalDataKeys||e.additionalDataKeys;for(o in l)a=n.deepGet(r,o),void 0!==a&&n.deepSet(i,l[o],a);return i}function y(e){var t,n=[];for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=0;t<e.length;t++)if("function"==typeof e[t]&&e[t].apply(this,n)===!0)return}function w(e,t,n,r){return function(i){var a,o=(i.config,t.commands[n]),s=S(i.data,o.transformResponse),l=i.status,u=(i.headers,o.isList);u?(a=m(t,n,s)||[],a.pagination=b(t,n,s,e)):a=g(t,n,s),a=v(t,n,s,a),y([o.onData,t.onData],a,(a||{}).pagination,s,l,u,n),y(r,a,(a||{}).pagination,s,l)}}function $(e,t,r,i){return function(e){var a=(e.config,t.commands[r]),o=S(e.data,a.transformResponse),s=e.status,l=e.headers,u=i.concat([(a.responseErrors||{})[s]||(a.responseErrors||{})["default"],t.responseErrors[s]||t.responseErrors["default"]]),c=a.errorKey||t.errorKey,d=n.deepGet(o,c);y(u,d,s,l)}}function x(e,n,r,a,o,s){function l(t){var r,s,l,u;if(t=t||{},r=t.getResponseHeader("content-type"),s=t.responseText,l=t.status?parseInt(t.status):0,r&&"application/json"===r.substring(0,16))try{s=JSON.parse(t.responseText)}catch(c){l=0}u={data:s,status:l,headers:t.headers,httpOpts:{}},f("removeEventListener"),v||i.reqEnded(),l>=200&&299>=l?w(n,g,e,a)(u):$(n,g,e,o)(u)}function u(e){l(e.target,"load")}function c(e){l(e.target,"error")}function d(e){l(e.target,"abort")}function p(e){s&&(e.lengthComputable?y(s,Math.ceil(100*e.loaded/e.total)):y(s,50))}function f(e){T[e]("load",u,!1),T[e]("error",c,!1),T[e]("abort",d,!1),T.upload[e]("progress",p,!1)}var h,g=this.options,m=r.url,b=(r.headers,r.data),v=r.ignoreLoading,x=new FormData;for(h in b)b[h]instanceof Blob||b[h]instanceof File?x.append(h,b[h],b[h].name):x.append(h,b[h]);t(function(){f("addEventListener"),v||i.reqStarted(),T.open("POST",m,!0),T.send(x)})}function k(){var e,t,n,r,i=[{},k.defaults];for(e=0;e<arguments.length;e++)i.push(arguments[e]);t=angular.merge.apply(angular,i),t.baseUrl=u(t.baseUrl),n=this,n.options=t;for(r in t.commands)t.commands[r].transformRequest=angular.merge({},t.transformRequest,t.commands[r].transformRequest||{}),t.commands[r].transformResponse=angular.merge({},t.transformResponse,t.commands[r].transformResponse||{}),n[r]=function(e){return function(){var t,r=[e];for(t=0;t<arguments.length;t++)r.push(arguments[t]);return n.command.apply(n,r)}}(r);return n}function C(e,t,n,r,i){return"$page"!==t&&(e=i.deepSet(e,t,e.$page),delete e.$page),"$limit"!==n&&(e=i.deepSet(e,n,e.$limit),delete e.$limit),"$sort"!==r&&(e=i.deepSet(e,r,e.$sort),delete e.$sort),e}function S(e,t){var r,i;t=t||{},r=e,"[object Object]"===Object.prototype.toString.call(e)&&(r=n.extend(!0,{},e)),Array.isArray(e)&&(r=n.extend(!0,[],e));for(i in t)k.dataTransformators[i]&&k.dataTransformators[i](r,t[i]);return r}var E={baseUrl:"/yoururl",urlEndSlash:!1,headers:{"Content-Type":"application/json"},dataKey:"data",resourceListKey:"this",resourceKey:"this",idKey:"id",errorKey:"data",paginationCountKey:"pagination.count",paginationPageKey:"pagination.page",paginationPagesCountKey:"pagination.pages",paginationHasNextKey:"pagination.next",paginationHasPrevKey:"pagination.prev",additionalDataKeys:{},responseErrors:{400:function(e){var t,n=e;if(angular.isObject(e)){n="";for(t in e)n+=t+": "+e[t]+", "}r.error("Validation Failed",n)},403:function(){r.error("Access Denied","Try logout and login again, please")},404:function(){r.error("Document or his version not found","Try refresh page, please")},409:function(e){r.error(e)},"default":function(){r.error("Connection Failed","Try later, please")}},defaultQuery:{},urlBuilder:f,queryStringBuilder:h,queryKey:null,queryPageKey:"$page",queryLimitKey:"$limit",querySortKey:"$sort",transformRequest:{removePrefixedProps:"$"},transformResponse:{dateStringsToDates:!0},commands:{one:{method:"GET",url:"/{id}"},all:{method:"GET",isList:!0},find:{method:"GET",isList:!0},create:{method:"POST",url:"/{id}"},update:{method:"PUT",url:"/{id}"},remove:{method:"DELETE",url:"/{id}"}}},T=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(n){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(r){}throw new Error("This browser does not support XMLHttpRequest.")}();return k.defaults=E,k.define=k.create=function(e){return new k(e)},k.dataTransformators={dateStringsToDates:a,removePrefixedProps:o},k.prototype.command=function(t,r,i,a,o,s){var l,u,c,p,f,h,g,m,b,v,y,k,E,T,D,N,O,M,R,A,_,L,P,I,q,H=this;if(!H.options.commands[t])throw new Error('This resource has no command "'+t+'" defined');if("function"==typeof arguments[1]?(s=arguments[3],o=arguments[2],a=arguments[1],r={},i=null):"function"==typeof arguments[2]&&(s=arguments[4],o=arguments[3],a=arguments[2],r=arguments[1],i=null),u=H.options,c=u.commands[t],p=("string"==typeof c.baseUrl?c.baseUrl:u.baseUrl)||"",f=(c.method||"GET").toLowerCase(),h="boolean"==typeof c.body?c.body:["options","post","post-multipart","upload","put","delete"].indexOf(f)>-1,g=c.headers||u.headers,m=("string"==typeof c.url?c.url:u.url)||"",b=c.urlBuilder||u.urlBuilder,v=c.urlEndSlash||u.urlEndSlash,y=c.queryStringBuilder||u.queryStringBuilder,k=c.defaultQuery||u.defaultQuery,E=void 0!==c.ignoreLoading?c.ignoreLoading:u.ignoreLoading,T=c.transformRequest,D=c.idKey||u.idKey,N=c.queryPageKey||u.queryPageKey,O=c.queryLimitKey||u.queryLimitKey,M=c.querySortKey||u.querySortKey,u.commands[t].urlParams=c.urlParams||d(m),null===i&&h&&angular.isObject(r)?(i=arguments[1],r=null,l={}):(l={},l=!r||"string"!=typeof r&&"number"!=typeof r?r:n.deepSet(l,D,r),l=angular.merge({},k,l||{})),0===l.$page)throw new Error("NeRestResource: query.$page is equal to zero, must be greater");l=C(l,N,O,M,n),i&&(i=C(i,N,O,M,n)),R=[a,c.onSuccess,u.onSuccess],A=[o,c.onError,u.onError],_=[s,c.onProgress,u.onProgress],L=angular.merge({},i||{},l||{}),P=b.call(H,p,m,L,t),v&&-1===P.indexOf("?")&&(P+="/"),I=y.call(H,l,t),P.indexOf("?")>-1&&0===I.indexOf("?")&&(I="&"+I.substring(1)),q={url:P+I,method:f,data:S(i,T),headers:g,ignoreLoading:E},"post-multipart"===f||"upload"===f?x.call(H,t,l,q,R,A,_):e(q).then(w(l,u,t,R),$(l,u,t,A))},k}]),angular.module("neState",["ngCookies"]).factory("NeStateService",["$timeout","$location","$rootScope","$cookies","neObject",function(e,t,n,r,i){function a(e){return window.btoa(e)}function o(e){return window.atob(e)}function s(e){return e=e||{},angular.merge(this,{},d,e),this.history={},this.changeListeners=[],this}function l(e){return function(t){var n,r;if(!this.history[t])throw new Error('StateService: there is no registered state with id "'+t+'"');return n=this.getCurrentState(t),r=this.history[t].currentStateIndex+e,0>r&&(r=0),r>=this.history[t].length&&(r=this.history[t].length?this.history[t].length-1:0),this.history[t].currentStateIndex=r,n===this.getCurrentState(t)?this:this.fireChange(t,n)}}var u={encrypt:!1,prefix:"q",parser:function(e){var n=this.prefix,r=this.encrypt;e=e||t.search()[n];try{return r&&(e=o(e)),i.fromJson(e||"{}")||{}}catch(a){}return{}},builder:function(e){function t(t,n){return e[t]?Object.keys(e[t]).length?n:void 0:n}var n=(this.prefix,this.encrypt),r=JSON.stringify(e,t);return n&&(r=a(r)),r},autoUpdate:!1,autoFill:!1,sync:!1,_unbinders:{},init:function(e,t){var r=this;(r.autoFill||r.sync)&&(t&&(r._unbinders[t]={routeUpdate:n.$on("$routeUpdate",function(){r.fill(e,t)}),routeChangeSuccess:n.$on("$routeChangeSuccess",function(){r.fill(e,t)})}),r.fill(e,t))},destroy:function(e,t){return this.unbind(e,t)},unbind:function(e,t){var n,r,i=this,a=t?[t]:Object.keys(i._unbinders);for(n=0;n<a.length;n++)r=a[n],i._unbinders[r]&&(i._unbinders[r].routeUpdate(),i._unbinders[r].routeChangeSuccess())},fill:function(n,r){var i=this,a=t.search()[i.prefix],o=i.parser(a)||{};e(function(){if(r)n.change(r,o[r]||{},!0);else for(var e in n.history)n.change(e,o[e]||{},!0)})},update:function(e){var n,r=this;(r.autoUpdate||r.sync)&&(n=r.builder(e.getCurrentState()),t.search(r.prefix,n))}},c={prefix:"appState",path:"/",secure:!1,autoUpdate:!1,autoFill:!1,sync:!1,init:function(){},destroy:function(){},unbind:function(){},fill:function(t,n){var i=this,a=r.getObject(i.prefix)||{};e(function(){if(n)t.change(n,a[n]||{},!0);else for(var e in t.history)t.change(e,a[e]||{},!0)})},update:function(e){var t=this;(t.autoUpdate||t.sync)&&r.putObject(t.prefix,e.getCurrentState(),{domain:t.domain,expires:t.expires,path:t.path,secure:t.secure})}},d={maxHistoryStates:5,store:u};return s.locationStore=u,s.cookiesStore=c,s.prototype.create=s.prototype.register=function(e,t){var n,r;return t=t||{},n=this,n.history[e]?n.history[e]:(r=[],r.maxHistoryStates=t.maxHistoryStates||n.maxHistoryStates,"location"===t.store&&(t.store=u),"cookies"===t.store&&(t.store=c),r.store=angular.merge({},n.store,t.store||{}),r.changeListeners=[],r.currentStateIndex=-1,n.history[e]=r,n.history[e].store.init(n,e),n.history[e])},s.prototype.changeState=s.prototype.change=function(e,t,n){var r,a,o,s;if(!angular.isObject(t))throw new Error('StateService: cannot change state, value have to be object and is "'+t+'"');return r=this,r.history[e]=r.history[e]||r.register(e),a=r.history[e].currentStateIndex,o=r.history[e].length?r.history[e].length-1-a:0,r.history[e].length>0&&i.deepEquals(r.history[e][a],t)?r:(r.history[e].splice(a+1,o),r.history[e].push(angular.merge({},t)),r.history[e].length>r.history[e].maxHistoryStates?r.history[e].splice(0,1):r.history[e].currentStateIndex++,n||r.history[e].store.update(r,e),s=n,r.fireChange(e,null,s))},s.prototype.updateState=s.prototype.update=function(e,t){var n,r;if(!angular.isObject(t))throw new Error('StateService: cannot change state, value have to be object and is "'+t+'"');return n=this,n.history[e]=n.history[e]||n.register(e),n.history[e].length?(r=n.history[e].currentStateIndex,n.history[e][r]=angular.merge({},t),n):n},s.prototype.fireChange=function(e,t,n){var r,i,a,o;if(!this.history[e])throw new Error('StateService: there is no registered state with id "'+e+'"');for(r=this.history[e].currentStateIndex,i=this.history[e].changeListeners,t=t||this.getPrevState(e)||{},a=this.getCurrentState(e)||{},o=0;o<i.length;o++)i[o](a,t,n,r);for(o=0;o<this.changeListeners.length;o++)this.changeListeners[o](e,a,t,n,r);return this},s.prototype.watch=s.prototype.onChange=function(e,t){var n=this;return 1===arguments.length&&(t=arguments[0],e=null),e?(n.history[e]=n.history[e]||n.register(e),n.history[e].changeListeners.push(t)):n.changeListeners.push(t),n},s.prototype.unWatch=s.prototype.unbindChange=s.prototype.offChange=function(e,t){1===arguments.length&&(t=arguments[0],e=null);var n;if(e){if(!this.history[e])throw new Error('StateService: there is no registered state with id "'+e+'"');n=this.history[e].changeListeners.indexOf(t),n>=0&&this.history[e].changeListeners.splice(n,1)}else n=this.changeListeners.indexOf(t),n>=0&&this.changeListeners.splice(n,1);return this},s.prototype.clear=function(e){return e?(this.history[e].splice(0,this.history[e].length),this.history[e].changeListeners=[],this.history[e].currentStateIndex=-1):(this.history={},this.changeListeners=[]),this},s.prototype.destroy=function(e){if(e)this.history[e].store.unbind(this,e),this.store.unbind(this,e),this.clear(e),delete this.history[e];else{this.history={},this.changeListeners=[],this.store.unbind(this,e);for(var t in this.history)this.history[t].store.unbind(this,t)}return this},s.prototype.getCurrentState=function(e){var t;if(0===arguments.length){t={};for(e in this.history)t[e]=this.history[e][this.history[e].currentStateIndex];return t}if(!this.history[e])throw new Error('StateService: there is no registered state with id "'+e+'"');return this.history[e][this.history[e].currentStateIndex]},s.prototype.getPrevState=function(e){if(!this.history[e])throw new Error('StateService: there is no registered state with id "'+e+'"');var t=this.history[e].currentStateIndex-1;return 0>t?{}:this.history[e][t]},s.prototype.getNextState=function(e){if(!this.history[e])throw new Error('StateService: there is no registered state with id "'+e+'"');var t=this.history[e].currentStateIndex+1;return t>=this.history[e].length&&(t=this.history[e].length?this.history[e].length-1:0),this.history[e][t]},s.prototype.getFutureState=function(e,t){var n={};return 2===arguments.length?(n[e]=t,n=angular.merge({},this.getCurrentState(),n)):n=this.getCurrentState(),n},s.prototype.undo=l(-1),s.prototype.redo=l(1),s.prototype.undoAll=function(){for(var e in stateObj)this.undo(e)},s.prototype.redoAll=function(){for(var e in stateObj)this.redo(e)},s}]),angular.module("neTree",["neObject"]).run(["$templateCache",function(e){e.put("neTree/item.html","<div>{{item}}</div>"),e.put("neTree/child.html",'<div ng-include="tree.itemTemplate"></div><ul ng-show="item.$expanded">    <li ng-repeat="item in item.$children" ng-include="\'neTree/child.html\'"></li></ul>'),e.put("neTree/tree.html",'<div class="tree">    <ul>        <li ng-repeat="item in tree.items" ng-include="\'neTree/child.html\'"></li>    </ul>    <div class="tree-backdrop" ng-show="tree.disabled"></div></div>'),e.put("neTree/tree-item-pagination.html",'<div ng-if="item.$expanded" class="tree-item-pagination" ng-class="{\'tree-item-pagination-border\':item.$children.length}">    <div ng-if="item.$pagination && !item.$paginationDisabled" class="btn-group btn-group-xs">        <button class="btn btn-light btn-xs" ng-click="tree.setPage(item, \'prev\')" ng-disabled="item.$prevDisabled">            <i class="fa fa-backward"></i>        </button>        <button class="btn btn-light btn-xs" ng-click="tree.addPage(item)" ng-disabled="item.$nextDisabled">            {{item.$pagination.page}} <span ng-if="item.$pagination.pagesCount">{{::\'of\'|translate}} {{item.$pagination.pagesCount}}</span>        </button>        <button class="btn btn-light btn-xs" ng-click="tree.setPage(item, \'next\')" ng-disabled="item.$nextDisabled">            <i class="fa fa-forward"></i>        </button>    </div></div>')}]).directive("neTreeUpdateBlur",["$timeout",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){function i(e){c=e,c?t.addClass(o):t.removeClass(o)}function a(){i(!1),d=r.$viewValue}var o,s,l,u,c,d;if(r){if(o=n.dirtyClass||"is-dirty","ng-dirty"===o)throw new Error('dirtyClass cannot be equal to "ng-dirty", it is angular reserved class name');if(s=(n.treeUpdateBlur||"").split(","),l=s[0]||"item",u=s[1]||"tree",!e[u])throw new Error('Scope has not grid with name "'+u+'"');if(!e[l])throw new Error('Scope has not grid item with name "'+l+'"');c=!1,t.on("blur",function(){c&&e[u].updateItem(e[l],a)}),t.bind("keydown keypress",function(n){13===n.which&&c&&"INPUT"===t[0].nodeName&&(e[u].updateItem(e[l],a),n.preventDefault())}),d="",e.$watch(r.$viewValue,function(){d=r.$viewValue}),r.$viewChangeListeners.push(function(){i(d!==r.$viewValue?!0:!1)})}}}}]).directive("neTree",[function(){return{restrict:"EA",templateUrl:"neTree/tree.html",scope:{tree:"=neTree"},replace:!0,link:function(e){e.tree.itemTemplate=e.tree.itemTemplate||"neTree/item.html"}}}]).directive("neTreeItemPagination",[function(){return{restrict:"EA",templateUrl:"neTree/tree-item-pagination.html",link:function(){}}}]).factory("NeTree",["$timeout","neObject",function(e,t){function n(e){var p,h=[{},n.defaults];for(p=0;p<arguments.length;p++)h.push(arguments[p]);return e=angular.merge.apply(angular,h),this.id=e.id,this.idKey=e.idKey||"id",this.childrenKey=e.childrenKey,this.childrenCountKey=e.childrenCountKey,this.childrenReferenceKey=e.childrenReferenceKey,this.parentReferenceKey=e.parentReferenceKey,this.ancestorsReferenceKey=e.ancestorsReferenceKey,this.getChildrenQuery=e.getChildrenQuery||c,this.maintainReferences=e.maintainReferences||d,this.defaultLimit=e.defaultLimit||10,this.$limit=e.limit||this.defaultLimit,this.maxLimit=e.maxLimit||100,this.defaultQuery=e.defaultQuery||{},this.defaultSort=e.defaultSort||{},this.interceptLoad=e.interceptLoad||e.beforeLoad||e.loadInterceptor,this.onQuery=e.onQueryChange||e.onQuery||e.onFilter,this.onFill=e.onFill||e.onData||e.onLoad,this.onSelect=e.onSelect,this.onFocus=e.onFocus,this.onMove=e.onMove,this.onUpdate=e.onUpdate,this.onCreate=e.onCreate,this.resource=e.restResource||e.resource,this.getResourceMethod=e.getResourceMethod||e.resourceMethod||("function"==typeof this.resource?this.resource:null)||i,this.onRemove=e.onRemove,this.autoLoad=e.autoLoad||e.loadOnChange,this.multiSelect=e.multiSelect||e.multiselect||!1,this.silentMode=!1,this.$query=t.extend("data",{},{$page:this.$page,$limit:this.$limit},this.defaultQuery),this.items=[],this.itemTemplate=e.itemTemplate||e.include||"neTree/item.html",this.disabled=!0,this.fillItems=f,this.fill=f,this.addItems=$,this.addItem=$,this.appendItems=$,this.appendItem=$,this.prependItems=x,this.prependItem=x,this.setSort=g,this.setSortSilent=r("setSort"),this.setSortBy=m,this.setSortBySilent=r("setSortBy"),this.updateQuery=k,this.updateQuerySilent=r("updateQuery"),this.setQuery=y,this.setQuerySilent=r("setQuery"),this.setFilter=y,this.setFilterSilent=r("setQuery"),this.setPage=v,this.setPageSilent=r("setPage"),this.addPage=w,this.addPageSilent=r("addPage"),this.appendPage=w,this.appendPageSilent=r("addPage"),this.load=b,this.loadItems=b,this.refresh=b,this.refreshItems=b,this.refreshItem=T,this.createItem=S,this.copyItem=C,this.updateItem=E,this.removeItem=N,this.moveItem=D,this.selectItem=R,this.focusItem=O,this.getFocusedItem=M,this.getSelectedItems=A,this.selectedItems=[],this.focusedItem=null,this.walkItems=a,this.walk=a,this.getParentOf=o,this.getParentsOf=s,this.getAncestorsOf=s,this.getChildrenOf=l,this.getChildrenCountOf=u,this}function r(e){return function(){var t=this;return t.silentMode=!0,t[e].apply(t,arguments),t.silentMode=!1,t}}function i(e){if(!this.resource)throw new Error("NeTree: resource is undefined");return this.resource[e]}function a(e,t){1===arguments.length&&(t=arguments[0],e=null);var n=this;if(!e||e===n||t(e,n.getParentOf(e))!==!0)return function r(e,t,n){var i;for(e=e||[],i=0;i<e.length;i++)if(n(e[i],t)===!0)return;for(i=0;i<e.length;i++)e[i].$children&&e[i].$children.length>0&&r(e[i].$children,e[i],n)}(e?e.$children||(e===n?n.items:[]):n.items,e,t)}function o(e){var t;return this.walkItems(function(n){return n.$children&&n.$children.indexOf(e)>=0?(t=n,!0):!1}),t}function s(e,t){var n,r=this;return t=t||[],n=r.getParentOf(e),n?(t.unshift(n),r.getAncestorsOf(n,t)):t}function l(e){if(!e)throw new Error("Wrong arguments");return e.$children}function u(e){if(!e)throw new Error("Wrong arguments");return(e.$children||[]).length}function c(e){var n=this,r=n.idKey,i=n.ancestorsReferenceKey,a=n.parentReferenceKey,o=n.childrenReferenceKey,s={};if(i)e?(s.$and=[{},{}],s.$and[0][i]={$size:(t.deepGet(e,i)||[]).length+1},s.$and[1][i]=t.deepGet(e,r)):s[i]={$size:0};else if(a)s[a]=t.deepGet(e,r);else{if(!o)throw new Error('Cannot create query, "ancestorsReferenceKey", or "parentReferenceKey", or "childrenReferenceKey" not set');s[o]=t.deepGet(e,o)}return s}function d(e,n,r){var i,a,o,s,l,u,c,d,p,f,h,g,m;e&&n&&(i=this,a=i.idKey,o=i.ancestorsReferenceKey,s=i.parentReferenceKey,l=i.childrenReferenceKey,u=i.childrenCountKey,c=!1,o&&!r&&(d=[].concat(t.deepGet(e,o)||[]),d.push(t.deepGet(e,a)),t.deepSet(n,o,d)),s&&!r&&(p=t.deepGet(e,a),t.deepSet(n,s,p)),l&&(f=t.deepGet(e,l)||[],h=t.deepGet(n,a),r?(g=f.indexOf(h),g>-1&&f.splice(g,1)):-1===f.indexOf(h)?f.push(h):c=!0,t.deepSet(e,l,f)),u&&!c&&(m=t.deepGet(e,u)||0,t.deepSet(e,u,m+(r?-1:1))))}function p(e,t,n){var r=this;n=n||{},t[e+"limit"]=t[e+"limit"]||r.defaultLimit,t[e+"pagination"]=n,t[e+"pagesCount"]=Math.ceil(n.count/t[e+"limit"]),void 0!==n.prev?t[e+"prevDisabled"]=!n.prev:n.page<=1&&(t[e+"prevDisabled"]=!0),void 0!==n.next?t[e+"nextDisabled"]=!n.next:n.page>=t[e+"pagesCount"]&&(t[e+"nextDisabled"]=!0),t[e+"paginationDisabled"]=t[e+"prevDisabled"]&&t[e+"nextDisabled"]}function f(e,t,n,r){var i=this;return i.disabled=!1,Array.isArray(arguments[0])&&(n=arguments[1],t=arguments[0],e=null),3===arguments.length&&"string"==typeof arguments[2]&&(r=arguments[2],n=e?e.$pagination:null),t=Array.isArray(t)?t:[t],e?(["push","append"].indexOf(r)>-1?Array.prototype.push.apply(e.$children,t):["unshift","prepend"].indexOf(r)>-1?Array.prototype.unshift.apply(e.$children,t):e.$children=t,p("$",e,n)):(["push","append"].indexOf(r)>-1?Array.prototype.push.apply(i.items,t):["unshift","prepend"].indexOf(r)>-1?Array.prototype.unshift.apply(i.items,t):i.items=t,p("$",i,n)),h(i,e),"function"!=typeof i.onFill||i.silentMode||(e?i.onFill(e,e.$children,e.$pagination,e.$query):i.onFill(i,i.items,i.$pagination,i.$query)),this}function h(e,n){e.walkItems(n,function(n,r){if(e.childrenKey){var i=t.deepGet(n,e.childrenKey);i&&!n.$children&&(n.$children=i)}n.$level=r?r.$level+1:0})}function g(e,t,n){"function"==typeof arguments[1]&&(n=arguments[1],t=arguments[0],e=null);var r=this;return e?e.$sort=t:r.$sort=t,grid.setPage("first",e,n)}function m(e,t,n){if("string"==typeof arguments[0]&&(n=arguments[1],t=arguments[0],e=null),t){var r={};return r[t]=n,this.setSort(e,r)}}function b(e,n,r){var i,a,o,s=this;return 2===arguments.length&&"function"==typeof arguments[1]?(r=arguments[1],n=!1):1===arguments.length&&"function"==typeof arguments[0]&&(r=arguments[0],n=!1,e=null),i=e?s.getChildrenOf(e):s.items,a=e?s.getChildrenCountOf(e):s.items.length,!e||!i||i.length<a||n?(!s.interceptLoad||s.interceptLoad&&s.interceptLoad((e||s).$query,e)!==!1)&&(o=e?e.$query||{}:s.$query||{},o=t.extend("data",{},{$page:1,$limit:s.$limit||s.defaultLimit},s.defaultQuery,o,s.getChildrenQuery(e)),o.$sort&&(o.$sort=t.extend("data",{},s.defaultSort,o.$sort)),e?e.$query=o:delete o.$limit,s.disabled=!0,s.getResourceMethod("find",e)(o,function(t,i){s.fillItems(e,t,i,n),r&&r(t),s.disabled=!1})):r&&r(s.items),s}function v(e,t,n,r){var i,a;return"function"==typeof arguments[0]?(n=arguments[0],t=null):"function"==typeof arguments[1]&&(n=arguments[1],t=arguments[0],e=null),i=this,e=e||i,e.$pagination=e.$pagination||{},a="number"==typeof t?t:"first"===t?1:"next"===t?e.$pagination.page+1:"last"===t?e.$pagesCount:"prev"===t?e.$pagination.page-1:"refresh"===t||null===t?e.$pagination.page||1:1,e.$pagesCount&&a>e.$pagesCount&&"number"!=typeof t&&(a=e.$pagesCount+0),0>=a&&(a=1),e.$page=a,i.updateQuery(e,r),i.autoLoad&&!i.silentMode?i.load(e,!0,n):(n&&n(),i)}function y(e,n,r){2===arguments.length&&(r=arguments[1],n=arguments[0],e=null),e=e||i;var i=this;return e.$query=t.extend("data",{},i.defaultQuery||{},n||{}),i.setPage(e,e.$query.$page||"first",r,n),i}function w(e,t,n){"function"==typeof arguments[1]&&(n=arguments[1],"number"==typeof arguments[0]?(limit=arguments[0],e=null):limit=null);var r=this;return t=t||"next",r.setPageSilent(e,t),r.autoLoad&&!r.silentMode?r.load(e,"push",n):(n&&n(),r)}function $(e,t){1===arguments.length&&(t=arguments[0],e=null);var n=this;if(t)return n.fillItems(e,t,"push"),n}function x(e,t){1===arguments.length&&(t=arguments[0],e=null);var n=this;if(t)return n.fillItems(e,t,"unshift"),n}function k(e,n){var r,i;return 1===arguments.length&&(n=arguments[0],e=null),r=this,n=n||{},e=e||r,e.$page=n.$page||e.$page,e.$limit=n.$limit||e.$limit||r.$limit,e.$sort=n.$sort||e.$sort,e.$page&&("number"!=typeof e.$page||e.$page<=0)&&(e.$page=1),!e.$limit||e.$limit<0?e.$limit=r.defaultLimit:e.$limit>r.maxLimit&&(e.$limit=r.maxLimit),i=t.extend("data",{},n,{$limit:e.$limit,$sort:{},$page:e.$page}),e.$sort&&(i.$sort=e.$sort),i.$sort=t.extend("data",{},r.defaultSort||{},e.$sort||{}),0===Object.keys(i.$sort).length&&delete i.$sort,e.$query&&(delete e.$query.$page,delete e.$query.$sort,delete e.$query.$limit),e.$query=t.extend("data",i,e.$query||{}),r.onQuery&&!r.silentMode&&r.onQuery(e.$query,e),r}function C(e,n,r){var i=angular.copy(e);return t.deepRemove(i,this.idKey),this.createItem(this.getParentOf(e),i,n,r)}function S(e,n,r,i){var a=this;return"boolean"==typeof arguments[1]?(i=arguments[2],r=arguments[1],n=arguments[0],e=null):3===arguments.length&&"function"==typeof arguments[2]?(i=arguments[2],r=!1):2===arguments.length&&"function"==typeof arguments[1]?(i=arguments[1],n=arguments[0],e=null):1===arguments.length&&(n=arguments[0],e=null),a.maintainReferences(e,n),a.getResourceMethod("create",n,e)(n,function(o){n=t.extend("data",n,o),r&&e&&a.maintainReferences(e,n),r?e&&e.$children?(e.$expanded=!0,a.appendItems(e,o),"function"==typeof i&&i(o),"function"==typeof a.onCreate&&a.onCreate(o)):a.load(e,function(n){e&&(e.$expanded=!0);for(var r=0;r<n.length;r++)if(t.deepGet(n[r],a.idKey)===t.deepGet(o,a.idKey)){"function"==typeof i&&i(n[r]),"function"==typeof a.onCreate&&a.onCreate(n[r]);break}}):("function"==typeof i&&i(n),"function"==typeof a.onCreate&&a.onCreate(n))}),a}function E(e,n){return this.getResourceMethod("update",e)(e,function(r){e=t.extend("data",e,r),n&&n(e)}),this}function T(e,n){var r=this.idKey,i={};return i[r]=t.deepGet(e,r),this.getResourceMethod("find",e)(i,function(t){var r=e.$expanded;e=t,r?b(e,function(){n&&n(e)}):n&&n(e)}),this}function D(){}function N(e,t){var n=this;n.getResourceMethod("remove",e)(e,function(){n.maintainReferences(n.getParentOf(e),e,!0);var r=n.getParentOf(e);r?r.$children.splice(r.$children.indexOf(e),1):n.items.splice(n.items.indexOf(e),1),"function"==typeof t&&t()})}function O(e,t){var n=this,r=e.$focused?!0:!1;return n.focusedItem&&n.focusedItem!==e&&(n.focusedItem.$focused=!1),e.$focused=t?!e.$focused:!0,n.focusedItem=t&&r?null:e,"function"==typeof n.onFocus&&n.onFocus(e),n}function M(){return this.focusedItem}function R(e){var t,n,r=this,i=!r.multiSelect,a=e.$selected;if(i){for(t=0;t<r.selectedItems.length;t++)r.selectedItems[t].$selected&&(r.selectedItems[t].$selected=!1);a?r.selectedItems=[]:(e.$selected=!0,r.selectedItems=[e])}else e.$selected?(e.$selected=!1,n=r.selectedItems.indexOf(e),n>=0&&r.selectedItems.splice(n,1)):(e.$selected=!0,r.selectedItems.push(e));"function"==typeof r.onSelect&&r.onSelect(e,e.$selected)}function A(){return this.selectedItems}return n.defaults={},n}]),function(e,t){"use strict";var n,r,i,a=["ng","oc.lazyLoad"],o={},s=[],l=[],u=[],c=[],d=e.noop,p={},f=[],h=e.module("oc.lazyLoad",["ng"]);h.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(n,h,g,m,b,v){function y(t,n,r){var o,s,l,c,h,g;if(n){for(c=[],o=n.length-1;o>=0;o--)if(s=n[o],e.isString(s)||(s=x(s)),s&&-1===f.indexOf(s)&&(!E[s]||-1!==u.indexOf(s))){if(h=-1===a.indexOf(s),l=i(s),h&&(a.push(s),y(t,l.requires,r)),l._runBlocks.length>0)for(p[s]=[];l._runBlocks.length>0;)p[s].push(l._runBlocks.shift());e.isDefined(p[s])&&(h||r.rerun)&&(c=c.concat(p[s])),$(t,l._invokeQueue,s,r.reconfig),$(t,l._configBlocks,s,r.reconfig),d(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",s),n.pop(),f.push(s)}g=t.getInstanceInjector(),e.forEach(c,function(e){g.invoke(e)})}}function w(t,n){function r(t,n){var r,a=!0;return n.length&&(r=i(t),e.forEach(n,function(e){a=a&&i(e)!==r})),a}function i(t){return e.isArray(t)?S(t.toString()):e.isObject(t)?S(C(t)):e.isDefined(t)&&null!==t?S(t.toString()):t}var a,s=t[2][0],l=t[1],u=!1;if(e.isUndefined(o[n])&&(o[n]={}),e.isUndefined(o[n][l])&&(o[n][l]={}),a=function(e,t){o[n][l].hasOwnProperty(e)||(o[n][l][e]=[]),r(t,o[n][l][e])&&(u=!0,o[n][l][e].push(t),d("ocLazyLoad.componentLoaded",[n,l,e]))},e.isString(s))a(s,t[2][1]);else{if(!e.isObject(s))return!1;e.forEach(s,function(t,n){e.isString(t)?a(t,s[1]):a(n,t)})}return u}function $(t,n,r,i){var a,o,l,u,c,d,p,f;if(n)for(a=0,o=n.length;o>a;a++)if(l=n[a],e.isArray(l)){if(null!==t){if(!t.hasOwnProperty(l[0]))throw new Error("unsupported provider "+l[0]);u=t[l[0]]}if(c=w(l,r),"invoke"!==l[1])c&&e.isDefined(u)&&u[l[1]].apply(u,l[2]);else if(d=function(t){var n=s.indexOf(r+"-"+t);(-1===n||i)&&(-1===n&&s.push(r+"-"+t),e.isDefined(u)&&u[l[1]].apply(u,l[2]))},e.isFunction(l[2][0]))d(l[2][0]);else if(e.isArray(l[2][0]))for(p=0,
f=l[2][0].length;f>p;p++)e.isFunction(l[2][0][p])&&d(l[2][0][p])}}function x(t){var n=null;return e.isString(t)?n=t:e.isObject(t)&&t.hasOwnProperty("name")&&e.isString(t.name)&&(n=t.name),n}function k(t){if(!e.isString(t))return!1;try{return i(t)}catch(n){if(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)return!1}}var C,S,E={},T={$controllerProvider:n,$compileProvider:g,$filterProvider:m,$provide:h,$injector:b,$animateProvider:v},D=!1,N=!1,O=[],M={};O.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(t){e.isDefined(t.modules)&&(e.isArray(t.modules)?e.forEach(t.modules,function(e){E[e.name]=e}):E[t.modules.name]=t.modules),e.isDefined(t.debug)&&(D=t.debug),e.isDefined(t.events)&&(N=t.events)},this._init=function(n){var r,i,o,s,u;0===l.length&&(r=[n],i=["ng:app","ng-app","x-ng-app","data-ng-app"],o=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,s=function(e){return e&&r.push(e)},e.forEach(i,function(t){i[t]=!0,s(document.getElementById(t)),t=t.replace(":","\\:"),"undefined"!=typeof n[0]&&n[0].querySelectorAll&&(e.forEach(n[0].querySelectorAll("."+t),s),e.forEach(n[0].querySelectorAll("."+t+"\\:"),s),e.forEach(n[0].querySelectorAll("["+t+"]"),s))}),e.forEach(r,function(t){var r,a;0===l.length&&(r=" "+n.className+" ",a=o.exec(r),a?l.push((a[2]||"").replace(/\s+/g,",")):e.forEach(t.attributes,function(e){0===l.length&&i[e.name]&&l.push(e.value)}))})),0!==l.length||(t.jasmine||t.mocha)&&e.isDefined(e.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad."),u=function d(t){if(-1===a.indexOf(t)){a.push(t);var n=e.module(t);$(null,n._invokeQueue,t),$(null,n._configBlocks,t),e.forEach(n.requires,d)}},e.forEach(l,function(e){u(e)}),l=[],c.pop()},C=function(t){try{return JSON.stringify(t)}catch(n){var r=[];return JSON.stringify(t,function(t,n){if(e.isObject(n)&&null!==n){if(-1!==r.indexOf(n))return;r.push(n)}return n})}},S=function(e){var t,n,r,i=0;if(0==e.length)return i;for(t=0,r=e.length;r>t;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i},this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(t,n,s,u,p){function h(e){var n=p.defer();return t.error(e.message),n.reject(e),n.promise}var g,m=u("ocLazyLoad");return D||(t={},t.error=e.noop,t.warn=e.noop,t.info=e.noop),T.getInstanceInjector=function(){return g?g:g=n.data("$injector")||e.injector()},d=function(e,n){N&&s.$broadcast(e,n),D&&t.info(e,n)},{_broadcast:d,_$log:t,_getFilesCache:function(){return m},toggleWatch:function(e){e?c.push(!0):c.pop()},getModuleConfig:function(t){if(!e.isString(t))throw new Error("You need to give the name of the module to get");return E[t]?e.copy(E[t]):null},setModuleConfig:function(t){if(!e.isObject(t))throw new Error("You need to give the module config object to set");return E[t.name]=t,t},getModules:function(){return a},isLoaded:function(t){var n,r,i=function(e){var t=a.indexOf(e)>-1;return t||(t=!!k(e)),t};if(e.isString(t)&&(t=[t]),e.isArray(t)){for(n=0,r=t.length;r>n;n++)if(!i(t[n]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:x,_getModule:function(e){try{return i(e)}catch(t){throw(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1)&&(t.message='The module "'+C(e)+'" that you are trying to load does not exist. '+t.message),t}},moduleExists:k,_loadDependencies:function(t,n){var r,i,a,o=[],s=this;if(t=s._getModuleName(t),null===t)return p.when();try{r=s._getModule(t)}catch(l){return h(l)}return i=s.getRequires(r),e.forEach(i,function(r){var i,l;if(e.isString(r)){if(i=s.getModuleConfig(r),null===i)return void O.push(r);r=i,i.name=void 0}if(s.moduleExists(r.name))return a=r.files.filter(function(e){return s.getModuleConfig(r.name).files.indexOf(e)<0}),0!==a.length&&s._$log.warn('Module "',t,'" attempted to redefine configuration for dependency. "',r.name,'"\n Additional Files Loaded:',a),e.isDefined(s.filesLoader)?void o.push(s.filesLoader(r,n).then(function(){return s._loadDependencies(r)})):h(new Error("Error: New dependencies need to be loaded from external files ("+r.files+"), but no loader has been defined."));if(e.isArray(r)?(l=[],e.forEach(r,function(e){var t=s.getModuleConfig(e);null===t?l.push(e):t.files&&(l=l.concat(t.files))}),l.length>0&&(r={files:l})):e.isObject(r)&&r.hasOwnProperty("name")&&r.name&&(s.setModuleConfig(r),O.push(r.name)),e.isDefined(r.files)&&0!==r.files.length){if(!e.isDefined(s.filesLoader))return h(new Error('Error: the module "'+r.name+'" is defined in external files ('+r.files+"), but no loader has been defined."));o.push(s.filesLoader(r,n).then(function(){return s._loadDependencies(r)}))}}),p.all(o)},inject:function(t){var n,r,i,a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],s=this,u=p.defer();if(e.isDefined(t)&&null!==t){if(e.isArray(t))return n=[],e.forEach(t,function(e){n.push(s.inject(e,a,o))}),p.all(n);s._addToLoadList(s._getModuleName(t),!0,o)}if(l.length>0)r=l.slice(),(i=function c(e){O.push(e),M[e]=u.promise,s._loadDependencies(e,a).then(function(){try{f=[],y(T,O,a)}catch(e){return s._$log.error(e.message),void u.reject(e)}l.length>0?c(l.shift()):u.resolve(r)},function(e){u.reject(e)})})(l.shift());else{if(a&&a.name&&M[a.name])return M[a.name];u.resolve()}return u.promise},getRequires:function(t){var n=[];return e.forEach(t.requires,function(e){-1===a.indexOf(e)&&n.push(e)}),n},_invokeQueue:$,_registerInvokeList:w,_register:y,_addToLoadList:r,_unregister:function(t){e.isDefined(t)&&e.isArray(t)&&e.forEach(t,function(e){o[e]=void 0})}}}],this._init(e.element(t.document))}]),n=e.bootstrap,e.bootstrap=function(t,i,a){return e.forEach(i.slice(),function(e){r(e,!0,!0)}),n(t,i,a)},r=function(t,n,r){(c.length>0||n)&&e.isString(t)&&-1===l.indexOf(t)&&(l.push(t),r&&u.push(t))},i=e.module,e.module=function(e,t,n){return r(e,!1,!0),i(e,t,n)},"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(t,n,r,i){return{restrict:"A",terminal:!0,priority:1e3,compile:function(a){var o=a[0].innerHTML;return a.html(""),function(a,s,l){var u=i(l.ocLazyLoad);a.$watch(function(){return u(a)||l.ocLazyLoad},function(i){e.isDefined(i)&&t.load(i).then(function(){r.enter(o,s),n(s.contents())(a)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(t,n,r,i){var a=!1,o=!1,s=r.document.getElementsByTagName("head")[0]||r.document.getElementsByTagName("body")[0];return t.buildElement=function(l,u,c){var d,p,f,h,g,m,b,v,y,w,$,x=n.defer(),k=t._getFilesCache(),C=function(e){var t=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+t:e+"&_dc="+t:e+"?_dc="+t};switch(e.isUndefined(k.get(u))&&k.put(u,x.promise),l){case"css":d=r.document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=c.cache===!1?C(u):u;break;case"js":d=r.document.createElement("script"),d.src=c.cache===!1?C(u):u;break;default:k.remove(u),x.reject(new Error('Requested type "'+l+'" is not known. Could not inject "'+u+'"'))}return d.onload=d.onreadystatechange=function(){d.readyState&&!/^c|loade/.test(d.readyState)||p||(d.onload=d.onreadystatechange=null,p=1,t._broadcast("ocLazyLoad.fileLoaded",u),x.resolve())},d.onerror=function(){k.remove(u),x.reject(new Error("Unable to load "+u))},d.async=c.serie?0:1,f=s.lastChild,c.insertBefore&&(h=e.element(e.isDefined(window.jQuery)?c.insertBefore:document.querySelector(c.insertBefore)),h&&h.length>0&&(f=h[0])),f.parentNode.insertBefore(d,f),"css"==l&&(a||(g=r.navigator.userAgent.toLowerCase(),/iP(hone|od|ad)/.test(r.navigator.platform)?(m=r.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),b=parseFloat([parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3]||0,10)].join(".")),o=6>b):g.indexOf("android")>-1?(v=parseFloat(g.slice(g.indexOf("android")+8)),o=4.4>v):g.indexOf("safari")>-1&&(y=g.match(/version\/([\.\d]+)/i),o=y&&y[1]&&parseFloat(y[1])<6)),o&&(w=1e3,$=i(function(){try{d.sheet.cssRules,i.cancel($),d.onload()}catch(e){--w<=0&&d.onerror()}},20))),x.promise},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.filesLoader=function(r){var i,a,o,s,l,u,c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=[],p=[],f=[],h=[],g=null,m=t._getFilesCache();return t.toggleWatch(!0),e.extend(c,r),i=function(n){var r,i=null;if(e.isObject(n)&&(i=n.type,n=n.path),g=m.get(n),e.isUndefined(g)||c.cache===!1){if(null!==(r=/^(css|less|html|htm|js)?(?=!)/.exec(n))&&(i=r[1],n=n.substr(r[1].length+1,n.length)),!i)if(null!==(r=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(n)))i=r[1];else{if(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!t.jsLoader.hasOwnProperty("requirejs"))return void t._$log.error("File type could not be determined. "+n);i="js"}"css"!==i&&"less"!==i||-1!==d.indexOf(n)?"html"!==i&&"htm"!==i||-1!==p.indexOf(n)?"js"===i||-1===f.indexOf(n)?f.push(n):t._$log.error("File type is not valid. "+n):p.push(n):d.push(n)}else g&&h.push(g)},c.serie?i(c.files.shift()):e.forEach(c.files,function(e){i(e)}),d.length>0&&(a=n.defer(),t.cssLoader(d,function(n){e.isDefined(n)&&t.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),a.reject(n)):a.resolve()},c),h.push(a.promise)),p.length>0&&(o=n.defer(),t.templatesLoader(p,function(n){e.isDefined(n)&&t.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),o.reject(n)):o.resolve()},c),h.push(o.promise)),f.length>0&&(s=n.defer(),t.jsLoader(f,function(n){e.isDefined(n)&&(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||t.jsLoader.hasOwnProperty("requirejs"))?(t._$log.error(n),s.reject(n)):s.resolve()},c),h.push(s.promise)),0===h.length?(l=n.defer(),u="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.",t._$log.error(u),l.reject(u),l.promise):c.serie&&c.files.length>0?n.all(h).then(function(){return t.filesLoader(r,c)}):n.all(h)["finally"](function(e){return t.toggleWatch(!1),e})},t.load=function(r){var i,a,o,s=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=this,u=null,c=[],d=n.defer(),p=e.copy(r),f=e.copy(s);return e.isArray(p)?(e.forEach(p,function(e){c.push(l.load(e,f))}),n.all(c).then(function(e){d.resolve(e)},function(e){d.reject(e)}),d.promise):(e.isString(p)?(u=l.getModuleConfig(p),u||(u={files:[p]})):e.isObject(p)&&(u=e.isDefined(p.path)&&e.isDefined(p.type)?{files:[p]}:l.setModuleConfig(p)),null===u?(a=l._getModuleName(p),i='Module "'+(a||"unknown")+'" is not configured, cannot load.',t._$log.error(i),d.reject(new Error(i)),d.promise):(e.isDefined(u.template)&&(e.isUndefined(u.files)&&(u.files=[]),e.isString(u.template)?u.files.push(u.template):e.isArray(u.template)&&u.files.concat(u.template)),o=e.extend({},f,u),e.isUndefined(u.files)&&e.isDefined(u.name)&&t.moduleExists(u.name)?t.inject(u.name,o,!0):(t.filesLoader(u,o).then(function(){t.inject(null,o).then(function(e){d.resolve(e)},function(e){d.reject(e)})},function(e){d.reject(e)}),d.promise)))},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.cssLoader=function(r,i,a){var o=[];e.forEach(r,function(e){o.push(t.buildElement("css",e,a))}),n.all(o).then(function(){i()},function(e){i(e)})},t.cssLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.jsLoader=function(r,i,a){var o=[];e.forEach(r,function(e){o.push(t.buildElement("js",e,a))}),n.all(o).then(function(){i()},function(e){i(e)})},t.jsLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(t,n,r,i){return t.templatesLoader=function(a,o,s){var l=[],u=t._getFilesCache();return e.forEach(a,function(t){var a=r.defer();l.push(a.promise),i.get(t,s).success(function(r){e.isString(r)&&r.length>0&&e.forEach(e.element(r),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&n.put(e.id,e.innerHTML)}),e.isUndefined(u.get(t))&&u.put(t,!0),a.resolve()}).error(function(e){a.reject(new Error('Unable to load template file "'+t+'": '+e))})}),r.all(l).then(function(){o()},function(e){o(e)})},t.templatesLoader.ocLazyLoadLoader=!0,t}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,r,i,a;if(null==this)throw new TypeError('"this" is null or not defined');if(r=Object(this),i=r.length>>>0,0===i)return-1;if(a=+t||0,Math.abs(a)===1/0&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);i>n;){if(n in r&&r[n]===e)return n;n++}return-1}),angular.module("textAngular.ext",["textAngularSetup","neModals"]).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["undo","redo"],["h1","h2","h3","h4","h5","h6","p","pre","quote","table"],["bold","italics","underline","strikeThrough","ul","ol"],["color","bgColor","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group btn-group-xs",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(){return!1}}).run(["$templateCache",function(e){e.put("textAngular/insert-link-modal.html",'<div>    <div>        <input type="text" class="form-control" ng-model="modal.link" placeholder="http://" />    </div>    <div class="text-right margin-top-lg">        <button class="btn btn-default" ng-click="modal.close()">{{::\'Cancel\'|translate}}</button>        <button class="btn btn-mini btn-primary" ng-disabled="!modal.link" ng-click="modal.insertLink(modal.link);modal.close()">{{::\'Insert\'|translate}}</button>    </div></div>'),e.put("textAngular/insert-table-modal.html",'<div>    <div>        <label>{{::\'Columns\'|translate}}</label><br>        <input type="number" class="form-control" ng-model="modal.cols"><br>                <label>{{::\'Rows\'|translate}}</label><br>        <input type="number" class="form-control" ng-model="modal.rows">    </div>    <div class="text-right margin-top-lg">        <button class="btn btn-default btn-mini" ng-click="modal.close()">{{::\'Cancel\'|translate}}</button>        <button class="btn btn-mini btn-primary" ng-click="modal.insertTable(modal.cols || 2, modal.rows || 2);modal.close()">{{::\'Insert\'|translate}}</button>    </div></div>'),e.put("textAngular/change-color-dropdown.html",'<div class="btn-group" style="float:left;" uib-dropdown>    <button class="btn btn-default btn-xs" uib-dropdown-toggle ng-click="storeSelection()" ng-disabled="isDisabled()">        <i class="fa {{icon}}"></i><i class="fa fa-caret-down"></i>    </button>    <ul class="dropdown-menu">        <li ng-repeat="c in colors" style="float:left;float:left;margin:2px;">            <a href="" style="border:1px solid black;display:block;width:15px;height:15px;padding:0px;background-color:{{c}}"               ng-click="setColor(c)">&nbsp;</a>        </li>    </ul></div>')}]).run(["$templateCache","$window","taRegisterTool","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions","taTools","neModals",function(e,t,n,r,i,a,o,s,l,u){function c(e,t){var n,r,i;if(t>0&&e>0){for(n="<table><thead><tr>",r=0;e>r;r++)n+="<th>col"+(r+1)+"</th>";for(n+="</tr></thead><tbody>",i=0;t>i;i++){for(n+="<tr>",r=0;e>r;r++)n+="<td>row"+(i+1)+"</td>";n+="</tr>"}return n+="</tbody></table>"}}l.clear.iconclass="fa fa-eraser",l.clear.action=function(){this.$editor().wrapSelection("removeFormat",null)},l.insertLink.action=function(e,t){var n=this;return u.create({id:"textAngular.insertLink",title:"Insert Link",templateUrl:"textAngular/insert-link-modal.html",removeOnClose:!0,link:"http://",onClose:function(){this.inserted||(t(),e.resolve())},insertLink:function(r){this.inserted=!0,t(),r&&""!==r&&"http://"!==r&&n.$editor().wrapSelection("createLink",r,!0),e.resolve()}}),!1},l.insertImage.action=function(e,t){var n=this;return u.create({id:"textAngular.insertImage",title:"Insert Image",templateUrl:"textAngular/insert-link-modal.html",removeOnClose:!0,link:"http://",onClose:function(){this.inserted||(t(),e.resolve())},insertLink:function(r){this.inserted=!0,t(),r&&""!==r&&"http://"!==r&&n.$editor().wrapSelection("insertImage",r,!0),e.resolve()}}),!1},l.insertVideo.action=function(e,t){return u.create({id:"textAngular.insertVideo",title:"Insert Youtube Video",templateUrl:"textAngular/insert-link-modal.html",removeOnClose:!0,link:"https://",onClose:function(){this.inserted||(t(),e.resolve())},insertLink:function(n){var r,i,o;this.inserted=!0,t(),n&&""!==n&&"https://"!==n&&(r=a.extractYoutubeVideoId(n),r&&(i="https://www.youtube.com/embed/"+r,o='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+r+'/hqdefault.jpg" ta-insert-video="'+i+'" contenteditable="false" allowfullscreen="true" frameborder="0" />',ta.$editor().wrapSelection("insertHTML",o,!0))),e.resolve()}}),!1},l.insertLink.onElementSelect.action=function(e,t,n){var i,a,o,s,l,c;e.preventDefault(),n.displayElements.popover.css("width","436px"),i=n.displayElements.popoverContainer,i.empty(),i.css("line-height","28px"),a=angular.element('<a href="'+t.attr("href")+'" target="_blank">'+t.attr("href")+'&nbsp;<i class="fa fa-mail-forward"></i></a>'),a.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),i.append(a),o=angular.element('<div class="btn-group pull-right">'),s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+r.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>'),s.on("click",function(e){e.preventDefault(),u.create({id:"textAngular.insertLink",title:"Insert Link",templateUrl:"textAngular/insert-link-modal.html",removeOnClose:!0,link:t.attr("href"),insertLink:function(e){e&&""!==e&&"http://"!==e&&(t.attr("href",e),n.updateTaBindtaTextElement()),n.hidePopover()}})}),o.append(s),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on"><i class="fa fa-external-link"></i></button>'),"_blank"===t.attr("target")&&l.addClass("active"),l.on("click",function(e){e.preventDefault(),t.attr("target","_blank"===t.attr("target")?"":"_blank"),l.toggleClass("active"),n.updateTaBindtaTextElement()}),o.append(l),c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+r.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>'),c.on("click",function(e){e.preventDefault(),t.replaceWith(t.contents()),n.updateTaBindtaTextElement(),n.hidePopover()}),o.append(c),i.append(o),n.showPopover(t)},n("table",{iconclass:"fa fa-table",tooltiptext:"Table",action:function(e,t){var n=this;return u.create({id:"textAngular.insertTable",title:"Insert Table",templateUrl:"textAngular/insert-table-modal.html",removeOnClose:!0,cols:2,rows:2,onClose:function(){console.warn("inserted",this.inserted),this.inserted||(t(),e.resolve())},insertTable:function(r,i){if(this.inserted=!0,t(),r>0&&i>0){var a=c(r,i);n.$editor().wrapSelection("insertHTML",a,!0)}e.resolve()}}),!1}});var d=["#ffffff","#ffccc9","#ffce93","#fffc9e","#ffffc7","#9aff99","#96fffb","#cdffff","#cbcefb","#cfcfcf","#fd6864","#fe996b","#fffe65","#fcff2f","#67fd9a","#38fff8","#68fdff","#9698ed","#c0c0c0","#fe0000","#f8a102","#ffcc67","#f8ff00","#34ff34","#68cbd0","#34cdf9","#6665cd","#9b9b9b","#cb0000","#f56b00","#ffcb2f","#ffc702","#32cb00","#00d2cb","#3166ff","#6434fc","#656565","#9a0000","#ce6301","#cd9934","#999903","#009901","#329a9d","#3531ff","#6200c9","#343434","#680100","#963400","#986536","#646809","#036400","#34696d","#00009b","#303498","#000000","#330001","#643403","#663234","#343300","#013300","#003532","#010066","#340096"];n("color",{display:e.get("textAngular/change-color-dropdown.html"),"class":" ",icon:"fa-font",colors:d,storeSelection:function(){this.selection=t.rangy.saveSelection()},setColor:function(e){t.rangy.restoreSelection(this.selection),this.$editor().wrapSelection("foreColor",e)},action:function(){return!0}}),n("bgColor",{display:e.get("textAngular/change-color-dropdown.html"),"class":" ",icon:"fa-magic",colors:d,storeSelection:function(){this.selection=t.rangy.saveSelection()},setColor:function(e){t.rangy.restoreSelection(this.selection),this.$editor().wrapSelection("backColor",e)},action:function(){return!0}})}]),!function(e,t){t["true"]=e,function(t,n){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t():n.rangy=t()}(function(){function e(e,t){var n=typeof e[t];return n==E||!(n!=S||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=S||!e[t])}function n(e,t){return typeof e[t]!=T}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&R(e,M)&&_(e,O)}function a(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function o(t){typeof console!=T&&e(console,"log")&&console.log(t)}function s(e,t){I&&t?alert(e):o(e)}function l(e){H.initialized=!0,H.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,H.config.alertOnFail)}function u(e){s("Rangy warning: "+e,H.config.alertOnWarn)}function c(e){return e.message||e.description||String(e)}function d(){var t,n,r,s,u,d,p,f,h;if(I&&!H.initialized){if(n=!1,r=!1,e(document,"createRange")&&(t=document.createRange(),R(t,N)&&_(t,D)&&(n=!0)),s=a(document),!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),i(t)&&(r=!0)),!n&&!r)return void l("Neither Range nor TextRange are available");H.initialized=!0,H.features={implementsDomRange:n,implementsTextRange:r};for(p in P)(u=P[p])instanceof g&&u.init(u,H);for(f=0,h=$.length;h>f;++f)try{$[f](H)}catch(m){d="Rangy init listener threw an exception. Continuing. Detail: "+c(m),o(d)}}}function p(e,t,n){n&&(e+=" in module "+n.name),H.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function f(e,t,n,r){e[t]=function(){return p(t,n,r),e[n].apply(e,q.toArray(arguments))}}function h(e){e=e||window,d();for(var t=0,n=x.length;n>t;++t)x[t](e)}function g(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n){var r=new g(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(H,t),t.supported=!0}catch(r){var i="Module '"+e+"' failed to load: "+c(r);o(i),r.stack&&o(r.stack)}}});return P[e]=r,r}function b(){}function v(){}var y,w,$,x,k,C,S="object",E="function",T="undefined",D=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],N=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],O=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],M=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],R=r(e),A=r(t),_=r(n),L=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;r>n;++n)t(e[n],n)},P={},I=typeof window!=T&&typeof document!=T,q={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:R,areHostObjects:A,areHostProperties:_,isTextRange:i,getBody:a,forEach:L},H={version:"1.3.0",initialized:!1,isBrowser:I,supported:!0,util:q,features:{},modules:P,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==T?!0:rangyAutoInitialize}};return H.fail=l,H.warn=u,{}.hasOwnProperty?(q.extend=y=function(e,t,n){var r,i,a;for(a in t)t.hasOwnProperty(a)&&(r=e[a],i=t[a],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&y(r,i,!0),e[a]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},q.createOptions=function(e,t){var n={};return y(n,t),e&&y(n,e),n}):l("hasOwnProperty not supported"),I||l("Rangy can only run in a browser"),function(){var e,t,n;if(I){t=document.createElement("div"),t.appendChild(document.createElement("span")),n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(r){}}e||(e=function(e){for(var t=[],n=0,r=e.length;r>n;++n)t[n]=e[n];return t}),q.toArray=e}(),I&&(e(document,"addEventListener")?w=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?w=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),q.addListener=w),$=[],q.deprecationNotice=p,q.createAliasForDeprecatedMethod=f,H.init=d,H.addInitListener=function(e){H.initialized?e(H):$.push(e)},x=[],H.addShimListener=function(e){x.push(e)},I&&(H.shim=H.createMissingNativeApi=h,f(H,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;i>r;++r){if(t=n[r],e=P[t],!(e&&e instanceof g))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){H.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){H.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},H.createModule=function(e){var t,n,r;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]),r=m(e,n,t),H.initialized&&H.supported&&r.init()},H.createCoreModule=function(e,t,n){m(e,t,n)},H.RangePrototype=b,H.rangePrototype=new b,H.selectionPrototype=new v,H.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==P||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function i(e){for(var t=0;e=e.previousSibling;)++t;return t}function a(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function o(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(A(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t){return s(e,t,!0)}function u(e,t,n){for(var r,i=n?e:e.parentNode;i;){if(r=i.parentNode,r===t)return i;i=r}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function p(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function f(e,t,n){var r,a,o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),p(o,e),n)for(a=0;r=n[a++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>i(e)&&++r.offset;return o}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=P)return e.ownerDocument;if(typeof e.document!=P)return e.document;if(e.parentNode)return h(e.parentNode);throw t.createError("getDocument: no document found for node")}function g(e){var n=h(e);if(typeof n.defaultView!=P)return n.defaultView;if(typeof n.parentWindow!=P)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=P)return e.contentDocument;if(typeof e.contentWindow!=P)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function b(e){if(typeof e.contentWindow!=P)return e.contentWindow;if(typeof e.contentDocument!=P)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function v(e){return e&&I.isHostMethod(e,"setTimeout")&&I.isHostObject(e,"document")}function y(e,t,n){var r;if(e?I.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):h(e):v(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function w(e){for(var t;t=e.parentNode;)e=t;return e}function $(e,n,r,a){var s,l,c,d,p;if(e==r)return n===a?0:a>n?-1:1;if(s=u(r,e,!0))return n<=i(s)?-1:1;if(s=u(e,r,!0))return i(s)<a?-1:1;if(l=o(e,r),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(c=e===l?l:u(e,l,!0),d=r===l?l:u(r,l,!0),c===d)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(p=l.firstChild;p;){if(p===c)return-1;if(p===d)return 1;p=p.nextSibling}}function x(e){var t;try{return t=e.parentNode,!1}catch(n){return!0}}function k(e){if(!e)return"[No node]";if(_&&x(e))return"[Broken node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+i(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function C(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function S(e,t,n){var r,i=q(e),a=e.createElement("div");return a.contentEditable=""+!!n,t&&(a.innerHTML=t),r=i.firstChild,r?i.insertBefore(a,r):i.appendChild(a),a}function E(e){return e.parentNode.removeChild(e)}function T(e){this.root=e,this._next=e}function D(e){return new T(e)}function N(e,t){this.node=e,this.offset=t}function O(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var M,R,A,_,L,P="undefined",I=e.util,q=I.getBody;I.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),I.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method"),M=document.createElement("div"),I.areHostMethods(M,["insertBefore","appendChild","cloneNode"]||!I.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),I.isHostProperty(M,"innerHTML")||t.fail("Element is missing innerHTML property"),R=document.createTextNode("test"),I.areHostMethods(R,["splitText","deleteData","insertData","appendData","cloneNode"]||!I.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"])||!I.areHostProperties(R,["data"]))||t.fail("Incomplete Text Node implementation"),A=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},_=!1,!function(){var t,n=document.createElement("b");n.innerHTML="1",t=n.firstChild,n.innerHTML="<br />",_=x(t),e.features.crashyTextNodes=_}(),typeof window.getComputedStyle!=P?L=function(e,t){return g(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=P?L=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),T.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null;

}},N.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+k(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},O.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},O.prototype.toString=function(){return this.message},e.dom={arrayContains:A,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:a,getCommonAncestor:o,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:u,isCharacterDataNode:c,isTextOrCommentNode:d,insertAfter:p,splitDataNode:f,getDocument:h,getWindow:g,getIframeWindow:b,getIframeDocument:m,getBody:q,isWindow:v,getContentDocument:y,getRootContainer:w,comparePoints:$,isBrokenNode:x,inspectNode:k,getComputedStyleProperty:L,createTestElement:S,removeNode:E,fragmentFromNodeChildren:C,createIterator:D,DomPosition:N},e.DOMException=O}),H.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(oe(e,t.startContainer)||oe(e,t.endContainer))}function n(e){return e.document||se(e.startContainer)}function r(e){return fe(e.startContainer)}function i(e){return new ne(e.parentNode,ae(e))}function a(e){return new ne(e.parentNode,ae(e)+1)}function o(e,t,n){var r=11==e.nodeType?e.firstChild:e;return ie(t)?n==t.length?ee.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:ue(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function s(e,t,r){if(C(e),C(t),n(t)!=n(e))throw new re("WRONG_DOCUMENT_ERR");var i=le(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=le(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return r?0>=i&&a>=0:0>i&&a>0}function l(e){for(var t,r,i,a=n(e.range).createDocumentFragment();r=e.next();){if(t=e.isPartiallySelectedSubtree(),r=r.cloneNode(!t),t&&(i=e.getSubtreeIterator(),r.appendChild(l(i)),i.detach()),10==r.nodeType)throw new re("HIERARCHY_REQUEST_ERR");a.appendChild(r)}return a}function u(e,t,n){var r,i,a,o;for(n=n||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(t(a)===!1)return void(n.stop=!0);if(o=e.getSubtreeIterator(),u(o,t,n),o.detach(),n.stop)return}else for(r=ee.createIterator(a);i=r.next();)if(t(i)===!1)return void(n.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach()):e.remove()}function d(e){for(var t,r,i=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(d(r)),r.detach()):e.remove(),10==t.nodeType)throw new re("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function p(e,t,n){var r,i,a=!(!t||!t.length),o=!!n;return a&&(r=new RegExp("^("+t.join("|")+")$")),i=[],u(new h(e,!1),function(t){var s,l;a&&!r.test(t.nodeType)||o&&!n(t)||(s=e.startContainer,t==s&&ie(s)&&e.startOffset==s.length||(l=e.endContainer,t==l&&ie(l)&&0==e.endOffset||i.push(t)))}),i}function f(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+ee.inspectNode(e.startContainer)+":"+e.startOffset+", "+ee.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function h(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&ie(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||ie(this.sc)?ce(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||ie(this.ec)?ce(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function g(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,pe(e,r))return i;i=i.parentNode}return null}}function m(e,t){if(F(e,t))throw new re("INVALID_NODE_TYPE_ERR")}function b(e,t){if(!pe(t,e.nodeType))throw new re("INVALID_NODE_TYPE_ERR")}function v(e,t){if(0>t||t>(ie(e)?e.length:e.childNodes.length))throw new re("INDEX_SIZE_ERR")}function y(e,t){if(H(e,!0)!==H(t,!0))throw new re("WRONG_DOCUMENT_ERR")}function w(e){if(B(e,!0))throw new re("NO_MODIFICATION_ALLOWED_ERR")}function $(e,t){if(!e)throw new re(t)}function x(e,t){return t<=(ie(e)?e.length:e.childNodes.length)}function k(e){return!!e.startContainer&&!!e.endContainer&&!(he&&(ee.isBrokenNode(e.startContainer)||ee.isBrokenNode(e.endContainer)))&&fe(e.startContainer)==fe(e.endContainer)&&x(e.startContainer,e.startOffset)&&x(e.endContainer,e.endOffset)}function C(e){if(!k(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function S(e,t){C(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,o=n===i;ie(i)&&a>0&&a<i.length&&ue(i,a,t),ie(n)&&r>0&&r<n.length&&(n=ue(n,r,t),o?(a-=r,i=n):i==n.parentNode&&a>=ae(n)&&a++,r=0),e.setStartAndEnd(n,r,i,a)}function E(e){C(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function T(e){e.START_TO_START=V,e.START_TO_END=W,e.END_TO_END=Q,e.END_TO_START=G,e.NODE_BEFORE=Y,e.NODE_AFTER=X,e.NODE_BEFORE_AND_AFTER=Z,e.NODE_INSIDE=J}function D(e){T(e),T(e.prototype)}function N(e,t){return function(){var n,r,i,o,s,l,c;return C(this),i=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,l=new h(this,!0),i!==s&&(n=ce(i,s,!0),r=a(n),i=r.node,o=r.offset),u(l,w),l.reset(),c=e(l),l.detach(),t(this,i,o,i,o),c}}function O(n,r){function o(e,t){return function(n){b(n,_),b(fe(n),L);var r=(e?i:a)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var i=e.endContainer,a=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((fe(t)!=fe(i)||1==le(t,n,i,a))&&(i=t,a=n),r(e,t,n,i,a))}function l(e,t,n){var i=e.startContainer,a=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((fe(t)!=fe(i)||-1==le(t,n,i,a))&&(i=t,a=n),r(e,i,a,t,n))}var u=function(){};u.prototype=e.rangePrototype,n.prototype=new u,te.extend(n.prototype,{setStart:function(e,t){m(e,!0),v(e,t),s(this,e,t)},setEnd:function(e,t){m(e,!0),v(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,a=n;switch(e.length){case 3:a=e[2];break;case 4:i=e[2],a=e[3]}r(this,t,n,i,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){C(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){m(e,!0),r(this,e,0,e,de(e))},selectNode:function(e){m(e,!1),b(e,_);var t=i(e),n=a(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:N(d,r),deleteContents:N(c,r),canSurroundContents:function(){C(this),w(this.startContainer),w(this.endContainer);var e=new h(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},splitBoundaries:function(){S(this)},splitBoundariesPreservingPositions:function(e){S(this,e)},normalizeBoundaries:function(){var e,t,n,i,a,o,s,l,u,c;C(this),t=this.startContainer,n=this.startOffset,i=this.endContainer,a=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,a=e.length,e.appendData(t.data),ge(t))},s=function(e){var r,o,s=e.previousSibling;s&&s.nodeType==e.nodeType&&(t=e,r=e.length,n=s.length,e.insertData(0,s.data),ge(s),t==i?(a+=n,i=t):i==e.parentNode&&(o=ae(e),a==o?(i=e,a=r):a>o&&a--))},l=!0,ie(i)?a==i.length?o(i):0==a&&(e=i.previousSibling,e&&e.nodeType==i.nodeType&&(a=e.length,t==i&&(l=!1),e.appendData(i.data),ge(i),i=e)):(a>0&&(u=i.childNodes[a-1],u&&ie(u)&&o(u)),l=!this.collapsed),l?ie(t)?0==n?s(t):n==t.length&&(e=t.nextSibling,e&&e.nodeType==t.nodeType&&(i==e&&(i=t,a+=t.length),t.appendData(e.data),ge(e))):n<t.childNodes.length&&(c=t.childNodes[n],c&&ie(c)&&s(c)):(t=i,n=a),r(this,t,n,i,a)},collapseToPoint:function(e,t){m(e,!0),v(e,t),this.setStartAndEnd(e,t)}}),D(n)}function M(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:ee.getCommonAncestor(e.startContainer,e.endContainer)}function R(e,t,n,r,i){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,e.document=ee.getDocument(t),M(e)}function A(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,M(this)}var _,L,P,I,q,H,B,F,j,U,z,K,V,W,Q,G,Y,X,Z,J,ee=e.dom,te=e.util,ne=ee.DomPosition,re=e.DOMException,ie=ee.isCharacterDataNode,ae=ee.getNodeIndex,oe=ee.isOrIsAncestorOf,se=ee.getDocument,le=ee.comparePoints,ue=ee.splitDataNode,ce=ee.getClosestAncestorIn,de=ee.getNodeLength,pe=ee.arrayContains,fe=ee.getRootContainer,he=e.features.crashyTextNodes,ge=ee.removeNode;h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,ie(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!ie(n)||n!==this.sc&&n!==this.ec?n.parentNode&&ge(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e,t,r,i,a,o;return this.isSingleCharacterDataNode?(e=this.range.cloneRange(),e.collapse(!1)):(e=new A(n(this.range)),t=this._current,r=t,i=0,a=t,o=de(t),oe(t,this.sc)&&(r=this.sc,i=this.so),oe(t,this.ec)&&(a=this.ec,o=this.eo),R(e,r,i,a,o)),new h(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},_=[1,3,4,5,7,8,10],L=[2,9,11],P=[5,6,10,12],I=[1,3,4,5,7,8,10,11],q=[1,3,4,5,7,8],H=g([9,11]),B=g(P),F=g([6,10,12]),j=document.createElement("style"),U=!1;try{j.innerHTML="<b>x</b>",U=3==j.firstChild.nodeType}catch(me){}e.features.htmlParsingConforms=U,z=U?function(e){var t,n=this.startContainer,r=se(n);if(!n)throw new re("INVALID_STATE_ERR");return t=null,1==n.nodeType?t=n:ie(n)&&(t=ee.parentElement(n)),t=null===t||"HTML"==t.nodeName&&ee.isHtmlNamespace(se(t).documentElement)&&ee.isHtmlNamespace(t)?r.createElement("body"):t.cloneNode(!1),t.innerHTML=e,ee.fragmentFromNodeChildren(t)}:function(e){var t=n(this),r=t.createElement("body");return r.innerHTML=e,ee.fragmentFromNodeChildren(r)},K=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],V=0,W=1,Q=2,G=3,Y=0,X=1,Z=2,J=3,te.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){C(this),y(this.startContainer,t.startContainer);var n,r,i,a,o=e==G||e==V?"start":"end",s=e==W||e==V?"start":"end";return n=this[o+"Container"],r=this[o+"Offset"],i=t[s+"Container"],a=t[s+"Offset"],le(n,r,i,a)},insertNode:function(e){if(C(this),b(e,I),w(this.startContainer),oe(e,this.startContainer))throw new re("HIERARCHY_REQUEST_ERR");var t=o(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t,r;return C(this),this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&ie(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(r=new h(this,!0),e=l(r),r.detach(),e)},canSurroundContents:function(){C(this),w(this.startContainer),w(this.endContainer);var e=new h(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(b(e,q),!this.canSurroundContents())throw new re("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){C(this);for(var e,t=new A(n(this)),r=K.length;r--;)e=K[r],t[e]=this[e];return t},toString:function(){var e,t,n;return C(this),e=this.startContainer,e===this.endContainer&&ie(e)?3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"":(t=[],n=new h(this,!0),u(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join(""))},compareNode:function(e){var t,n,r,i;if(C(this),t=e.parentNode,n=ae(e),!t)throw new re("NOT_FOUND_ERR");return r=this.comparePoint(t,n),i=this.comparePoint(t,n+1),0>r?i>0?Z:Y:i>0?X:J},comparePoint:function(e,t){return C(this),$(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)<0?-1:le(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:z,toHtml:function(){return E(this)},intersectsNode:function(e,t){var n,i,a,o;return C(this),fe(e)!=r(this)?!1:(n=e.parentNode,i=ae(e),n?(a=le(n,i,this.endContainer,this.endOffset),o=le(n,i+1,this.startContainer,this.startOffset),t?0>=a&&o>=0:0>a&&o>0):!0)},isPointInRange:function(e,t){return C(this),$(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)>=0&&le(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return s(this,e,!1)},intersectsOrTouchesRange:function(e){return s(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=le(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=le(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==le(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==le(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new re("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==J},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,de(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t,n,r=this.cloneRange();return r.selectNode(e),t=r.getNodes([3]),t.length>0?(r.setStart(t[0],0),n=t.pop(),r.setEnd(n,n.length),this.containsRange(r)):this.containsNodeContents(e)},getNodes:function(e,t){return C(this),p(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r,i,a,o=n(this),s=e.createRange(o);return t=t||ee.getBody(o),s.selectNodeContents(t),r=this.intersection(s),i=0,a=0,r&&(s.setEnd(r.startContainer,r.startOffset),i=s.toString().length,a=i+r.toString().length),{start:i,end:a,containerNode:t}},moveToBookmark:function(e){var t,n,r,i,a,o,s,l=e.containerNode,u=0;for(this.setStart(l,0),this.collapse(!0),a=[l],o=!1,s=!1;!s&&(t=a.pop());)if(3==t.nodeType)n=u+t.length,!o&&e.start>=u&&e.start<=n&&(this.setStart(t,e.start-u),o=!0),o&&e.end>=u&&e.end<=n&&(this.setEnd(t,e.end-u),s=!0),u=n;else for(i=t.childNodes,r=i.length;r--;)a.push(i[r])},getName:function(){return"DomRange"},equals:function(e){return A.rangesEqual(this,e)},isValid:function(){return k(this)},inspect:function(){return f(this)},detach:function(){}}),O(A,R),te.extend(A,{rangeProperties:K,RangeIterator:h,copyComparisonConstants:D,createPrototypeRange:O,inspect:f,toHtml:E,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=A}),H.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,i,a,o,s,l,u,c=e.dom,d=e.util,p=c.DomPosition,f=e.DomRange,h=c.getBody,g=c.getContentDocument,m=c.isCharacterDataNode;e.features.implementsDomRange&&!function(){function r(e){for(var t,n=v.length;n--;)t=v[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function i(e,t,n,r,i){var a=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(a||o||s)&&(e.setEnd(r,i),e.setStart(t,n))}var a,o,s,l,u,p,m,b,v=f.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},f.createPrototypeRange(n,i),a=n.prototype,a.selectNode=function(e){this.nativeRange.selectNode(e),r(this)},a.cloneContents=function(){return this.nativeRange.cloneContents()},a.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},a.collapse=function(e){this.nativeRange.collapse(e),r(this)},a.cloneRange=function(){return new n(this.nativeRange.cloneRange())},a.refresh=function(){r(this)},a.toString=function(){return this.nativeRange.toString()},s=document.createTextNode("test"),h(document).appendChild(s),l=document.createRange(),l.setStart(s,0),l.setEnd(s,0);try{l.setStart(s,1),a.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},a.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},o=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(y){a.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},a.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},o=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}a.setStartBefore=o("setStartBefore","setEndBefore"),a.setStartAfter=o("setStartAfter","setEndAfter"),a.setEndBefore=o("setEndBefore","setStartBefore"),a.setEndAfter=o("setEndAfter","setStartAfter"),a.selectNodeContents=function(e){this.setStartAndEnd(e,0,c.getNodeLength(e))},l.selectNodeContents(s),l.setEnd(s,3),u=document.createRange(),u.selectNodeContents(s),u.setEnd(s,4),u.setStart(s,2),a.compareBoundaryPoints=-1==l.compareBoundaryPoints(l.START_TO_END,u)&&1==l.compareBoundaryPoints(l.END_TO_START,u)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},p=document.createElement("div"),p.innerHTML="123",m=p.firstChild,b=h(document),b.appendChild(p),l.setStart(m,1),l.setEnd(m,2),l.deleteContents(),"13"==m.data&&(a.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},a.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),b.removeChild(p),b=null,d.isHostMethod(l,"createContextualFragment")&&(a.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),h(document).removeChild(s),a.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=g(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange&&(i=function(e){var t,n,r,i=e.parentElement(),a=e.duplicate();return a.collapse(!0),t=a.parentElement(),a=e.duplicate(),a.collapse(!1),n=a.parentElement(),r=t==n?t:c.getCommonAncestor(t,n),r==i?r:c.getCommonAncestor(i,r)},a=function(e){return 0==e.compareEndPoints("StartToEnd",e)},o=function(e,t,n,r,i){var a,o,s,l,u,d,f,h,g,b,v,y,w,$,x,k,C=e.duplicate();if(C.collapse(n),a=C.parentElement(),c.isOrIsAncestorOf(t,a)||(a=t),!a.canHaveHTML)return o=new p(a.parentNode,c.getNodeIndex(a)),{boundaryPosition:o,nodeInfo:{nodeIndex:o.offset,containerElement:o.node}};for(s=c.getDocument(a).createElement("span"),s.parentNode&&c.removeNode(s),g=n?"StartToStart":"StartToEnd",b=i&&i.containerElement==a?i.nodeIndex:0,v=a.childNodes.length,y=v,w=y;w==v?a.appendChild(s):a.insertBefore(s,a.childNodes[w]),C.moveToElementText(s),l=C.compareEndPoints(g,e),0!=l&&b!=y;){if(-1==l){if(y==b+1)break;b=w}else y=y==b+1?b:w;w=Math.floor((b+y)/2),a.removeChild(s)}if(h=s.nextSibling,-1==l&&h&&m(h)){if(C.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(h.data))for(x=C.duplicate(),k=x.text.replace(/\r\n/g,"\r").length,$=x.moveStart("character",k);-1==(l=x.compareEndPoints("StartToEnd",x));)$++,x.moveStart("character",1);else $=C.text.length;f=new p(h,$)}else u=(r||!n)&&s.previousSibling,d=(r||n)&&s.nextSibling,f=d&&m(d)?new p(d,0):u&&m(u)?new p(u,u.data.length):new p(a,c.getNodeIndex(s));return c.removeNode(s),{boundaryPosition:f,nodeInfo:{nodeIndex:w,containerElement:a}}},s=function(e,t){var n,r,i,a,o=e.offset,s=c.getDocument(e.node),l=h(s).createTextRange(),u=m(e.node);return u?(n=e.node,r=n.parentNode):(a=e.node.childNodes,n=o<a.length?a[o]:null,r=e.node),i=s.createElement("span"),i.innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),l.moveToElementText(i),l.collapse(!t),r.removeChild(i),u&&l[t?"moveStart":"moveEnd"]("character",o),l},r=function(e){this.textRange=e,this.refresh()},r.prototype=new f(document),r.prototype.refresh=function(){var e,t,n,r=i(this.textRange);a(this.textRange)?t=e=o(this.textRange,r,!0,!0).boundaryPosition:(n=o(this.textRange,r,!0,!1),e=n.boundaryPosition,t=o(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},f.copyComparisonConstants(r),l=function(e){if(e.collapsed)return s(new p(e.startContainer,e.startOffset),!0);var t=s(new p(e.startContainer,e.startOffset),!0),n=s(new p(e.endContainer,e.endOffset),!1),r=h(f.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r},r.rangeToTextRange=l,r.prototype.toTextRange=function(){return l(this)},e.WrappedTextRange=r,(!e.features.implementsDomRange||e.config.preferTextRange)&&(u=function(e){return e("return this;")()}(Function),"undefined"==typeof u.Range&&(u.Range=r),e.createNativeRange=function(e){return e=g(e,t,"createNativeRange"),h(e).createTextRange()},e.WrappedRange=r)),e.createRange=function(n){return n=g(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=g(e,t,"createRangyRange"),new f(e)},d.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),d.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),H.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(D.isWindow(e))return e;if(e instanceof b)return e.win;var r=D.getContentDocument(e,t,n);return D.getWindow(r)}return window}function i(e){return r(e,"getWinSelection").getSelection()}function a(e){return r(e,"getDocSelection").document.selection}function o(e){var t=!1;return e.anchorNode&&(t=1==D.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function u(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function c(t){var n;return t instanceof M?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof R?n=t.nativeRange:L.implementsDomRange&&t instanceof D.getWindow(t.startContainer).Range&&(n=t),n}function d(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!D.isAncestorOf(e[0],e[t]))return!1;return!0}function p(e){var n=e.getNodes();if(!d(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function f(e){return!!e&&"undefined"!=typeof e.text}function h(e,t){var n=new R(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function g(t){var n,r,i,a;if(t._ranges.length=0,"None"==t.docSelection.type)u(t);else if(n=t.docSelection.createRange(),f(n))h(t,n);else{for(t.rangeCount=n.length,i=I(n.item(0)),a=0;a<t.rangeCount;++a)r=e.createRange(i),r.selectNode(n.item(a)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}function m(e,n){for(var r=e.docSelection.createRange(),i=p(n),a=I(r.item(0)),o=q(a).createControlRange(),s=0,l=r.length;l>s;++s)o.add(r.item(s));try{o.add(i)}catch(u){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),g(e)}function b(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function y(e,t){for(var n,r,i=te.length;i--;)if(n=te[i],r=n.selection,"deleteAll"==t)v(r);else if(n.win==e)return"delete"==t?(te.splice(i,1),!0):r;return"deleteAll"==t&&(te.length=0),null}function w(e,n){for(var r,i=I(n[0].startContainer),a=q(i).createControlRange(),o=0,s=n.length;s>o;++o){r=p(n[o]);try{a.add(r)}catch(l){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),g(e)}function $(e,t){if(e.win.document!=I(t))throw new A("WRONG_DOCUMENT_ERR")}function x(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0),i["set"+(t?"Start":"End")](n,r)):(i=e.createRange(this.win.document),i.setStartAndEnd(n,r)),this.setSingleRange(i,this.isBackward())}}function k(e){var t,n,r=[],i=new _(e.anchorNode,e.anchorOffset),a=new _(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(t=0,n=e.rangeCount;n>t;++t)r[t]=M.inspect(e.getRangeAt(t));return"["+o+"(Ranges: "+r.join(", ")+")(anchor: "+i.inspect()+", focus: "+a.inspect()+"]"}var C,S,E,T,D,N,O,M,R,A,_,L,P,I,q,H,B,F,j,U,z,K,V,W,Q,G,Y,X,Z,J,ee,te,ne,re,ie,ae,oe,se;if(e.config.checkSelectionRanges=!0,E="boolean",T="number",D=e.dom,N=e.util,O=N.isHostMethod,M=e.DomRange,R=e.WrappedRange,A=e.DOMException,_=D.DomPosition,L=e.features,P="Control",I=D.getDocument,q=D.getBody,H=M.rangesEqual,B=O(window,"getSelection"),F=N.isHostObject(document,"selection"),L.implementsWinGetSelection=B,L.implementsDocSelection=F,j=F&&(!B||e.config.preferTextRange))C=a,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||I(n.createRange().parentElement())==t};else{if(!B)return t.fail("Neither document.selection or window.getSelection() detected."),!1;C=i,e.isSelectionValid=function(){return!0}}if(e.getNativeSelection=C,U=C(),!U)return t.fail("Native selection was null (possibly issue 138?)"),!1;if(z=e.createNativeRange(document),K=q(document),V=N.areHostProperties(U,["anchorNode","focusNode","anchorOffset","focusOffset"]),L.selectionHasAnchorAndFocus=V,W=O(U,"extend"),L.selectionHasExtend=W,Q=typeof U.rangeCount==T,L.selectionHasRangeCount=Q,G=!1,Y=!0,X=W?function(t,n){var r=M.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(c(i)),t.extend(n.startContainer,n.startOffset)}:null,N.areHostMethods(U,["addRange","getRangeAt","removeAllRanges"])&&typeof U.rangeCount==T&&L.implementsDomRange&&!function(){var t,n,r,i,a,s,l,u,c,d,p=window.getSelection();if(p){for(t=p.rangeCount,n=t>1,r=[],i=o(p),a=0;t>a;++a)r[a]=p.getRangeAt(a);for(s=D.createTestElement(document,"",!1),l=s.appendChild(document.createTextNode("   ")),u=document.createRange(),u.setStart(l,1),u.collapse(!0),p.removeAllRanges(),p.addRange(u),Y=1==p.rangeCount,p.removeAllRanges(),n||(c=window.navigator.appVersion.match(/Chrome\/(.*?) /),c&&parseInt(c[1])>=36?G=!1:(d=u.cloneRange(),u.setStart(l,0),d.setEnd(l,3),d.setStart(l,2),p.addRange(u),p.addRange(d),G=2==p.rangeCount)),D.removeNode(s),p.removeAllRanges(),a=0;t>a;++a)0==a&&i?X?X(p,r[a]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),p.addRange(r[a])):p.addRange(r[a])}}(),L.selectionSupportsMultipleRanges=G,L.collapsedNonEditableSelectionsSupported=Y,J=!1,K&&O(K,"createControlRange")&&(Z=K.createControlRange(),N.areHostProperties(Z,["item","add"])&&(J=!0)),L.implementsControlRange=J,S=V?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1},O(U,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:V&&(ee=function(t){var n=I(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),b.prototype=e.selectionPrototype,te=[],ne=function(e){if(e&&e instanceof b)return e.refresh(),e;e=r(e,"getNativeSelection");var t=y(e),n=C(e),i=F?a(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh()):(t=new b(n,i,e),te.push({win:e,selection:t})),t},e.getSelection=ne,N.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection"),re=b.prototype,!j&&V&&N.areHostMethods(U,["removeAllRanges","addRange"]))re.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),u(this)},ie=function(e,t){X(e.nativeSelection,t),e.refresh()},re.addRange=Q?function(t,r){var i,a,o;if(J&&F&&this.docSelection.type==P)m(this,t);else if(n(r)&&W)ie(this,t);else{G?i=this.rangeCount:(this.removeAllRanges(),i=0),a=c(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(l){}this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1?(e.config.checkSelectionRanges&&(o=ee(this.nativeSelection,this.rangeCount-1),o&&!H(o,t)&&(t=new R(o))),this._ranges[this.rangeCount-1]=t,s(this,t,se(this.nativeSelection)),this.isCollapsed=S(this)):this.refresh()}}:function(e,t){n(t)&&W?ie(this,e):(this.nativeSelection.addRange(c(e)),this.refresh())},re.setRanges=function(e){if(J&&F&&e.length>1)w(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}};else{if(!(O(U,"empty")&&O(z,"select")&&J&&j))return t.fail("No means of selecting a Range or TextRange was found"),!1;re.removeAllRanges=function(){var e,t,n;try{this.docSelection.empty(),"None"!=this.docSelection.type&&(this.anchorNode?e=I(this.anchorNode):this.docSelection.type==P&&(t=this.docSelection.createRange(),t.length&&(e=I(t.item(0)))),e&&(n=q(e).createTextRange(),n.select(),this.docSelection.empty()))}catch(r){}u(this)},re.addRange=function(t){this.docSelection.type==P?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},re.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?w(this,e):t&&this.addRange(e[0])}}if(re.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new A("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},j)ae=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=q(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==P?g(t):f(n)?h(t,n):u(t)};else if(O(U,"getRangeAt")&&typeof U.rangeCount==T)ae=function(t){if(J&&F&&t.docSelection.type==P)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;r>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],se(t.nativeSelection)),
t.isCollapsed=S(t)}else u(t)};else{if(!V||typeof U.isCollapsed!=E||typeof z.collapsed!=E||!L.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ae=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=S(e)):u(e)}}re.refresh=function(e){var t,n=e?this._ranges.slice(0):null,r=this.anchorNode,i=this.anchorOffset;if(ae(this),e){if(t=n.length,t!=this._ranges.length)return!0;if(this.anchorNode!=r||this.anchorOffset!=i)return!0;for(;t--;)if(!H(n[t],this._ranges[t]))return!0;return!1}},oe=function(e,t){var n,r,i=e.getAllRanges();for(e.removeAllRanges(),n=0,r=i.length;r>n;++n)H(t,i[n])||e.addRange(i[n]);e.rangeCount||u(e)},re.removeRange=J&&F?function(e){if(this.docSelection.type==P){for(var t,n=this.docSelection.createRange(),r=p(e),i=I(n.item(0)),a=q(i).createControlRange(),o=!1,s=0,l=n.length;l>s;++s)t=n.item(s),t!==r||o?a.add(n.item(s)):o=!0;a.select(),g(this)}else oe(this,e)}:function(e){oe(this,e)},!j&&V&&L.implementsDomRange?(se=o,re.isBackward=function(){return se(this)}):se=re.isBackward=function(){return!1},re.isBackwards=re.isBackward,re.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},re.collapse=function(t,n){$(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},re.collapseToStart=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},re.collapseToEnd=function(){if(!this.rangeCount)throw new A("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},re.selectAllChildren=function(t){$(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},re.deleteFromDocument=function(){var e,t,n,r,i;if(J&&F&&this.docSelection.type==P){for(t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),D.removeNode(e);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),r=0,i=n.length;i>r;++r)n[r].deleteContents();this.addRange(n[i-1])}},re.eachRange=function(e,t){for(var n=0,r=this._ranges.length;r>n;++n)if(e(this.getRangeAt(n)))return t},re.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},re.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},re.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},re.setStart=x(!0),re.setEnd=x(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},re.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},re.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},re.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},re.moveToBookmark=function(t){for(var n,r,i=[],a=0;n=t.rangeBookmarks[a++];)r=e.createRange(this.win),r.moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},re.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},re.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},re.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(M.toHtml(t))}),e.join("")},L.implementsTextRange&&(re.getNativeTextRange=function(){var n,r;if(n=this.docSelection){if(r=n.createRange(),f(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),re.getName=function(){return"WrappedSelection"},re.inspect=function(){return k(this)},re.detach=function(){y(this.win,"delete"),v(this)},b.detachAll=function(){y(null,"deleteAll")},b.inspect=k,b.isDirectionBackward=n,e.Selection=b,e.selectionPrototype=re,e.addShimListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})}),k=!1,C=function(){k||(k=!0,!H.initialized&&H.config.autoInitialize&&d())},I&&("complete"==document.readyState?C():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",C,!1),w(window,"load",C))),H},this),function(t,n){"function"==typeof define&&define.amd?define(["./rangy-core"],t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t(require("rangy")):t(n.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=h.getDocument(e.startContainer),a=e.cloneRange();return a.collapse(t),n=i.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(b)),a.insertNode(n),n}function i(e,r,i,a){var o=n(i,e);o?(r[a?"setStartBefore":"setEndBefore"](o),g(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function a(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function o(t,n){var i,a,o=e.DomRange.getRangeDocument(t),s=t.toString(),l=m(n);return t.collapsed?(a=r(t,!1),{document:o,markerId:a.id,collapsed:!0}):(a=r(t,!1),i=r(t,!0),{document:o,startMarkerId:i.id,endMarkerId:a.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function s(r,a){var o,s,l,u=r.document;return"undefined"==typeof a&&(a=!0),o=e.createRange(u),r.collapsed?(s=n(r.markerId,u),s?(s.style.display="inline",l=s.previousSibling,l&&3==l.nodeType?(g(s),o.collapseToPoint(l,l.length)):(o.collapseBefore(s),g(s))):t.warn("Marker element has been removed. Cannot restore selection.")):(i(u,o,r.startMarkerId,!0),i(u,o,r.endMarkerId,!1)),a&&o.normalizeBoundaries(),o}function l(t,r){var i,s,l,u,c=[],d=m(r);for(t=t.slice(0),t.sort(a),l=0,u=t.length;u>l;++l)c[l]=o(t[l],d);for(l=u-1;l>=0;--l)i=t[l],s=e.DomRange.getRangeDocument(i),i.collapsed?i.collapseAfter(n(c[l].markerId,s)):(i.setEndBefore(n(c[l].endMarkerId,s)),i.setStartAfter(n(c[l].startMarkerId,s)));return c}function u(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),i=r.getAllRanges(),a=1==i.length&&r.isBackward(),o=l(i,a);return a?r.setSingleRange(i[0],a):r.setRanges(i),{win:n,rangeInfos:o,restored:!1}}function c(e){for(var t=[],n=e.length,r=n-1;r>=0;r--)t[r]=s(e[r],!0);return t}function d(t,n){if(!t.restored){var r=t.rangeInfos,i=e.getSelection(t.win),a=c(r),o=r.length;1==o&&n&&e.features.selectionHasExtend&&r[0].backward?(i.removeAllRanges(),i.addRange(a[0],!0)):i.setRanges(a),t.restored=!0}}function p(e,t){var r=n(t,e);r&&g(r)}function f(e){for(var t,n=e.rangeInfos,r=0,i=n.length;i>r;++r)t=n[r],t.collapsed?p(e.doc,t.markerId):(p(e.doc,t.startMarkerId),p(e.doc,t.endMarkerId))}var h=e.dom,g=h.removeNode,m=e.Selection.isDirectionBackward,b="\ufeff";e.util.extend(e,{saveRange:o,restoreRange:s,saveRanges:l,restoreRanges:c,saveSelection:u,restoreSelection:d,removeMarkerElement:p,removeMarkers:f})}),e},this)}({},function(){return this}()),function(e,t){"use strict";function n(){this.$get=["$$sanitizeUri",function(e){return function(t){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var n=[];return a(t,c(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],r=c(n,t.noop);return r.chars(e),n.join("")}function i(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function a(e,n){function r(e,r,a,s){if(r=t.lowercase(r),D[r])for(;u.last()&&N[u.last()];)i("",u.last());T[r]&&u.last()==r&&i("",r),s=C[r]||!!s,s||u.push(r);var l={};a.replace(h,function(e,t,n,r,i){var a=n||r||i||"";l[t]=o(a)}),n.start&&n.start(r,l,s)}function i(e,r){var i,a=0;if(r=t.lowercase(r))for(a=u.length-1;a>=0&&u[a]!=r;a--);if(a>=0){for(i=u.length-1;i>=a;i--)n.end&&n.end(u[i]);u.length=a}}var a,s,l,u,c,$,x;for("string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e),u=[],c=e,u.last=function(){return u[u.length-1]};e;){if($="",s=!0,u.last()&&M[u.last()]?(e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+u.last()+"[^>]*>","i"),function(e,t){return t=t.replace(b,"$1").replace(w,"$1"),n.chars&&n.chars(o(t)),""}),i("",u.last())):(k.test(e)?(l=e.match(k),l&&(x=l[0],n.whitespace&&n.whitespace(l[0]),e=e.replace(l[0],""),s=!1)):v.test(e)?(l=e.match(v),l&&(n.comment&&n.comment(l[1]),e=e.replace(l[0],""),s=!1)):y.test(e)?(l=e.match(y),l&&(e=e.replace(l[0],""),s=!1)):m.test(e)?(l=e.match(f),l&&(e=e.substring(l[0].length),l[0].replace(f,i),s=!1)):g.test(e)&&(l=e.match(p),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(p,r)),s=!1):($+="<",e=e.substring(1))),s&&(a=e.indexOf("<"),$+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(o($)))),e==c)throw d("badparse","The sanitizer was unable to parse the following block of html: {0}",e);c=e}i()}function o(e){var t,n,r,i;return e?(t=q.exec(e),n=t[1],r=t[3],i=t[2],i&&(I.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in I?I.textContent:I.innerText),n+i+r):""}function s(e){return e.replace(/&/g,"&amp;").replace($,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(x,function(e){var t=e.charCodeAt(0);return 159>=t||173==t||t>=1536&&1540>=t||1807==t||6068==t||6069==t||t>=8204&&8207>=t||t>=8232&&8239>=t||t>=8288&&8303>=t||65279==t||t>=65520&&65535>=t?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e){var n="",r=e.split(";");return t.forEach(r,function(e){var r,i=e.split(":");2==i.length&&(r=H(t.lowercase(i[0])),e=H(t.lowercase(i[1])),(("color"===r||"background-color"===r)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===r&&("left"===e||"right"===e||"center"===e||"justify"===e)||"text-decoration"===r&&("underline"===e||"line-through"===e)||"font-weight"===r&&"bold"===e||"float"===r&&("left"===e||"right"===e||"none"===e)||("width"===r||"height"===r)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===r&&e.match(/^ltr|rtl|initial|inherit$/))&&(n+=r+": "+e+";"))}),n}function u(e,t,n,r){return"img"===e&&t["ta-insert-video"]&&("ta-insert-video"===n||"allowfullscreen"===n||"frameborder"===n||"contenteditable"===n&&"false"===r)?!0:!1}function c(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!r&&M[e]&&(r=e),r||R[e]!==!0||(i("<"),i(e),t.forEach(a,function(r,o){var c=t.lowercase(o),d="img"===e&&"src"===c||"background"===c;("style"===c&&""!==(r=l(r))||u(e,a,c,r)||P[c]===!0&&(A[c]!==!0||n(r,d)))&&(i(" "),i(o),i('="'),i(s(r)),i('"'))}),i(o?"/>":">"))},comment:function(e){i(e)},whitespace:function(e){i(s(e))},end:function(e){e=t.lowercase(e),r||R[e]!==!0||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(s(e))}}}var d=t.$$minErr("$sanitize"),p=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,f=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,g=/^</,m=/^<\//,b=/<!--(.*?)-->/g,v=/(^<!--.*?-->)/,y=/<!DOCTYPE([^>]*?)>/i,w=/<!\[CDATA\[(.*?)]]>/g,$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~| |!])/g,k=/^(\s+)/,C=i("area,br,col,hr,img,wbr,input"),S=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),E=i("rp,rt"),T=t.extend({},E,S),D=t.extend({},S,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),N=t.extend({},E,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),O=i("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),M=i("script,style"),R=t.extend({},C,D,N,T,O),A=i("background,cite,href,longdesc,src,usemap,xlink:href"),_=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),L=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),P=t.extend({},A,L,_),I=document.createElement("pre"),q=/^(\s*)([\s\S]*?)(\s*)$/,H=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,i=/^mailto:/;return function(a,o){function s(e){e&&d.push(r(e))}function l(e,n){d.push("<a "),t.isDefined(o)&&d.push('target="',o,'" '),d.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),d.push("</a>")}var u,c,d,p,f;if(!a)return a;for(c=a,d=[];u=c.match(n);)p=u[0],u[2]||u[4]||(p=(u[3]?"http://":"mailto:")+p),f=u.index,s(c.substr(0,f)),l(p,u[0].replace(i,"")),c=c.substring(f+u[0].length);return s(c),e(d.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="textAngular"),function(){"use strict";var e,t,r,i,a,o,s,l,u,c,d,p,f,h={ie:function(){for(var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:e}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},g=!1;if(h.webkit&&(document.addEventListener("mousedown",function(e){var t,n,r=e||window.event,i=r.target;if(g&&null!==i){for(t=!1,n=i;null!==n&&"html"!==n.tagName.toLowerCase()&&!t;)t="true"===n.contentEditable,n=n.parentNode;t||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),i.focus(),i.select&&i.select())}g=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))})),e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,t=/^(ul|li|ol)$/i,r=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),h.ie>8||void 0===h.ie){for(c=document.styleSheets,d=0;d<c.length;d++)if((0===c[d].media.length||c[d].media.mediaText.match(/(all|screen)/gi))&&c[d].href&&c[d].href.match(/textangular\.(min\.|)css/gi)){i=c[d];break}i||(i=function(){var e=document.createElement("style");return h.webkit&&e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet}()),a=function(e,t){return s(i,e,t)},s=function(e,t,n){var r,a;return e.cssRules?r=Math.max(e.cssRules.length-1,0):e.rules&&(r=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r),i.rules?a=i.rules[r]:i.cssRules&&(a=i.cssRules[r]),a},u=function(e,t){var n,r;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){r=n;break}return r},o=function(e){l(i,e)},l=function(e,t){var n,r=e.cssRules||e.rules;r&&0!==r.length&&(n=u(t,r),e.removeRule?e.removeRule(n):e.deleteRule(n))}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(e){return e?""===e?void 0===h.ie?"div":h.ie<=8?"P":"p":h.ie<=8?e.toUpperCase():e:h.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(e,t){return function(n){var r=angular.element("<div></div>");return r[0].innerHTML=n,angular.forEach(e,function(e){var n=[];e.selector&&""!==e.selector?n=r.find(e.selector):e.customAttribute&&""!==e.customAttribute&&(n=t.getByAttribute(r,e.customAttribute)),angular.forEach(n,function(t){t=angular.element(t),e.selector&&""!==e.selector&&e.customAttribute&&""!==e.customAttribute?void 0!==t.attr(e.customAttribute)&&e.renderLogic(t):e.renderLogic(t)})}),r[0].innerHTML}}]).factory("taFixChrome",function(){var e=function(e){var t,n,r,i,a,o;if(!e||!angular.isString(e)||e.length<=0)return e;for(t=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,a="",o=0;n=t.exec(e);)r=n[3]||n[4],r&&r.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(r=r.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),i="<"+n[1].trim(),r.trim().length>0&&(i+=" style="+n[2].substring(0,1)+r+n[2].substring(0,1)),i+=n[5].trim()+">",a+=e.substring(o,n.index)+i,o=n.index+n[0].length);return a+=e.substring(o),o>0?a.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e};return e}).factory("taSanitize",["$sanitize",function(e){function t(e,t){for(var n,r=0,i=0,a=/<[^>]*>/gi;n=a.exec(e);)if(i=n.index,"/"===n[0].substr(1,1)){if(0===r)break;r--}else r++;return t+e.substring(0,i)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(i)}function n(e){var r,i,a,o,u,c,d,p,f,h,g,m;if(!e||!angular.isString(e)||e.length<=0)return e;for(i=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",f="",h=0;a=i.exec(e);)if(u=a[3]||a[4],g=new RegExp(s,"i"),angular.isString(u)&&g.test(u)){for(c="",m=new RegExp(s,"ig");o=m.exec(u);)for(r=0;r<l.length;r++)o[2*r+2]&&(c+="<"+l[r].tag+">");p=n(e.substring(h,a.index)),f+=d.length>0?t(p,d):p,u=u.replace(new RegExp(s,"ig"),""),f+="<"+a[1].trim(),u.length>0&&(f+=' style="'+u+'"'),f+=a[5]+">",h=a.index+a[0].length,d=c}return f+=d.length>0?t(e.substring(h),d):e.substring(h)}function r(e){var t,n,r,i,a;if(!e||!angular.isString(e)||e.length<=0)return e;for(t=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",i=0;n=t.exec(e);)r+=e.substring(i,n.index),i=n.index+n[0].length,a="<"+n[1]+n[5],/style=("([^"]+)"|'([^']+)')/gi.test(a)?a=a.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(n[3]||n[4])+';"'):a+=' style="text-align:'+(n[3]||n[4])+';"',a+=">",r+=a;return r+e.substring(i)}var i,a,o,s,l=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],u=[];for(i=0;i<l.length;i++){for(a="("+l[i].property+":\\s*(",o=0;o<l[i].values.length;o++)o>0&&(a+="|"),a+=l[i].values[o];a+=");)",u.push(a)}return s="("+u.join("|")+")",function(t,i,a){var o,s,l,u,c,d,p;if(!a)try{t=n(t)}catch(f){}t=r(t);try{o=e(t),a&&(o=t)}catch(f){o=i||""}for(s=o.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),l=o.replace(/(&#(9|10);)*/gi,""),u=/<pre[^>]*>.*?<\/pre[^>]*>/gi,c=0,d=0,o="";null!==(p=u.exec(l))&&c<s.length;)o+=l.substring(d,p.index)+s[c],d=p.index+p[0].length,c++;return o+l.substring(d)}}]).factory("taToolExecuteAction",["$q","$log",function(e,t){return function(n){var r,i,a,o;void 0!==n&&(this.$editor=function(){return n}),r=e.defer(),i=r.promise,a=this.$editor();try{o=this.action(r,a.startAction()),i["finally"](function(){a.endAction.call(a)})}catch(s){t.error(s)}(o||void 0===o)&&r.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(n,r,i){var a=function(e,t){var r,i,a=e.find("li");for(i=a.length-1;i>=0;i--)r=angular.element("<"+t+">"+a[i].innerHTML+"</"+t+">"),e.after(r);e.remove(),n.setSelectionToElementEnd(r[0])},o=function(e){/(<br(|\/)>)$/i.test(e.innerHTML.trim())?n.setSelectionBeforeElement(angular.element(e).find("br")[0]):n.setSelectionToElementEnd(e)},s=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),o(n.find("li")[0])},l=function(e,t,n){var i,a,s="";for(i=0;i<e.length;i++)s+="<"+r("li")+">"+e[i].innerHTML+"</"+r("li")+">";a=angular.element("<"+n+">"+s+"</"+n+">"),t.after(a),t.remove(),o(a.find("li")[0])};return function(o,u){return o=r(o),function(c,d,p,f){var h,g,m,b,v,y,w,$,x,k,C,S,E,T,D,N,O,M,R,A,_=angular.element("<"+o+">");try{w=n.getSelectionElement()}catch(L){}if($=angular.element(w),void 0!==w)if(x=w.tagName.toLowerCase(),"insertorderedlist"===c.toLowerCase()||"insertunorderedlist"===c.toLowerCase()){if(k=r("insertorderedlist"===c.toLowerCase()?"ol":"ul"),x===k)return a($,o);if("li"===x&&$.parent()[0].tagName.toLowerCase()===k&&1===$.parent().children().length)return a($.parent(),o);if("li"===x&&$.parent()[0].tagName.toLowerCase()!==k&&1===$.parent().children().length)return s($.parent(),k);if(x.match(e)&&!$.hasClass("ta-bind"))return"ol"===x||"ul"===x?s($,k):(C=!1,angular.forEach($.children(),function(t){t.tagName.match(e)&&(C=!0)}),C?l($.children(),$,k):l([angular.element("<div>"+w.innerHTML+"</div>")[0]],$,k));if(x.match(e)){if(b=n.getOnlySelectedElements(),0===b.length)g=angular.element("<"+k+"><li>"+w.innerHTML+"</li></"+k+">"),$.html(""),$.append(g);else{if(1===b.length&&("ol"===b[0].tagName.toLowerCase()||"ul"===b[0].tagName.toLowerCase()))return b[0].tagName.toLowerCase()===k?a(angular.element(b[0]),o):s(angular.element(b[0]),k);for(m="",S=[],h=0;h<b.length;h++)if(3!==b[h].nodeType){if(E=angular.element(b[h]),"li"===b[h].tagName.toLowerCase())continue;m+="ol"===b[h].tagName.toLowerCase()||"ul"===b[h].tagName.toLowerCase()?E[0].innerHTML:"span"!==b[h].tagName.toLowerCase()||"ol"!==b[h].childNodes[0].tagName.toLowerCase()&&"ul"!==b[h].childNodes[0].tagName.toLowerCase()?"<"+r("li")+">"+E[0].innerHTML+"</"+r("li")+">":E[0].childNodes[0].innerHTML,S.unshift(E)}g=angular.element("<"+k+">"+m+"</"+k+">"),S.pop().replaceWith(g),angular.forEach(S,function(e){e.remove()})}return void n.setSelectionToElementEnd(g[0])}}else{if("formatblock"===c.toLowerCase()){for(y=p.toLowerCase().replace(/[<>]/gi,""),"default"===y.trim()&&(y=o,p="<"+o+">"),g="li"===x?$.parent():$;!g[0].tagName||!g[0].tagName.match(e)&&!g.parent().attr("contenteditable");)g=g.parent(),x=(g[0].tagName||"").toLowerCase();if(x===y){for(b=g.children(),T=!1,h=0;h<b.length;h++)T=T||b[h].tagName.match(e);T?(g.after(b),v=g.next(),g.remove(),g=v):(_.append(g[0].childNodes),g.after(_),g.remove(),g=_)}else if(g.parent()[0].tagName.toLowerCase()!==y||g.parent().hasClass("ta-bind"))if(x.match(t))g.wrap(p);else{for(b=n.getOnlySelectedElements(),0===b.length&&(b=[g[0]]),h=0;h<b.length;h++)if(3===b[h].nodeType||!b[h].tagName.match(e))for(;3===b[h].nodeType||!b[h].tagName||!b[h].tagName.match(e);)b[h]=b[h].parentNode;if(angular.element(b[0]).hasClass("ta-bind"))g=angular.element(p),g[0].innerHTML=b[0].innerHTML,b[0].innerHTML=g[0].outerHTML;else if("blockquote"===y){for(m="",h=0;h<b.length;h++)m+=b[h].outerHTML;for(g=angular.element(p),g[0].innerHTML=m,b[0].parentNode.insertBefore(g[0],b[0]),h=b.length-1;h>=0;h--)b[h].parentNode&&b[h].parentNode.removeChild(b[h])}else for(h=0;h<b.length;h++)g=angular.element(p),g[0].innerHTML=b[h].innerHTML,b[h].parentNode.insertBefore(g[0],b[h]),b[h].parentNode.removeChild(b[h])}else{for(D=g.parent(),N=D.contents(),h=0;h<N.length;h++)D.parent().hasClass("ta-bind")&&3===N[h].nodeType&&(_=angular.element("<"+o+">"),_[0].innerHTML=N[h].outerHTML,N[h]=_[0]),D.parent()[0].insertBefore(N[h],D[0]);D.remove()}return void n.setSelectionToElementEnd(g[0])}if("createlink"===c.toLowerCase())return O='<a href="'+p+'" target="'+(f.a.target?f.a.target:"")+'">',M="</a>",R=n.getSelection(),void(R.collapsed?n.insertHtml(O+p+M,u):rangy.getSelection().getRangeAt(0).canSurroundContents()&&(A=angular.element(O+M)[0],rangy.getSelection().getRangeAt(0).surroundContents(A)));if("inserthtml"===c.toLowerCase())return void n.insertHtml(p,u)}try{i[0].execCommand(c,d,p)}catch(L){}}}}]).service("taSelection",["$window","$document","taDOM",function(t,n,i){var a=n[0],o=t.rangy,s=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},l={getSelection:function(){var e=o.getSelection().getRangeAt(0),t=e.commonAncestorContainer,n={start:s(e.startContainer,e.startOffset),end:s(e.endContainer,e.endOffset),collapsed:e.collapsed};return t=3===t.nodeType?t.parentNode:t,n.container=t.parentNode===n.start.element||t.parentNode===n.end.element?t.parentNode:t,n},getOnlySelectedElements:function(){var e=o.getSelection().getRangeAt(0),t=e.commonAncestorContainer;return t=3===t.nodeType?t.parentNode:t,e.getNodes([1],function(e){return e.parentNode===t})},getSelectionElement:function(){return l.getSelection().container},setSelection:function(e,t,n){var r=o.createRange();r.setStart(e,t),r.setEnd(e,n),o.getSelection().setSingleRange(r)},setSelectionBeforeElement:function(e){var t=o.createRange();t.selectNode(e),t.collapse(!0),o.getSelection().setSingleRange(t)},setSelectionAfterElement:function(e){var t=o.createRange();t.selectNode(e),t.collapse(!1),o.getSelection().setSingleRange(t)},setSelectionToElementStart:function(e){var t=o.createRange();t.selectNodeContents(e),t.collapse(!0),o.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(e){var t=o.createRange();t.selectNodeContents(e),t.collapse(!1),e.childNodes&&e.childNodes[e.childNodes.length-1]&&"br"===e.childNodes[e.childNodes.length-1].nodeName&&(t.startOffset=t.endOffset=t.startOffset-1),o.getSelection().setSingleRange(t)},insertHtml:function(t,n){var s,u,c,d,p,f,h,g,m,b=angular.element("<div>"+t+"</div>"),v=o.getSelection().getRangeAt(0),y=a.createDocumentFragment(),w=b[0].childNodes,$=!0;if(w.length>0){for(d=[],c=0;c<w.length;c++)"p"===w[c].nodeName.toLowerCase()&&""===w[c].innerHTML.trim()||3===w[c].nodeType&&""===w[c].nodeValue.trim()||($=$&&!e.test(w[c].nodeName),d.push(w[c]));for(g=0;g<d.length;g++)f=y.appendChild(d[g]);!$&&v.collapsed&&/^(|<br(|\/)>)$/i.test(v.startContainer.innerHTML)&&v.selectNode(v.startContainer)}else $=!0,f=y=a.createTextNode(t);if($)v.deleteContents();else if(v.collapsed&&v.startContainer!==n)if(v.startContainer.innerHTML&&v.startContainer.innerHTML.match(/^<[^>]*>$/i))s=v.startContainer,1===v.startOffset?(v.setStartAfter(s),v.setEndAfter(s)):(v.setStartBefore(s),v.setEndBefore(s));else{if(3===v.startContainer.nodeType&&v.startContainer.parentNode!==n)for(s=v.startContainer.parentNode,u=s.cloneNode(),i.splitNodes(s.childNodes,s,u,v.startContainer,v.startOffset);!r.test(s.nodeName);)angular.element(s).after(u),s=s.parentNode,m=u,u=s.cloneNode(),i.splitNodes(s.childNodes,s,u,m);else s=v.startContainer,u=s.cloneNode(),i.splitNodes(s.childNodes,s,u,void 0,void 0,v.startOffset);if(angular.element(s).after(u),v.setStartAfter(s),v.setEndAfter(s),/^(|<br(|\/)>)$/i.test(s.innerHTML.trim())&&(v.setStartBefore(s),v.setEndBefore(s),angular.element(s).remove()),/^(|<br(|\/)>)$/i.test(u.innerHTML.trim())&&angular.element(u).remove(),"li"===s.nodeName.toLowerCase()){for(h=a.createDocumentFragment(),p=0;p<y.childNodes.length;p++)b=angular.element("<li>"),i.transferChildNodes(y.childNodes[p],b[0]),i.transferNodeAttributes(y.childNodes[p],b[0]),h.appendChild(b[0]);y=h,f&&(f=y.childNodes[y.childNodes.length-1],f=f.childNodes[f.childNodes.length-1])}}else v.deleteContents();v.insertNode(y),f&&l.setSelectionToElementEnd(f)}};return l}]).service("taDOM",function(){var e={getByAttribute:function(t,n){var r=[],i=t.children();return i.length&&angular.forEach(i,function(t){r=r.concat(e.getByAttribute(angular.element(t),n))}),void 0!==t.attr(n)&&r.push(t),r},transferChildNodes:function(e,t){for(t.innerHTML="";e.childNodes.length>0;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(t,n,r,i,a,o){var s,l,u;if(!i&&isNaN(o))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(s=document.createDocumentFragment(),l=document.createDocumentFragment(),u=0;t.length>0&&(isNaN(o)||o!==u)&&t[0]!==i;)s.appendChild(t[0]),u++;for(!isNaN(a)&&a>=0&&t[0]&&(s.appendChild(document.createTextNode(t[0].nodeValue.substring(0,a))),t[0].nodeValue=t[0].nodeValue.substring(a));t.length>0;)l.appendChild(t[0]);e.transferChildNodes(s,n),e.transferChildNodes(l,r)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return e}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMaxText));if(isNaN(i))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(i=parseInt(e),isNaN(i))throw"Max text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=i}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMinText));if(isNaN(i))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(i=parseInt(e),isNaN(i))throw"Min text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=i}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var e=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(t){return function(n){var r,i;return n?(r=/(^[^<]|>)[^<]/i.exec(n),r?i=r.index:(n=n.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),i=n.indexOf(">")),n=n.trim().substring(i,i+100),/^[^<>]+$/i.test(n)?!1:0===n.length||n===t||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(n)?!0:/>\s*[^\s<]/i.test(n)||e.test(n)?!1:!0):!0}}}]).directive("taButton",[function(){return{link:function(e,t){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(t,n,i,s,l,u,c,d,f,m,b,v,y,w){return{
priority:2,require:["ngModel","?ngModelOptions"],link:function(u,$,x,k){function C(e){var t;return de.forEach(function(n){if(n.keyCode===e.keyCode){var r=(e.metaKey?le:0)+(e.ctrlKey?se:0)+(e.shiftKey?ce:0)+(e.altKey?ue:0);if(n.forbiddenModifiers&r)return;n.mustHaveModifiers.every(function(e){return r&e})&&(t=n.specialKey)}}),t}var S,E,T,D,N,O,M,R,A,_,L,P,I,q,H,B,F,j,U,z,K,V,W,Q,G,Y,X=k[0],Z=k[1]||{},J=void 0!==$.attr("contenteditable")&&$.attr("contenteditable"),ee=J||"textarea"===$[0].tagName.toLowerCase()||"input"===$[0].tagName.toLowerCase(),te=!1,ne=!1,re=!1,ie=x.taUnsafeSanitizer||m.disableSanitizer,ae=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,oe=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,se=1,le=2,ue=4,ce=8,de=[{specialKey:"UndoKey",forbiddenModifiers:ue+ce,mustHaveModifiers:[le+se],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:ue,mustHaveModifiers:[le+se,ce],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:ue+ce,mustHaveModifiers:[le+se],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:le+ce+ue+se,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:le+ue+se,mustHaveModifiers:[ce],keyCode:9}];if(void 0===x.taDefaultWrap&&(x.taDefaultWrap="p"),""===x.taDefaultWrap?(T="",D=void 0===h.ie?"<div><br></div>":h.ie>=11?"<p><br></p>":h.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(T=void 0===h.ie||h.ie>=11?"<"+x.taDefaultWrap+"><br></"+x.taDefaultWrap+">":h.ie<=8?"<"+x.taDefaultWrap.toUpperCase()+"></"+x.taDefaultWrap.toUpperCase()+">":"<"+x.taDefaultWrap+"></"+x.taDefaultWrap+">",D=void 0===h.ie||h.ie>=11?"<"+x.taDefaultWrap+"><br></"+x.taDefaultWrap+">":h.ie<=8?"<"+x.taDefaultWrap.toUpperCase()+">&nbsp;</"+x.taDefaultWrap.toUpperCase()+">":"<"+x.taDefaultWrap+">&nbsp;</"+x.taDefaultWrap+">"),Z.$options||(Z.$options={}),N=b(D),O=function(t){var n,r,i,a,o,s,l,u;if(N(t))return t;if(n=angular.element("<div>"+t+"</div>"),0===n.children().length)t="<"+x.taDefaultWrap+">"+t+"</"+x.taDefaultWrap+">";else{for(r=n[0].childNodes,a=!1,i=0;i<r.length&&!(a=r[i].nodeName.toLowerCase().match(e));i++);if(a)for(t="",i=0;i<r.length;i++)o=r[i],s=o.nodeName.toLowerCase(),"#comment"===s?t+="<!--"+o.nodeValue+"-->":"#text"===s?(l=o.textContent,t+=l.trim()?"<"+x.taDefaultWrap+">"+l+"</"+x.taDefaultWrap+">":l):s.match(e)?t+=o.outerHTML:(u=o.outerHTML||o.nodeValue,t+=""!==u.trim()?"<"+x.taDefaultWrap+">"+u+"</"+x.taDefaultWrap+">":u);else t="<"+x.taDefaultWrap+">"+t+"</"+x.taDefaultWrap+">"}return t},x.taPaste&&(E=v(x.taPaste)),$.addClass("ta-bind"),u["$undoManager"+(x.id||"")]=X.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return"undefined"==typeof e||null===e||"undefined"!=typeof this.current()&&null!==this.current()&&e===this.current()?e:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),M&&n.cancel(M),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,e)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){return 0>e||e>this._stack.length-1?void 0:(this._index=e,this.current())},current:function(){return this._stack[this._index]}},A=u["$undoTaBind"+(x.id||"")]=function(){if(!te&&J){var e=X.$undoManager.undo();"undefined"!=typeof e&&null!==e&&(Q(e),P(e,!1),R&&n.cancel(R),R=n(function(){$[0].focus(),c.setSelectionToElementEnd($[0])},1))}},_=u["$redoTaBind"+(x.id||"")]=function(){if(!te&&J){var e=X.$undoManager.redo();"undefined"!=typeof e&&null!==e&&(Q(e),P(e,!1),R&&n.cancel(R),R=n(function(){$[0].focus(),c.setSelectionToElementEnd($[0])},1))}},L=function(){if(J)return $[0].innerHTML;if(ee)return $.val();throw"textAngular Error: attempting to update non-editable taBind"},P=function(e,t,n){re=n||!1,("undefined"==typeof t||null===t)&&(t=!0&&J),("undefined"==typeof e||null===e)&&(e=L()),N(e)?(""!==X.$viewValue&&X.$setViewValue(""),t&&""!==X.$undoManager.current()&&X.$undoManager.push("")):(W(),X.$viewValue!==e&&(X.$setViewValue(e),t&&X.$undoManager.push(e))),X.$render()},u["updateTaBind"+(x.id||"")]=function(){te||P(void 0,void 0,!0)},I=function(e){return X.$oldViewValue=t(l(e),X.$oldViewValue,ie)},$.attr("required")&&(X.$validators.required=function(e,t){return!N(e||t)}),X.$parsers.push(I),X.$parsers.unshift(O),X.$formatters.push(I),X.$formatters.unshift(O),X.$formatters.unshift(function(e){return X.$undoManager.push(e||"")}),ee)if(u.events={},J){if(F=!1,j=function(e){var r,i,a,o,s,l,d,p,f,h,g,m,b,v,w,x,k,C,S;if(e&&e.trim().length){if(e.match(/class=["']*Mso(Normal|List)/i)||e.match(/content=["']*Word.Document/i)){for(r=e.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i),r=r?r[1]:e,r=r.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,""),i=angular.element("<div>"+r+"</div>"),a=angular.element("<div></div>"),o={element:null,lastIndent:[],lastLi:null,isUl:!1},o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0},s=function(e){o.isUl=e,o.element=angular.element(e?"<ul>":"<ol>"),o.lastIndent=[],o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0},o.lastLevelMatch=null},l=0;l<=i[0].childNodes.length;l++)if(i[0].childNodes[l]&&"#text"!==i[0].childNodes[l].nodeName&&(d=i[0].childNodes[l].tagName.toLowerCase(),"p"===d||"h1"===d||"h2"===d||"h3"===d||"h4"===d||"h5"===d||"h6"===d))if(p=angular.element(i[0].childNodes[l]),f=(p.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i)){if(p[0].childNodes.length<2||p[0].childNodes[1].childNodes.length<1)continue;if(h="bullet"===f[1].toLowerCase()||"number"!==f[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(p[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(p[0].childNodes[1].childNodes[0].innerHTML)),g=(p.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),m=parseFloat(g?g[1]:0),b=(p.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i),b&&b[2]&&(m=parseInt(b[2])),b&&(!o.lastLevelMatch||b[1]!==o.lastLevelMatch[1])||!f[3]||"first"===f[3].toLowerCase()||null===o.lastIndent.peek()||o.isUl!==h&&o.lastIndent.peek()===m)s(h),a.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()<m)o.element=angular.element(h?"<ul>":"<ol>"),o.lastLi.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()>m){for(;null!=o.lastIndent.peek()&&o.lastIndent.peek()>m;)if("li"!==o.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(o.element.parent()[0].tagName.toLowerCase()))break;o.element=o.element.parent(),o.lastIndent.pop()}else o.element=o.element.parent();o.isUl="ul"===o.element[0].tagName.toLowerCase(),h!==o.isUl&&(s(h),a.append(o.element))}o.lastLevelMatch=b,m!==o.lastIndent.peek()&&o.lastIndent.push(m),o.lastLi=angular.element("<li>"),o.element.append(o.lastLi),o.lastLi.html(p.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),p.remove()}else s(!1),a.append(p);v=function(e){e=angular.element(e);for(var t=e[0].childNodes.length-1;t>=0;t--)e.after(e[0].childNodes[t]);e.remove()},angular.forEach(a.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&v(e)}),angular.forEach(a.find("font"),v),e=a.html()}else{if(e=e.replace(/<(|\/)meta[^>]*?>/gi,""),e.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(e.match(/<[^>]*?(text-angular)[^>]*?>/)){for(w=angular.element("<div>"+e+"</div>"),w.find("textarea").remove(),x=y.getByAttribute(w,"ta-bind"),k=0;k<x.length;k++){for(C=x[k][0].parentNode.parentNode,S=0;S<x[k][0].childNodes.length;S++)C.parentNode.insertBefore(x[k][0].childNodes[S],C);C.parentNode.removeChild(C)}e=w.html().replace('<br class="Apple-interchange-newline">',"")}}else e.match(/^<span/)&&(e.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(e=e.replace(/<(|\/)span[^>]*?>/gi,"")));e=e.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(e)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(e)===!1&&(e=e.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),e=e.replace(/^[ |\u00A0]+/gm,function(e){var t,n="";for(t=0;t<e.length;t++)n+="&nbsp;";return n}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),E&&(e=E(u,{$html:e})||e),e=t(e,"",ie),c.insertHtml(e,$[0]),n(function(){X.$setViewValue(L()),F=!1,$.removeClass("processing-paste")},0)}else F=!1,$.removeClass("processing-paste")},$.on("paste",u.events.paste=function(e,t){var r,a,o,l,u,c;if(t&&angular.extend(e,t),te||F)return e.stopPropagation(),e.preventDefault(),!1;if(F=!0,$.addClass("processing-paste"),a=(e.originalEvent||e).clipboardData,a&&a.getData&&a.types.length>0){for(o="",l=0;l<a.types.length;l++)o+=" "+a.types[l];return/text\/html/i.test(o)?r=a.getData("text/html"):/text\/plain/i.test(o)&&(r=a.getData("text/plain")),j(r),e.stopPropagation(),e.preventDefault(),!1}u=i.rangy.saveSelection(),c=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>'),s.find("body").append(c),c[0].focus(),n(function(){i.rangy.restoreSelection(u),j(c[0].innerHTML),$[0].focus(),c.remove()},0)}),$.on("cut",u.events.cut=function(e){te?e.preventDefault():n(function(){X.$setViewValue(L())},0)}),$.on("keydown",u.events.keydown=function(e,t){var n,i,a,o,s,l,d;if(t&&angular.extend(e,t),e.specialKey=C(e),m.keyMappings.forEach(function(t){e.specialKey===t.commandKeyCode&&(e.specialKey=void 0),t.testForKey(e)&&(n=t.commandKeyCode),("UndoKey"===t.commandKeyCode||"RedoKey"===t.commandKeyCode)&&(t.enablePropagation||e.preventDefault())}),"undefined"!=typeof n&&(e.specialKey=n),"undefined"==typeof e.specialKey||"UndoKey"===e.specialKey&&"RedoKey"===e.specialKey||(e.preventDefault(),w.sendKeyCommand(u,e)),!te&&("UndoKey"===e.specialKey&&(A(),e.preventDefault()),"RedoKey"===e.specialKey&&(_(),e.preventDefault()),13===e.keyCode&&!e.shiftKey)){if(i=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},o=c.getSelectionElement(),!o.tagName.match(r))return;s=angular.element(T),l=["blockquote","ul","ol"],i(l,o.parentNode.tagName.toLowerCase())&&(/^<br(|\/)>$/i.test(o.innerHTML.trim())&&!o.nextSibling&&(a=angular.element(o),d=a.parent(),d.after(s),a.remove(),0===d.children().length&&d.remove(),c.setSelectionToElementStart(s[0]),e.preventDefault()),/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(o.innerHTML.trim())&&(a=angular.element(o),a.after(s),a.remove(),c.setSelectionToElementStart(s[0]),e.preventDefault()))}}),$.on("keyup",u.events.keyup=function(e,t){var i,a,o,s,l;if(t&&angular.extend(e,t),9===e.keyCode)return i=c.getSelection(),void(i.start.element===$[0]&&$.children().length&&c.setSelectionToElementStart($.children()[0]));if(M&&n.cancel(M),!te&&!ae.test(e.keyCode)){if(""!==T&&13===e.keyCode&&!e.shiftKey){for(a=c.getSelectionElement();!a.tagName.match(r)&&a!==$[0];)a=a.parentNode;a.tagName.toLowerCase()===x.taDefaultWrap||"li"===a.tagName.toLowerCase()||""!==a.innerHTML.trim()&&"<br>"!==a.innerHTML.trim()||(o=angular.element(T),angular.element(a).replaceWith(o),c.setSelectionToElementStart(o[0]))}s=L(),""!==T&&""===s.trim()?(Q(T),c.setSelectionToElementStart($.children()[0])):"<"!==s.substring(0,1)&&""!==x.taDefaultWrap,l=S!==e.keyCode&&oe.test(e.keyCode),U&&n.cancel(U),U=n(function(){P(s,l,!0)},Z.$options.debounce||400),l||(M=n(function(){X.$undoManager.push(s)},250)),S=e.keyCode}}),$.on("blur",u.events.blur=function(){ne=!1,te?(re=!0,X.$render()):P(void 0,void 0,!0)}),x.placeholder&&(h.ie>8||void 0===h.ie)){if(!x.id)throw"textAngular Error: An unique ID is required for placeholders to work";z=a("#"+x.id+".placeholder-text:before",'content: "'+x.placeholder+'"'),u.$on("$destroy",function(){o(z)})}$.on("focus",u.events.focus=function(){ne=!0,$.removeClass("placeholder-text"),W()}),$.on("mouseup",u.events.mouseup=function(){var e=c.getSelection();e.start.element===$[0]&&$.children().length&&c.setSelectionToElementStart($.children()[0])}),$.on("mousedown",u.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else $.on("change blur",u.events.change=u.events.blur=function(){te||X.$setViewValue(L())}),$.on("keydown",u.events.keydown=function(e,t){var n,r,i,a,o;t&&angular.extend(e,t),9===e.keyCode&&(n=this.selectionStart,r=this.selectionEnd,i=$.val(),e.shiftKey?(a=i.lastIndexOf("\n",n),o=i.lastIndexOf("	",n),-1!==o&&o>=a&&($.val(i.substring(0,o)+i.substring(o+1)),this.selectionStart=this.selectionEnd=n-1)):($.val(i.substring(0,n)+"	"+i.substring(r)),this.selectionStart=this.selectionEnd=n+1),e.preventDefault())}),q=function(e,t){var n,r="";for(n=0;t>n;n++)r+=e;return r},H=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},B=function(e,t){var n="",r=e.childNodes;return t++,n+=q("	",t-1)+e.outerHTML.substring(0,4),H(r,function(e,r){var i=r.nodeName.toLowerCase();return"#comment"===i?void(n+="<!--"+r.nodeValue+"-->"):"#text"===i?void(n+=r.textContent):void(r.outerHTML&&(n+="ul"===i||"ol"===i?"\n"+B(r,t):"\n"+q("	",t)+r.outerHTML))}),n+="\n"+q("	",t-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))},X.$formatters.unshift(function(e){var t=angular.element("<div>"+e+"</div>")[0].childNodes;return t.length>0&&(e="",H(t,function(t,n){var r=n.nodeName.toLowerCase();return"#comment"===r?void(e+="<!--"+n.nodeValue+"-->"):"#text"===r?void(e+=n.textContent):void(n.outerHTML&&(e.length>0&&(e+="\n"),e+="ul"===r||"ol"===r?""+B(n,0):""+n.outerHTML))})),e});K=function(e){return u.$emit("ta-element-select",this),e.preventDefault(),!1},V=function(e,t){if(t&&angular.extend(e,t),!p&&!te){p=!0;var r;r=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,u.$emit("ta-drop-event",this,e,r),n(function(){p=!1,P(void 0,void 0,!0)},100)}},W=u["reApplyOnSelectorHandlers"+(x.id||"")]=function(){te||angular.forEach(d,function(e){$.find(e).off("click",K).on("click",K)})},Q=function(e){$[0].innerHTML=e},Y=!1,X.$render=function(){if(!Y){Y=!0;var e=X.$viewValue||"";re||(J&&ne&&($.removeClass("placeholder-text"),G&&n.cancel(G),G=n(function(){ne||($[0].focus(),c.setSelectionToElementEnd($.children()[$.children().length-1])),G=void 0},1)),J?(Q(x.placeholder?""===e?T:e:""===e?T:e),te?$.off("drop",V):(W(),$.on("drop",V))):"textarea"!==$[0].tagName.toLowerCase()&&"input"!==$[0].tagName.toLowerCase()?Q(f(e)):$.val(e)),J&&x.placeholder&&(""===e?ne?$.removeClass("placeholder-text"):$.addClass("placeholder-text"):$.removeClass("placeholder-text")),Y=re=!1}},x.taReadonly&&(te=u.$eval(x.taReadonly),te?($.addClass("ta-readonly"),("textarea"===$[0].tagName.toLowerCase()||"input"===$[0].tagName.toLowerCase())&&$.attr("disabled","disabled"),void 0!==$.attr("contenteditable")&&$.attr("contenteditable")&&$.removeAttr("contenteditable")):($.removeClass("ta-readonly"),"textarea"===$[0].tagName.toLowerCase()||"input"===$[0].tagName.toLowerCase()?$.removeAttr("disabled"):J&&$.attr("contenteditable","true")),u.$watch(x.taReadonly,function(e,t){t!==e&&(e?($.addClass("ta-readonly"),("textarea"===$[0].tagName.toLowerCase()||"input"===$[0].tagName.toLowerCase())&&$.attr("disabled","disabled"),void 0!==$.attr("contenteditable")&&$.attr("contenteditable")&&$.removeAttr("contenteditable"),angular.forEach(d,function(e){$.find(e).on("click",K)}),$.off("drop",V)):($.removeClass("ta-readonly"),"textarea"===$[0].tagName.toLowerCase()||"input"===$[0].tagName.toLowerCase()?$.removeAttr("disabled"):J&&$.attr("contenteditable","true"),angular.forEach(d,function(e){$.find(e).off("click",K)}),$.on("drop",V)),te=e)})),J&&!te&&(angular.forEach(d,function(e){$.find(e).on("click",K)}),$.on("drop",V),$.on("blur",function(){h.webkit&&(g=!0)}))}}}]),p=!1,f=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),f.config([function(){angular.forEach(n,function(e,t){delete n[t]})}]),f.run([function(){if("function"==typeof define&&define.amd)define(function(e){window.rangy=e("rangy"),window.rangy.saveSelection=e("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof exports)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),f.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(e,t,n,r,i,a,o,s,l,u,c,d){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(p,f,h,g){var m,b,v,y,w,$,x,k,C,S,E,T,D,N,O,M=h.serial?h.serial:Math.floor(1e16*Math.random());if(p._name=h.name?h.name:"textAngularEditor"+M,T=function(e,n,r){t(function(){var t=function(){e.off(n,t),r.apply(this,arguments)};e.on(n,t)},100)},C=i(h.taDefaultWrap),angular.extend(p,angular.copy(n),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?p["$undoTaBindtaTextElement"+M]():"redo"===e.toLowerCase()?p["$redoTaBindtaTextElement"+M]():(C(e,!1,t,p.defaultTagAttributes),n&&p["reApplyOnSelectorHandlerstaTextElement"+M](),p.displayElements.text[0].focus())},showHtml:p.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(p.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(p.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(p.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(p.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch(R){u.error(R)}h.taTextEditorSetup&&(p.setup.textEditorSetup=p.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(p.setup.htmlEditorSetup=p.$parent.$eval(h.taHtmlEditorSetup)),p.fileDropHandler=h.taFileDrop?p.$parent.$eval(h.taFileDrop):p.defaultFileDropHandler,x=f[0].innerHTML,f[0].innerHTML="",p.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},p.displayElements.popover.append(p.displayElements.popoverArrow),p.displayElements.popover.append(p.displayElements.popoverContainer),p.displayElements.scrollWindow.append(p.displayElements.popover),p.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),p.showPopover=function(e){p.displayElements.popover.css("display","block"),p.reflowPopover(e),l.addClass(p.displayElements.popover,"in"),T(s.find("body"),"click keyup",function(){p.hidePopover()})},p.reflowPopover=function(e){var t,n;p.displayElements.text[0].offsetHeight-51>e[0].offsetTop?(p.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+p.displayElements.scrollWindow[0].scrollTop+"px"),p.displayElements.popover.removeClass("top").addClass("bottom")):(p.displayElements.popover.css("top",e[0].offsetTop-54+p.displayElements.scrollWindow[0].scrollTop+"px"),p.displayElements.popover.removeClass("bottom").addClass("top")),t=p.displayElements.text[0].offsetWidth-p.displayElements.popover[0].offsetWidth,n=e[0].offsetLeft+e[0].offsetWidth/2-p.displayElements.popover[0].offsetWidth/2,p.displayElements.popover.css("left",Math.max(0,Math.min(t,n))+"px"),p.displayElements.popoverArrow.css("margin-left",Math.min(n,Math.max(0,n-t))-11+"px")},p.hidePopover=function(){p.displayElements.popover.css("display",""),p.displayElements.popoverContainer.attr("style",""),p.displayElements.popoverContainer.attr("class","popover-content"),p.displayElements.popover.removeClass("in")},p.displayElements.resize.overlay.append(p.displayElements.resize.background),angular.forEach(p.displayElements.resize.anchors,function(e){p.displayElements.resize.overlay.append(e)}),p.displayElements.resize.overlay.append(p.displayElements.resize.info),p.displayElements.scrollWindow.append(p.displayElements.resize.overlay),p.reflowResizeOverlay=function(e){e=angular.element(e)[0],p.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),p.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},p.showResizeOverlay=function(e){var t=s.find("body");S=function(n){var r,i,a={width:parseInt(e.attr("width")),height:parseInt(e.attr("height")),x:n.clientX,y:n.clientY};(void 0===a.width||isNaN(a.width))&&(a.width=e[0].offsetWidth),(void 0===a.height||isNaN(a.height))&&(a.height=e[0].offsetHeight),p.hidePopover(),r=a.height/a.width,i=function(t){function n(e){return Math.round(Math.max(0,e))}var i,o,s={x:Math.max(0,a.width+(t.clientX-a.x)),y:Math.max(0,a.height+(t.clientY-a.y))},l=void 0!==h.taResizeForceAspectRatio,u=h.taResizeMaintainAspectRatio,c=l||u&&!t.shiftKey;c&&(i=s.y/s.x,s.x=r>i?s.x:s.y/r,s.y=r>i?s.x*r:s.y),o=angular.element(e),o.css("height",n(s.y)+"px"),o.css("width",n(s.x)+"px"),p.reflowResizeOverlay(e)},t.on("mousemove",i),T(t,"mouseup",function(e){e.preventDefault(),e.stopPropagation(),t.off("mousemove",i),p.$apply(function(){p.hidePopover(),p.updateTaBindtaTextElement()},100)}),n.stopPropagation(),n.preventDefault()},p.displayElements.resize.anchors[3].off("mousedown"),p.displayElements.resize.anchors[3].on("mousedown",S),p.reflowResizeOverlay(e),T(t,"click",function(){p.hideResizeOverlay()})},p.hideResizeOverlay=function(){p.displayElements.resize.anchors[3].off("mousedown",S),p.displayElements.resize.overlay.css("display","")},p.setup.htmlEditorSetup(p.displayElements.html),p.setup.textEditorSetup(p.displayElements.text),p.displayElements.html.attr({id:"taHtmlElement"+M,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":f.attr("ng-model-options")}),p.displayElements.text.attr({id:"taTextElement"+M,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":f.attr("ng-model-options")}),p.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&p.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(p.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),p.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),p.displayElements.scrollWindow.append(p.displayElements.text),f.append(p.displayElements.scrollWindow),f.append(p.displayElements.html),p.displayElements.forminput.attr("name",p._name),f.append(p.displayElements.forminput),h.tabindex&&(f.removeAttr("tabindex"),p.displayElements.text.attr("tabindex",h.tabindex),p.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(p.displayElements.text.attr("placeholder",h.placeholder),p.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(p.displayElements.text.attr("ta-readonly","disabled"),p.displayElements.html.attr("ta-readonly","disabled"),p.disabled=p.$parent.$eval(h.taDisabled),p.$parent.$watch(h.taDisabled,function(e){p.disabled=e,p.disabled?f.addClass(p.classes.disabled):f.removeClass(p.classes.disabled)})),h.taPaste&&(p._pasteHandler=function(e){return d(h.taPaste)(p.$parent,{$html:e})},p.displayElements.text.attr("ta-paste","_pasteHandler($html)")),e(p.displayElements.scrollWindow)(p),e(p.displayElements.html)(p),p.updateTaBindtaTextElement=p["updateTaBindtaTextElement"+M],p.updateTaBindtaHtmlElement=p["updateTaBindtaHtmlElement"+M],f.addClass("ta-root"),p.displayElements.scrollWindow.addClass("ta-text ta-editor "+p.classes.textEditor),p.displayElements.html.addClass("ta-html ta-editor "+p.classes.htmlEditor),p._actionRunning=!1,D=!1,p.startAction=function(){return p._actionRunning=!0,D=o.rangy.saveSelection(),function(){D&&o.rangy.restoreSelection(D)}},p.endAction=function(){p._actionRunning=!1,D&&(p.showHtml?p.displayElements.html[0].focus():p.displayElements.text[0].focus(),o.rangy.removeMarkers(D)),D=!1,p.updateSelectedStyles(),p.showHtml||p["updateTaBindtaTextElement"+M]()},w=function(){p.focussed=!0,f.addClass(p.classes.focussed),k.focus(),f.triggerHandler("focus")},p.displayElements.html.on("focus",w),p.displayElements.text.on("focus",w),$=function(e){return p._actionRunning||s[0].activeElement===p.displayElements.html[0]||s[0].activeElement===p.displayElements.text[0]||(f.removeClass(p.classes.focussed),k.unfocus(),t(function(){p._bUpdateSelectedStyles=!1,f.triggerHandler("blur"),p.focussed=!1},0)),e.preventDefault(),!1},p.displayElements.html.on("blur",$),p.displayElements.text.on("blur",$),p.displayElements.text.on("paste",function(e){f.triggerHandler("paste",e)}),p.queryFormatBlockState=function(e){return!p.showHtml&&e.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},p.queryCommandState=function(e){return p.showHtml?"":s[0].queryCommandState(e)},p.switchView=function(){p.showHtml=!p.showHtml,l.enabled(!1,p.displayElements.html),l.enabled(!1,p.displayElements.text),p.showHtml?t(function(){return l.enabled(!0,p.displayElements.html),l.enabled(!0,p.displayElements.text),p.displayElements.html[0].focus()},100):t(function(){return l.enabled(!0,p.displayElements.html),l.enabled(!0,p.displayElements.text),p.displayElements.text[0].focus()},100)},h.ngModel?(N=!0,g.$render=function(){if(N){N=!1;var e=p.$parent.$eval(h.ngModel);void 0!==e&&null!==e||!x||""===x||g.$setViewValue(x)}p.displayElements.forminput.val(g.$viewValue),p.html=g.$viewValue||""},f.attr("required")&&(g.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})):(p.displayElements.forminput.val(x),p.html=x),p.$watch("html",function(e,t){e!==t&&(h.ngModel&&g.$viewValue!==e&&g.$setViewValue(e),p.displayElements.forminput.val(e))}),h.taTargetToolbars?k=a.registerEditor(p._name,p,h.taTargetToolbars.split(",")):(O=angular.element('<div text-angular-toolbar name="textAngularToolbar'+M+'">'),h.taToolbar&&O.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&O.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&O.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&O.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&O.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&O.attr("ta-focussed-class",h.taFocussedClass),f.prepend(O),e(O)(p.$parent),k=a.registerEditor(p._name,p,["textAngularToolbar"+M])),p.$on("$destroy",function(){a.unregisterEditor(p._name),angular.element(window).off("blur")}),p.$on("ta-element-select",function(e,t){k.triggerElementSelect(e,t)&&p["reApplyOnSelectorHandlerstaTextElement"+M]()}),p.$on("ta-drop-event",function(e,n,r,i){p.displayElements.text[0].focus(),i&&i.files&&i.files.length>0?(angular.forEach(i.files,function(e){try{c.when(p.fileDropHandler(e,p.wrapSelection)||p.fileDropHandler!==p.defaultFileDropHandler&&c.when(p.defaultFileDropHandler(e,p.wrapSelection))).then(function(){p["updateTaBindtaTextElement"+M]()})}catch(t){u.error(t)}}),r.preventDefault(),r.stopPropagation()):t(function(){p["updateTaBindtaTextElement"+M]()},0)}),p._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){p._bUpdateSelectedStyles=!1,p.focussed=!1}),p.updateSelectedStyles=function(){var e;E&&t.cancel(E),void 0!==(e=r.getSelectionElement())&&e.parentNode!==p.displayElements.text[0]?k.updateSelectedStyles(angular.element(e)):k.updateSelectedStyles(),p._bUpdateSelectedStyles&&(E=t(p.updateSelectedStyles,200))},m=function(){return p.focussed?void(p._bUpdateSelectedStyles||(p._bUpdateSelectedStyles=!0,p.$apply(function(){p.updateSelectedStyles()}))):void(p._bUpdateSelectedStyles=!1)},p.displayElements.html.on("keydown",m),p.displayElements.text.on("keydown",m),b=function(){p._bUpdateSelectedStyles=!1},p.displayElements.html.on("keyup",b),p.displayElements.text.on("keyup",b),v=function(e,t){t&&angular.extend(e,t),p.$apply(function(){return k.sendKeyCommand(e)?(p._bUpdateSelectedStyles||p.updateSelectedStyles(),e.preventDefault(),!1):void 0})},p.displayElements.html.on("keypress",v),p.displayElements.text.on("keypress",v),y=function(){p._bUpdateSelectedStyles=!1,p.$apply(function(){p.updateSelectedStyles()})},p.displayElements.html.on("mouseup",y),p.displayElements.text.on("mouseup",y)}}}]),f.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(e,t,n){var r={},i={};return{registerEditor:function(n,a,o){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!a)throw"textAngular Error: An editor requires a scope";if(i[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';var s=[];return angular.forEach(o,function(e){r[e]&&s.push(r[e])}),i[n]={scope:a,toolbars:o,_registerToolbar:function(e){this.toolbars.indexOf(e.name)>=0&&s.push(e)},editorFunctions:{disable:function(){angular.forEach(s,function(e){e.disabled=!0})},enable:function(){angular.forEach(s,function(e){e.disabled=!1})},focus:function(){angular.forEach(s,function(e){e._parent=a,e.disabled=!1,e.focussed=!0,a.focussed=!0})},unfocus:function(){angular.forEach(s,function(e){e.disabled=!0,e.focussed=!1}),a.focussed=!1},updateSelectedStyles:function(e){angular.forEach(s,function(t){angular.forEach(t.tools,function(n){n.activeState&&(t._parent=a,n.active=n.activeState(e))})})},sendKeyCommand:function(n){var r=!1;return(n.ctrlKey||n.metaKey||n.specialKey)&&angular.forEach(t,function(t,i){if(t.commandKeyCode&&(t.commandKeyCode===n.which||t.commandKeyCode===n.specialKey))for(var o=0;o<s.length;o++)if(void 0!==s[o].tools[i]){e.call(s[o].tools[i],a),r=!0;break}}),r},triggerElementSelect:function(e,n){var r,i,o,l,u,c=function(e,t){var n,r=!0;for(n=0;n<t.length;n++)r=r&&e.attr(t[n]);return r},d=[],p={},f=!1;if(n=angular.element(n),r=!1,angular.forEach(t,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(n))&&(r=r||angular.isArray(e.onElementSelect.onlyWithAttrs)&&c(n,e.onElementSelect.onlyWithAttrs),(!e.onElementSelect.onlyWithAttrs||c(n,e.onElementSelect.onlyWithAttrs))&&(p[t]=e))}),r?(angular.forEach(p,function(e,t){e.onElementSelect.onlyWithAttrs&&c(n,e.onElementSelect.onlyWithAttrs)&&d.push({name:t,tool:e})}),d.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(p,function(e,t){d.push({name:t,tool:e})}),d.length>0)for(i=0;i<d.length;i++){for(o=d[i].tool,l=d[i].name,u=0;u<s.length;u++)if(void 0!==s[u].tools[l]){o.onElementSelect.action.call(s[u].tools[l],e,n,a),f=!0;break}if(f)break}return f}}},i[n].editorFunctions},retrieveEditor:function(e){return i[e]},unregisterEditor:function(e){delete i[e]},registerToolbar:function(e){if(!e)throw"textAngular Error: A toolbar requires a scope";if(!e.name||""===e.name)throw"textAngular Error: A toolbar requires a name";if(r[e.name])throw'textAngular Error: A toolbar with name "'+e.name+'" already exists';r[e.name]=e,angular.forEach(i,function(t){t._registerToolbar(e)})},retrieveToolbar:function(e){return r[e]},retrieveToolbarsViaEditor:function(e){
var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete r[e]},updateToolsDisplay:function(e){var t=this;angular.forEach(e,function(e,n){t.updateToolDisplay(n,e)})},resetToolsDisplay:function(){var e=this;angular.forEach(t,function(t,n){e.resetToolDisplay(n)})},updateToolDisplay:function(e,t){var n=this;angular.forEach(r,function(r,i){n.updateToolbarToolDisplay(i,e,t)})},resetToolDisplay:function(e){var t=this;angular.forEach(r,function(n,r){t.resetToolbarToolDisplay(r,e)})},updateToolbarToolDisplay:function(e,t,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(n,t[n],!0)},removeTool:function(e){delete t[e],angular.forEach(r,function(t){var n,r,i;for(delete t.tools[e],n=0;n<t.toolbar.length;n++){for(i=0;i<t.toolbar[n].length;i++){if(t.toolbar[n][i]===e){r={group:n,index:i};break}if(void 0!==r)break}void 0!==r&&(t.toolbar[r.group].slice(r.index,1),t._$element.children().eq(r.group).children().eq(r.index).remove())}})},addTool:function(e,t,i,a){n(e,t),angular.forEach(r,function(n){n.addTool(e,t,i,a)})},addToolToToolbar:function(e,t,i,a,o){n(e,t),r[i].addTool(e,t,a,o)},refreshEditor:function(e){if(!i[e])throw'textAngular Error: No Editor with name "'+e+'" exists';i[e].scope.updateTaBindtaTextElement(),i[e].scope.$$phase||i[e].scope.$digest()},sendKeyCommand:function(e,t){var n=i[e._name];return n&&n.editorFunctions.sendKeyCommand(t)?(e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1):void 0}}}]),f.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(e,t,n,r,i,a){return{scope:{name:"@"},restrict:"EA",link:function(o,s,l){var u,c;if(!o.name||""===o.name)throw"textAngular Error: A toolbar requires a name";angular.extend(o,angular.copy(n)),l.taToolbar&&(o.toolbar=o.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(o.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(o.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(o.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(o.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(o.classes.focussed=l.taFocussedClass),o.disabled=!0,o.focussed=!1,o._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+o.classes.toolbar),o.$watch("focussed",function(){o.focussed?s.addClass(o.classes.focussed):s.removeClass(o.classes.focussed)}),u=function(t,n){var r,i,a;return r=angular.element(t&&t.display?t.display:"<button type='button'>"),r.addClass(t&&t["class"]?t["class"]:o.classes.toolbarButton),r.attr("name",n.name),r.attr("ta-button","ta-button"),r.attr("ng-disabled","isDisabled()"),r.attr("tabindex","-1"),r.attr("ng-click","executeAction()"),r.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&r.attr("title",t.tooltiptext),!t||t.display||n._display||(r[0].innerHTML="",t.buttontext&&(r[0].innerHTML=t.buttontext),t.iconclass&&(i=angular.element("<i>"),a=r[0].innerHTML,i.addClass(t.iconclass),r[0].innerHTML="",r.append(i),a&&""!==a&&r.append("&nbsp;"+a))),n._lastToolDefinition=angular.copy(t),e(r)(n)},o.tools={},o._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}},c={$window:a,$editor:function(){return o._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(e){return e?o.classes.toolbarButtonActive:""},executeAction:i},angular.forEach(o.toolbar,function(e){var t=angular.element("<div>");t.addClass(o.classes.toolbarGroup),angular.forEach(e,function(e){o.tools[e]=angular.extend(o.$new(!0),r[e],c,{name:e}),o.tools[e].$element=u(r[e],o.tools[e]),t.append(o.tools[e].$element)}),s.append(t)}),o.updateToolDisplay=function(e,t,n){var r,i=o.tools[e];if(i){if(i._lastToolDefinition&&!n&&(t=angular.extend({},i._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display,r=u(t,i),i.$element.replaceWith(r),i.$element=r}},o.addTool=function(e,t,n,i){o.tools[e]=angular.extend(o.$new(!0),r[e],c,{name:e}),o.tools[e].$element=u(r[e],o.tools[e]);var a;void 0===n&&(n=o.toolbar.length-1),a=angular.element(s.children()[n]),void 0===i?(a.append(o.tools[e].$element),o.toolbar[n][o.toolbar[n].length-1]=e):(a.children().eq(i).after(o.tools[e].$element),o.toolbar[n][i]=e)},t.registerToolbar(o),o.$on("$destroy",function(){t.unregisterToolbar(o.name)})}}}])}();var n={};angular.module("textAngularSetup",[]).constant("taRegisterTool",t).value("taTools",n).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)?(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(e,t){return{imgOnSelectAction:function(e,t,n){var r,i,a,o,s,l,u,c,d,p,f=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px"),r=n.displayElements.popoverContainer,r.empty(),i=angular.element('<div class="btn-group" style="padding-right: 6px;">'),a=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>'),a.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),f()}),o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>'),o.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),f()}),s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>'),s.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),f()}),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>'),l.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),f()}),i.append(a),i.append(o),i.append(s),i.append(l),r.append(i),i=angular.element('<div class="btn-group" style="padding-right: 6px;">'),u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>'),u.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),f()}),c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>'),c.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),f()}),d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>'),d.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),f()}),i.append(u),i.append(d),i.append(c),r.append(i),i=angular.element('<div class="btn-group">'),p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>'),p.on("click",function(e){e.preventDefault(),t.remove(),f()}),i.append(p),r.append(i),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(n,r,i){var a,o,s,l,u,c;n.preventDefault(),i.displayElements.popover.css("width","436px"),a=i.displayElements.popoverContainer,a.empty(),a.css("line-height","28px"),o=angular.element('<a href="'+r.attr("href")+'" target="_blank">'+r.attr("href")+"</a>"),o.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),a.append(o),s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>'),l.on("click",function(n){n.preventDefault();var a=e.prompt(t.insertLink.dialogPrompt,r.attr("href"));a&&""!==a&&"http://"!==a&&(r.attr("href",a),i.updateTaBindtaTextElement()),i.hidePopover()}),s.append(l),u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>'),u.on("click",function(e){e.preventDefault(),r.replaceWith(r.contents()),i.updateTaBindtaTextElement(),i.hidePopover()}),s.append(u),c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"</button>"),"_blank"===r.attr("target")&&c.addClass("active"),c.on("click",function(e){e.preventDefault(),r.attr("target","_blank"===r.attr("target")?"":"_blank"),c.toggleClass("active"),i.updateTaBindtaTextElement()}),s.append(c),a.append(s),i.showPopover(r)},extractYoutubeVideoId:function(e){var t=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,n=e.match(t);return n&&n[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(e,t,n,r,i,a,o){var s,l,u={};if(a("",u),o.forceTextAngularSanitize===!0&&"taSanitize"!==u.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");e("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}}),s=function(e){return function(){return this.$editor().queryFormatBlockState(e)}},l=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")},angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){e(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:n.heading.tooltip+t.charAt(1),action:l,activeState:s(t.toLowerCase())})}),e("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),e("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),e("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),e("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),e("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),e("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),e("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),e("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),e("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),t=t||this.$editor().queryCommandState("justifyLeft")}}),e("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="right"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyRight")}}),e("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:n.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;return e&&(t="justify"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyFull")}}),e("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="center"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyCenter")}}),e("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),e("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),e("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),e("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),e("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),e("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(e,t){var n,i,a,o,s,l,u,c,d,p,f,h,g;if(this.$editor().wrapSelection("removeFormat",null),i=angular.element(r.getSelectionElement()),a=function(e){e=angular.element(e);var t=e;angular.forEach(e.children(),function(e){var n=angular.element("<p></p>");n.html(angular.element(e).html()),t.after(n),t=n}),e.remove()},angular.forEach(i.find("ul"),a),angular.forEach(i.find("ol"),a),"li"===i[0].tagName.toLowerCase()){for(o=i[0].parentNode.childNodes,s=[],l=[],u=!1,n=0;n<o.length;n++)o[n]===i[0]?u=!0:u?l.push(o[n]):s.push(o[n]);if(c=angular.element(i[0].parentNode),d=angular.element("<p></p>"),d.html(angular.element(i[0]).html()),0===s.length||0===l.length)0===l.length?c.after(d):c[0].parentNode.insertBefore(d[0],c[0]),0===s.length&&0===l.length?c.remove():angular.element(i[0]).remove();else{for(p=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">"),f=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">"),n=0;n<s.length;n++)p.append(angular.element(s[n]));for(n=0;n<l.length;n++)f.append(angular.element(l[n]));c.after(f),c.after(d),c.after(p),c.remove()}r.setSelectionToElementEnd(d[0])}h=this.$editor(),g=function(e){e=angular.element(e),e[0]!==h.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),g)},angular.forEach(i,g),"li"!==i[0].tagName.toLowerCase()&&"ol"!==i[0].tagName.toLowerCase()&&"ul"!==i[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),t()}}),e("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var e;return e=t.prompt(n.insertImage.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("insertImage",e,!0):void 0},onElementSelect:{element:"img",action:i.imgOnSelectAction}}),e("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var e,r,a=t.prompt(n.insertVideo.dialogPrompt,"https://");return a&&""!==a&&"https://"!==a&&(videoId=i.extractYoutubeVideoId(a),videoId)?(e="https://www.youtube.com/embed/"+videoId,r='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+e+'" contenteditable="false" allowfullscreen="true" frameborder="0" />',this.$editor().wrapSelection("insertHTML",r,!0)):void 0},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:i.imgOnSelectAction}}),e("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;return e=t.prompt(n.insertLink.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("createLink",e,!0):void 0},activeState:function(e){return e?"A"===e[0].tagName:!1},onElementSelect:{element:"a",action:i.aOnSelectAction}}),e("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerHTML||"",n=0;return""!==t.replace(/\s*<[^>]*?>\s*/g,"")&&(n=t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}}),e("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerText||e[0].textContent,n=t.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=n,this.$editor().charcount=n,!1}})}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(e,t,n,r){var i=r.has("$animateCss")?r.get("$animateCss"):null;return{link:function(r,a,o){function s(){a.hasClass("collapse")&&a.hasClass("in")||t.resolve(d(r)).then(function(){a.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),i?i(a,{addClass:"in",easing:"ease",to:{height:a[0].scrollHeight+"px"}}).start()["finally"](l):e.addClass(a,"in",{to:{height:a[0].scrollHeight+"px"}}).then(l)})}function l(){a.removeClass("collapsing").addClass("collapse").css({height:"auto"}),p(r)}function u(){return a.hasClass("collapse")||a.hasClass("in")?void t.resolve(f(r)).then(function(){a.css({height:a[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),i?i(a,{removeClass:"in",to:{height:"0"}}).start()["finally"](c):e.removeClass(a,"in",{to:{height:"0"}}).then(c)}):c()}function c(){a.css({height:"0"}),a.removeClass("collapsing").addClass("collapse"),h(r)}var d=n(o.expanding),p=n(o.expanded),f=n(o.collapsing),h=n(o.collapsed);r.$eval(o.uibCollapse)||a.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css({height:"auto"}),r.$watch(o.uibCollapse,function(e){e?u():s()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;i&&angular.forEach(this.groups,function(e){e!==r&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,r){r.addGroup(e),e.openClass=n.openClass||"panel-open",e.panelClass=n.panelClass||"panel-default",e.$watch("isOpen",function(n){t.toggleClass(e.openClass,!!n),n&&r.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)};var i="accordiongroup-"+e.$id+"-"+Math.floor(1e4*Math.random());e.headingId=i+"-tab",e.panelId=i+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,t,n,r){e.$watch(function(){return r[n.uibAccordionTransclude]},function(e){if(e){var n=angular.element(t[0].querySelector("[uib-accordion-header]"));n.html(""),n.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(e,t,n,r){e.closeable=!!t.close;var i=angular.isDefined(t.dismissOnTimeout)?n(t.dismissOnTimeout)(e.$parent):null;i&&r(function(){e.close()},parseInt(i,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(e){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,r,i){var a=i[0],o=i[1],s=e(r.uibUncheckable);n.find("input").css({display:"none"}),o.$render=function(){n.toggleClass(a.activeClass,angular.equals(o.$modelValue,t.$eval(r.uibBtnRadio)))},n.on(a.toggleEvent,function(){if(!r.disabled){var e=n.hasClass(a.activeClass);(!e||angular.isDefined(r.uncheckable))&&t.$apply(function(){o.$setViewValue(e?null:t.$eval(r.uibBtnRadio)),o.$render()})}}),r.uibUncheckable&&t.$watch(s,function(e){r.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,n,r){function i(){return o(n.btnCheckboxTrue,!0)}function a(){return o(n.btnCheckboxFalse,!1)}function o(t,n){return angular.isDefined(t)?e.$eval(t):n}var s=r[0],l=r[1];t.find("input").css({display:"none"}),l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,i()))},t.on(s.toggleEvent,function(){n.disabled||e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?a():i()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(e,t,n,r,i){function a(){for(;y.length;)y.shift()}function o(e){for(var t=0;t<m.length;t++)m[t].slide.active=t===e}function s(n,r,l){if(!w){if(angular.extend(n,{direction:l}),angular.extend(m[v].slide||{},{direction:l}),i.enabled(t)&&!e.$currentTransition&&m[r].element&&g.slides.length>1){m[r].element.data(b,n.direction);var u=g.getCurrentIndex();angular.isNumber(u)&&m[u].element&&m[u].element.data(b,n.direction),e.$currentTransition=!0,i.on("addClass",m[r].element,function(t,n){var r,o,l;"close"===n&&(e.$currentTransition=null,i.off("addClass",t),y.length&&(r=y.pop().slide,o=r.index,l=o>g.getCurrentIndex()?"next":"prev",a(),s(r,o,l)))})}e.active=n.index,v=n.index,o(r),d()}}function l(e){for(var t=0;t<m.length;t++)if(m[t].slide===e)return t}function u(){f&&(n.cancel(f),f=null)}function c(t){t.length||(e.$currentTransition=null,a())}function d(){u();var t=+e.interval;!isNaN(t)&&t>0&&(f=n(p,t))}function p(){var t=+e.interval;h&&!isNaN(t)&&t>0&&m.length?e.next():e.pause()}var f,h,g=this,m=g.slides=e.slides=[],b="uib-slideDirection",v=e.active,y=[],w=!1;g.addSlide=function(t,n){m.push({slide:t,element:n}),m.sort(function(e,t){return+e.slide.index-+t.slide.index}),(t.index===e.active||1===m.length&&!angular.isNumber(e.active))&&(e.$currentTransition&&(e.$currentTransition=null),v=t.index,e.active=t.index,o(v),g.select(m[l(t)]),1===m.length&&e.play())},g.getCurrentIndex=function(){for(var e=0;e<m.length;e++)if(m[e].slide.index===v)return e},g.next=e.next=function(){var t=(g.getCurrentIndex()+1)%m.length;return 0===t&&e.noWrap()?void e.pause():g.select(m[t],"next")},g.prev=e.prev=function(){var t=g.getCurrentIndex()-1<0?m.length-1:g.getCurrentIndex()-1;return e.noWrap()&&t===m.length-1?void e.pause():g.select(m[t],"prev")},g.removeSlide=function(t){var n=l(t),r=y.indexOf(m[n]);-1!==r&&y.splice(r,1),m.splice(n,1),m.length>0&&v===n?n>=m.length?(v=m.length-1,e.active=v,o(v),g.select(m[m.length-1])):(v=n,e.active=v,o(v),g.select(m[n])):v>n&&(v--,e.active=v),0===m.length&&(v=null,e.active=null,a())},g.select=e.select=function(t,n){var r=l(t.slide);void 0===n&&(n=r>g.getCurrentIndex()?"next":"prev"),t.slide.index===v||e.$currentTransition?t&&t.slide.index!==v&&e.$currentTransition&&y.push(m[r]):s(t.slide,r,n)},e.indexOfSlide=function(e){return+e.slide.index},e.isActive=function(t){return e.active===t.slide.index},e.isPrevDisabled=function(){return 0===e.active&&e.noWrap()},e.isNextDisabled=function(){return e.active===m.length-1&&e.noWrap()},e.pause=function(){e.noPause||(h=!1,u())},e.play=function(){h||(h=!0,d())},e.$on("$destroy",function(){w=!0,u()}),e.$watch("noTransition",function(e){i.enabled(t,!e)}),e.$watch("interval",d),e.$watchCollection("slides",c),e.$watch("active",function(e){var t,n;if(angular.isNumber(e)&&v!==e){for(t=0;t<m.length;t++)if(m[t].slide.index===e){e=t;break}n=m[e],n&&(o(e),g.select(m[e]),v=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(e,t,n,r){r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)})}}}).animation(".item",["$animateCss",function(e){function t(e,t,n){e.removeClass(t),n&&n()}var n="uib-slideDirection";return{beforeAddClass:function(r,i,a){var o,s,l,u;return"active"===i?(o=!1,s=r.data(n),l="next"===s?"left":"right",u=t.bind(this,r,l+" "+s,a),r.addClass(s),e(r,{addClass:l}).start().done(u),function(){o=!0}):void a()},beforeRemoveClass:function(r,i,a){var o,s,l,u;return"active"===i?(o=!1,
s=r.data(n),l="next"===s?"left":"right",u=t.bind(this,r,l,a),e(r,{addClass:l}).start().done(u),function(){o=!0}):void a()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(e,t,n,r){function i(e,t){var n,i,a=[],o=e.split(""),s=e.indexOf("'");if(s>-1){for(n=!1,e=e.split(""),i=s;i<e.length;i++)n?("'"===e[i]&&(i+1<e.length&&"'"===e[i+1]?(e[i+1]="$",o[i+1]=""):(o[i]="",n=!1)),e[i]="$"):"'"===e[i]&&(e[i]="$",o[i]="",n=!0);e=e.join("")}return angular.forEach(f,function(n){var r,i,s=e.indexOf(n.key);if(s>-1){for(e=e.split(""),o[s]="("+n.regex+")",e[s]="$",r=s+1,i=s+n.key.length;i>r;r++)o[r]="",e[r]="$";e=e.join(""),a.push({index:s,key:n.key,apply:n[t],matcher:n.regex})}}),{regex:new RegExp("^"+o.join("")+"$"),map:r(a,"index")}}function a(e,t,n){return 1>n?!1:1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}function o(e){return parseInt(e,10)}function s(e,t){return e&&t?d(e,t):e}function l(e,t){return e&&t?d(e,t,!0):e}function u(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function c(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function d(e,t,n){n=n?-1:1;var r=u(t,e.getTimezoneOffset());return c(e,n*(r-e.getTimezoneOffset()))}var p,f,h=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){p=t.id,this.parsers={},this.formatters={},f=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=69>e?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:t.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:t.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],r=t[2],i=t[3];this.hours+=o(n+r),this.minutes+=o(n+i)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}]},this.init(),this.filter=function(e,n){var r,a,o;return angular.isDate(e)&&!isNaN(e)&&n?(n=t.DATETIME_FORMATS[n]||n,t.id!==p&&this.init(),this.formatters[n]||(this.formatters[n]=i(n,"formatter")),r=this.formatters[n],a=r.map,o=n,a.reduce(function(t,n,r){var i,s=o.match(new RegExp("(.*)"+n.key));return s&&angular.isString(s[1])&&(t+=s[1],o=o.replace(s[1]+n.key,"")),i=r===a.length-1?o:"",n.apply?t+n.apply.call(null,e)+i:t+i},"")):""},this.parse=function(n,r,o){var s,l,u,c,d,f,g,m,b,v,y,w;if(!angular.isString(n)||!r)return n;if(r=t.DATETIME_FORMATS[r]||r,r=r.replace(h,"\\$&"),t.id!==p&&this.init(),this.parsers[r]||(this.parsers[r]=i(r,"apply")),s=this.parsers[r],l=s.regex,u=s.map,c=n.match(l),d=!1,c&&c.length){for(angular.isDate(o)&&!isNaN(o.getTime())?f={year:o.getFullYear(),month:o.getMonth(),date:o.getDate(),hours:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),milliseconds:o.getMilliseconds()}:(o&&e.warn("dateparser:","baseDate is not a valid date"),f={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0}),m=1,b=c.length;b>m;m++)v=u[m-1],"Z"===v.matcher&&(d=!0),v.apply&&v.apply.call(f,c[m]);return y=d?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,w=d?Date.prototype.setUTCHours:Date.prototype.setHours,a(f.year,f.month,f.date)&&(!angular.isDate(o)||isNaN(o.getTime())||d?(g=new Date(0),y.call(g,f.year,f.month,f.date),w.call(g,f.hours||0,f.minutes||0,f.seconds||0,f.milliseconds||0)):(g=new Date(o),y.call(g,f.year,f.month,f.date),w.call(g,f.hours,f.minutes,f.seconds,f.milliseconds))),g}},this.toTimezone=s,this.fromTimezone=l,this.timezoneToOffset=u,this.addDateMinutes=c,this.convertTimezoneToLocal=d}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(e){var t=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,n=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(r,i){function a(e,t){l.push(e),u.push({scope:e,element:t}),h.forEach(function(t){o(t,e)}),e.$on("$destroy",s)}function o(t,r){var i,a=t.match(n),o=r.$eval(a[1]),s=a[2],l=c[t];l||(i=function(t){var n=null;u.some(function(e){var r=e.scope.$eval(p);return r===t?(n=e,!0):void 0}),l.lastActivated!==n&&(l.lastActivated&&e.removeClass(l.lastActivated.element,o),n&&e.addClass(n.element,o),l.lastActivated=n)},c[t]=l={lastActivated:null,scope:r,watchFn:i,compareWithExp:s,watcher:r.$watch(s,i)}),l.watchFn(r.$eval(s))}function s(e){var t,n=e.targetScope,r=l.indexOf(n);l.splice(r,1),u.splice(r,1),l.length?(t=l[0],angular.forEach(c,function(e){e.scope===n&&(e.watcher=t.$watch(e.compareWithExp,e.watchFn),e.scope=t)})):c={}}var l=[],u=[],c={},d=i.uibIsClass.match(t),p=d[2],f=d[1],h=f.split(",");return a}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(e,t,n,r,i,a,o,s,l,u,c){function d(t){e.datepickerMode=t,e.datepickerOptions.datepickerMode=t}{var p,f=this,h={$setViewValue:angular.noop},g={},m=[];!!t.datepickerOptions}e.datepickerOptions||(e.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:s.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":f[t]=angular.isDefined(e.datepickerOptions[t])?r(e.datepickerOptions[t])(e.$parent):s[t];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":f[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:s[t];break;case"startingDay":f.startingDay=angular.isDefined(e.datepickerOptions.startingDay)?e.datepickerOptions.startingDay:angular.isNumber(s.startingDay)?s.startingDay:(i.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?f[t]=c.fromTimezone(new Date(e),g.timezone):(l&&a.warn("Literal date support has been deprecated, please switch to date object usage"),f[t]=new Date(o(e,"medium"))):f[t]=s[t]?c.fromTimezone(new Date(s[t]),g.timezone):null,f.refreshView()});break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(n){f[t]=e[t]=angular.isDefined(n)?n:datepickerOptions[t],("minMode"===t&&f.modes.indexOf(e.datepickerOptions.datepickerMode)<f.modes.indexOf(f[t])||"maxMode"===t&&f.modes.indexOf(e.datepickerOptions.datepickerMode)>f.modes.indexOf(f[t]))&&(e.datepickerMode=f[t],e.datepickerOptions.datepickerMode=f[t])}):f[t]=e[t]=s[t]||null}}),e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&m.push(e.$parent.$watch(t.ngDisabled,function(t){e.disabled=t,f.refreshView()})),e.isActive=function(t){return 0===f.compare(t.date,f.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(t){h=t,g=t.$options||s.ngModelOptions,e.datepickerOptions.initDate?(f.activeDate=c.fromTimezone(e.datepickerOptions.initDate,g.timezone)||new Date,e.$watch("datepickerOptions.initDate",function(e){e&&(h.$isEmpty(h.$modelValue)||h.$invalid)&&(f.activeDate=c.fromTimezone(e,g.timezone),f.refreshView())})):f.activeDate=new Date,this.activeDate=h.$modelValue?c.fromTimezone(new Date(h.$modelValue),g.timezone):c.fromTimezone(new Date,g.timezone),h.$render=function(){f.render()}},this.render=function(){if(h.$viewValue){var e=new Date(h.$viewValue),t=!isNaN(e);t?this.activeDate=c.fromTimezone(e,g.timezone):u||a.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=h.$viewValue?new Date(h.$viewValue):null;t=c.fromTimezone(t,g.timezone),h.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,n){var r,i,a,o=h.$viewValue?new Date(h.$viewValue):null;return o=c.fromTimezone(o,g.timezone),r=new Date,r=c.fromTimezone(r,g.timezone),i=this.compare(t,r),a={date:t,label:c.filter(t,n),selected:o&&0===this.compare(t,o),disabled:this.isDisabled(t),past:0>i,current:0===i,future:i>0,customClass:this.customClass(t)||null},o&&0===this.compare(t,o)&&(e.selectedDt=a),f.activeDate&&0===this.compare(a.date,f.activeDate)&&(e.activeDt=a),a},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===f.minMode){var n=h.$viewValue?c.fromTimezone(new Date(h.$viewValue),g.timezone):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n=c.toTimezone(n,g.timezone),h.$setViewValue(n),h.$render()}else f.activeDate=t,d(f.modes[f.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode");e.$broadcast("uib:datepicker.focus")},e.move=function(e){var t=f.activeDate.getFullYear()+e*(f.step.years||0),n=f.activeDate.getMonth()+e*(f.step.months||0);f.activeDate.setFullYear(t,n,1),f.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===f.maxMode&&1===t||e.datepickerMode===f.minMode&&-1===t||(d(f.modes[f.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"},p=function(){f.element[0].focus()},e.$on("uib:datepicker.focus",p),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),f.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(f.isDisabled(f.activeDate))return;e.select(f.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(f.handleKeyDown(n,t),f.refreshView()):e.toggleMode("up"===n?1:-1)},e.$on("$destroy",function(){for(;m.length;)m.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function r(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?a[t]:29}function i(e){var t,n=new Date(e);return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}var a=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,r=new Array(t),i=new Date(e),a=0;t>a;)n=new Date(i),r[a++]=n,i.setDate(i.getDate()+1);return r},this._refreshView=function(){var t,r,a,o,s,l,u,c,d,p=this.activeDate.getFullYear(),f=this.activeDate.getMonth(),h=new Date(this.activeDate);for(h.setFullYear(p,f,1),t=this.startingDay-h.getDay(),r=t>0?7-t:-t,a=new Date(h),r>0&&a.setDate(-r+1),o=this.getDates(a,42),s=0;42>s;s++)o[s]=angular.extend(this.createDateObject(o[s],this.formatDay),{secondary:o[s].getMonth()!==f,uid:e.uniqueId+"-"+s});for(e.labels=new Array(7),l=0;7>l;l++)e.labels[l]={abbr:n(o[l].date,this.formatDayHeader),full:n(o[l].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(o,7),e.showWeeks)for(e.weekNumbers=[],u=(11-this.startingDay)%7,c=e.rows.length,d=0;c>d;d++)e.weekNumbers.push(i(e.rows[d][u].date))},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e){var t,n=this.activeDate.getDate();"left"===e?n-=1:"up"===e?n-=7:"right"===e?n+=1:"down"===e?n+=7:"pageup"===e||"pagedown"===e?(t=this.activeDate.getMonth()+("pageup"===e?-1:1),this.activeDate.setMonth(t,1),n=Math.min(r(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)):"home"===e?n=1:"end"===e&&(n=r(this.activeDate.getFullYear(),this.activeDate.getMonth())),this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){var t,r,i=new Array(12),a=this.activeDate.getFullYear();for(r=0;12>r;r++)t=new Date(this.activeDate),t.setFullYear(a,r,1),i[r]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+r});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(i,3)},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),r=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e){var t,n=this.activeDate.getMonth();"left"===e?n-=1:"up"===e?n-=3:"right"===e?n+=1:"down"===e?n+=3:"pageup"===e||"pagedown"===e?(t=this.activeDate.getFullYear()+("pageup"===e?-1:1),this.activeDate.setFullYear(t)):"home"===e?n=0:"end"===e&&(n=11),this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t){function n(e){return parseInt((e-1)/i,10)*i+1}var r,i;this.element=t,this.yearpickerInit=function(){r=this.yearColumns,i=this.yearRows*r,this.step={years:i}},this._refreshView=function(){var t,a,o,s=new Array(i);for(a=0,o=n(this.activeDate.getFullYear());i>a;a++)t=new Date(this.activeDate),t.setFullYear(o+a,0,1),s[a]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+a});e.title=[s[0].label,s[i-1].label].join(" - "),e.rows=this.split(s,r),e.columns=r},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e){var t=this.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=r:"right"===e?t+=1:"down"===e?t+=r:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*i:"home"===e?t=n(this.activeDate.getFullYear()):"end"===e&&(t=n(this.activeDate.getFullYear())+i-1),this.activeDate.setFullYear(t)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,r){var i=r[0],a=r[1];i.init(a)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(e,t,n,r){var i=r[0],a=r[1];a.init(i)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(e,t,n,r){var i=r[0],a=r[1];a.init(i)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(e,t,n,r){var i=r[0];angular.extend(i,r[1]),i.yearpickerInit(),i.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,r,i={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},a={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},o=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function r(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var i=n.offsetParent||e[0].documentElement;i&&i!==e[0].documentElement&&r(i);)i=i.offsetParent;return i||e[0].documentElement},scrollbarWidth:function(i){var a,o;return i?(angular.isUndefined(r)&&(a=e.find("body"),a.addClass("uib-position-body-scrollbar-measure"),r=t.innerWidth-a[0].clientWidth,r=isFinite(r)?r:0,a.removeClass("uib-position-body-scrollbar-measure")),r):(angular.isUndefined(n)&&(o=angular.element('<div class="uib-position-scrollbar-measure"></div>'),e.find("body").append(o),n=o[0].offsetWidth-o[0].clientWidth,n=isFinite(n)?n:0,o.remove()),n)},scrollbarPadding:function(e){var n,r,i,a,s;return e=this.getRawNode(e),n=t.getComputedStyle(e),r=this.parseStyle(n.paddingRight),i=this.parseStyle(n.paddingBottom),a=this.scrollParent(e,!1,!0),s=this.scrollbarWidth(a,o.test(a.tagName)),{scrollbarWidth:s,widthOverflow:a.scrollWidth>a.clientWidth,right:r+s,originalRight:r,heightOverflow:a.scrollHeight>a.clientHeight,bottom:i+s,originalBottom:i}},isScrollable:function(e,n){var r,a;return e=this.getRawNode(e),r=n?i.hidden:i.normal,a=t.getComputedStyle(e),r.test(a.overflow+a.overflowY+a.overflowX)},scrollParent:function(n,r,a){var o,s,l,u,c,d;if(n=this.getRawNode(n),o=r?i.hidden:i.normal,s=e[0].documentElement,l=t.getComputedStyle(n),a&&o.test(l.overflow+l.overflowY+l.overflowX))return n;if(u="absolute"===l.position,c=n.parentElement||s,c===s||"fixed"===l.position)return s;for(;c.parentElement&&c!==s&&(d=t.getComputedStyle(c),u&&"static"!==d.position&&(u=!1),u||!o.test(d.overflow+d.overflowY+d.overflowX));)c=c.parentElement;return c},position:function(n,r){var i,a,o,s;return n=this.getRawNode(n),i=this.offset(n),r&&(a=t.getComputedStyle(n),i.top-=this.parseStyle(a.marginTop),i.left-=this.parseStyle(a.marginLeft)),o=this.offsetParent(n),s={top:0,left:0},o!==e[0].documentElement&&(s=this.offset(o),s.top+=o.clientTop-o.scrollTop,s.left+=o.clientLeft-o.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top-s.top),left:Math.round(i.left-s.left)}},offset:function(n){n=this.getRawNode(n);var r=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(r.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,i){var a,o,s,l,u;return n=this.getRawNode(n),i=i!==!1?!0:!1,a=n.getBoundingClientRect(),o={top:0,left:0,bottom:0,right:0},s=r?e[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect(),o.top=l.top+s.clientTop,o.left=l.left+s.clientLeft,s===e[0].documentElement&&(o.top+=t.pageYOffset,o.left+=t.pageXOffset),o.bottom=o.top+s.clientHeight,o.right=o.left+s.clientWidth,i&&(u=t.getComputedStyle(s),o.top+=this.parseStyle(u.paddingTop),o.bottom-=this.parseStyle(u.paddingBottom),o.left+=this.parseStyle(u.paddingLeft),o.right-=this.parseStyle(u.paddingRight)),{top:Math.round(a.top-o.top),bottom:Math.round(o.bottom-a.bottom),left:Math.round(a.left-o.left),right:Math.round(o.right-a.right)}},parsePlacement:function(e){var t=a.auto.test(e);return t&&(e=e.replace(a.auto,"")),e=e.split("-"),e[0]=e[0]||"top",a.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",a.secondary.test(e[1])||(e[1]="center"),e[2]=t?!0:!1,e},positionElements:function(e,n,r,i){var o,s,l,u,c,d,p,f,h;switch(e=this.getRawNode(e),n=this.getRawNode(n),o=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight"),r=this.parsePlacement(r),l=i?this.offset(e):this.position(e),u={top:0,left:0,placement:""},r[2]&&(c=this.viewportOffset(e,i),d=t.getComputedStyle(n),p={width:o+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))},r[0]="top"===r[0]&&p.height>c.top&&p.height<=c.bottom?"bottom":"bottom"===r[0]&&p.height>c.bottom&&p.height<=c.top?"top":"left"===r[0]&&p.width>c.left&&p.width<=c.right?"right":"right"===r[0]&&p.width>c.right&&p.width<=c.left?"left":r[0],r[1]="top"===r[1]&&p.height-l.height>c.bottom&&p.height-l.height<=c.top?"bottom":"bottom"===r[1]&&p.height-l.height>c.top&&p.height-l.height<=c.bottom?"top":"left"===r[1]&&p.width-l.width>c.right&&p.width-l.width<=c.left?"right":"right"===r[1]&&p.width-l.width>c.left&&p.width-l.width<=c.right?"left":r[1],"center"===r[1]&&(a.vertical.test(r[0])?(f=l.width/2-o/2,c.left+f<0&&p.width-l.width<=c.right?r[1]="left":c.right+f<0&&p.width-l.width<=c.left&&(r[1]="right")):(h=l.height/2-p.height/2,c.top+h<0&&p.height-l.height<=c.bottom?r[1]="top":c.bottom+h<0&&p.height-l.height<=c.top&&(r[1]="bottom")))),r[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-o;break;case"right":u.left=l.left+l.width}switch(r[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-o;break;case"center":a.vertical.test(r[0])?u.left=l.left+l.width/2-o/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],u},positionArrow:function(e,n){var r,i,o,s,l,u,c,d;if(e=this.getRawNode(e),r=e.querySelector(".tooltip-inner, .popover-inner"),r&&(i=angular.element(r).hasClass("tooltip-inner"),o=e.querySelector(i?".tooltip-arrow":".arrow"))){if(s={top:"",bottom:"",left:"",right:""},n=this.parsePlacement(n),"center"===n[1])return void angular.element(o).css(s);switch(l="border-"+n[0]+"-width",u=t.getComputedStyle(o)[l],c="border-",c+=a.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],c+="-radius",d=t.getComputedStyle(i?r:e)[c],n[0]){case"top":s.bottom=i?"0":"-"+u;break;case"bottom":s.top=i?"0":"-"+u;break;case"left":s.right=i?"0":"-"+u;break;case"right":s.left=i?"0":"-"+u}s[n[1]]=d,angular.element(o).css(s)}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(e,t,n,r,i,a,o,s,l,u,c,d,p,f,h,g){function m(t){var n,r=d.parse(t,x,e.date);if(isNaN(r))for(n=0;n<_.length;n++)if(r=d.parse(t,_[n],e.date),!isNaN(r))return r;return r}function b(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=m(e);if(!isNaN(t))return d.toTimezone(t,L)}return M.$options&&M.$options.allowInvalid?e:void 0}function v(e,t){var r=e||t;return n.ngRequired||r?(angular.isNumber(r)&&(r=new Date(r)),r?angular.isDate(r)&&!isNaN(r)?!0:angular.isString(r)?!isNaN(m(t)):!1:!0):!0}function y(n){var r,i,a;(e.isOpen||!e.disabled)&&(r=A[0],i=t[0].contains(n.target),a=void 0!==r.contains&&r.contains(n.target),!e.isOpen||i||a||e.$apply(function(){e.isOpen=!1}))}function w(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}function $(){var r,i,a;e.isOpen&&(r=angular.element(A[0].querySelector(".uib-datepicker-popup")),i=n.popupPlacement?n.popupPlacement:p.placement,a=u.positionElements(t,r,i,C),r.css({top:a.top+"px",left:a.left+"px"}),r.hasClass("uib-position-measure")&&r.removeClass("uib-position-measure"))}var x,k,C,S,E,T,D,N,O,M,R,A,_,L,P=!1,I=[];this.init=function(i){if(M=i,R=i.$options,k=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):p.closeOnDateSelection,C=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):p.appendToBody,S=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):p.onOpenFocus,E=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:p.datepickerPopupTemplateUrl,T=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:p.datepickerTemplateUrl,_=angular.isDefined(n.altInputFormats)?e.$parent.$eval(n.altInputFormats):p.altInputFormats,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):p.showButtonBar,p.html5Types[n.type]?(x=p.html5Types[n.type],P=!0):(x=n.uibDatepickerPopup||p.datepickerPopup,n.$observe("uibDatepickerPopup",function(e){var t=e||p.datepickerPopup;if(t!==x&&(x=t,M.$modelValue=null,!x))throw new Error("uibDatepickerPopup must have a date format specified.")})),!x)throw new Error("uibDatepickerPopup must have a date format specified.");if(P&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");D=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),R?(L=R.timezone,e.ngModelOptions=angular.copy(R),e.ngModelOptions.timezone=null,e.ngModelOptions.updateOnDefault===!0&&(e.ngModelOptions.updateOn=e.ngModelOptions.updateOn?e.ngModelOptions.updateOn+" default":"default"),D.attr("ng-model-options","ngModelOptions")):L=null,D.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":E}),N=angular.element(D.children()[0]),N.attr("template-url",T),e.datepickerOptions||(e.datepickerOptions={}),P&&"month"===n.type&&(e.datepickerOptions.datepickerMode="month",e.datepickerOptions.minMode="month"),N.attr("datepicker-options","datepickerOptions"),P?M.$formatters.push(function(t){return e.date=d.fromTimezone(t,L),t}):(M.$$parserName="date",M.$validators.date=v,M.$parsers.unshift(b),M.$formatters.push(function(t){return M.$isEmpty(t)?(e.date=t,t):(e.date=d.fromTimezone(t,L),angular.isNumber(e.date)&&(e.date=new Date(e.date)),d.filter(e.date,x))})),M.$viewChangeListeners.push(function(){e.date=m(M.$viewValue)}),t.on("keydown",w),A=r(D)(e),D.remove(),C?s.find("body").append(A):t.after(A),e.$on("$destroy",function(){for(e.isOpen===!0&&(l.$$phase||e.$apply(function(){e.isOpen=!1})),A.remove(),t.off("keydown",w),s.off("click",y),O&&O.off("scroll",$),angular.element(o).off("resize",$);I.length;)I.shift()()})},e.getText=function(t){return e[t+"Text"]||p[t+"Text"]},e.isDisabled=function(t){"today"===t&&(t=d.fromTimezone(new Date,L));var n={};return angular.forEach(["minDate","maxDate"],function(t){e.datepickerOptions[t]?angular.isDate(e.datepickerOptions[t])?n[t]=d.fromTimezone(new Date(e.datepickerOptions[t]),L):(g&&i.warn("Literal date support has been deprecated, please switch to date object usage"),n[t]=new Date(c(e.datepickerOptions[t],"medium"))):n[t]=null}),e.datepickerOptions&&n.minDate&&e.compare(t,n.minDate)<0||n.maxDate&&e.compare(t,n.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){angular.isDefined(n)&&(e.date=n);var r=e.date?d.filter(e.date,x):null;t.val(r),M.$setViewValue(r),k&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(n.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t,n){if(n.stopPropagation(),"today"===t){var r=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate())):t=new Date(r.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(n){n.stopPropagation(),e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&I.push(e.$parent.$watch(a(n.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(r){r?e.disabled?e.isOpen=!1:f(function(){$(),S&&e.$broadcast("uib:datepicker.focus"),s.on("click",y);var r=n.popupPlacement?n.popupPlacement:p.placement;

C||u.parsePlacement(r)[2]?(O=O||angular.element(u.scrollParent(t)),O&&O.on("scroll",$)):O=null,angular.element(o).on("resize",$)},0,!1):(s.off("click",y),O&&O.off("scroll",$),angular.element(o).off("resize",$))}),e.$on("uib:datepicker.mode",function(){f($,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,r){var i=r[0],a=r[1];a.init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(e){return function(t,n){var r;return function(){var i=this,a=Array.prototype.slice.call(arguments);r&&e.cancel(r),r=e(function(){t.apply(i,a)},n)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(e,t){var n,r,i=null;this.open=function(t,a){i||(e.on("click",n),a.on("keydown",r)),i&&i!==t&&(i.isOpen=!1),i=t},this.close=function(t,a){i===t&&(i=null,e.off("click",n),a.off("keydown",r))},n=function(e){var n,r;i&&(e&&"disabled"===i.getAutoClose()||e&&3===e.which||(n=i.getToggleElement(),e&&n&&n[0].contains(e.target)||(r=i.getDropdownElement(),e&&"outsideClick"===i.getAutoClose()&&r&&r[0].contains(e.target)||(i.isOpen=!1,t.$$phase||i.$apply()))))},r=function(e){27===e.which?(e.stopPropagation(),i.focusToggleElement(),n()):i.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&i.isOpen&&(e.preventDefault(),e.stopPropagation(),i.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,i,a,o,s,l,u,c){var d,p,f=this,h=e.$new(),g=i.appendToOpenClass,m=i.openClass,b=angular.noop,v=n.onToggle?r(n.onToggle):angular.noop,y=!1,w=null,$=!1,x=l.find("body");t.addClass("dropdown"),this.init=function(){if(n.isOpen&&(p=r(n.isOpen),b=p.assign,e.$watch(p,function(e){h.isOpen=!!e})),angular.isDefined(n.dropdownAppendTo)){var i=r(n.dropdownAppendTo)(h);i&&(w=angular.element(i))}y=angular.isDefined(n.dropdownAppendToBody),$=angular.isDefined(n.keyboardNav),y&&!w&&(w=x),w&&f.dropdownMenu&&(w.append(f.dropdownMenu),t.on("$destroy",function(){f.dropdownMenu.remove()}))},this.toggle=function(e){return h.isOpen=arguments.length?!!e:!h.isOpen,angular.isFunction(b)&&b(h,h.isOpen),h.isOpen},this.isOpen=function(){return h.isOpen},h.getToggleElement=function(){return f.toggleElement},h.getAutoClose=function(){return n.autoClose||"always"},h.getElement=function(){return t},h.isKeynavEnabled=function(){return $},h.focusDropdownEntry=function(e){var n=f.dropdownMenu?angular.element(f.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:f.selectedOption=angular.isNumber(f.selectedOption)?f.selectedOption===n.length-1?f.selectedOption:f.selectedOption+1:0;break;case 38:f.selectedOption=angular.isNumber(f.selectedOption)?0===f.selectedOption?0:f.selectedOption-1:n.length-1}n[f.selectedOption].focus()},h.getDropdownElement=function(){return f.dropdownMenu},h.focusToggleElement=function(){f.toggleElement&&f.toggleElement[0].focus()},h.$watch("isOpen",function(n,r){var i,l,p,$,x,k,C;w&&f.dropdownMenu&&(i=s.positionElements(t,f.dropdownMenu,"bottom-left",!0),l={top:i.top+"px",display:n?"block":"none"},p=f.dropdownMenu.hasClass("dropdown-menu-right"),p?(l.left="auto",l.right=window.innerWidth-(i.left+t.prop("offsetWidth"))+"px"):(l.left=i.left+"px",l.right="auto"),y||($=s.offset(w),l.top=i.top-$.top+"px",p?l.right=window.innerWidth-(i.left-$.left+t.prop("offsetWidth"))+"px":l.left=i.left-$.left+"px"),f.dropdownMenu.css(l)),x=w?w:t,k=x.hasClass(w?g:m),k===!n&&o[n?"addClass":"removeClass"](x,w?g:m).then(function(){angular.isDefined(n)&&n!==r&&v(e,{open:!!n})}),n?(f.dropdownMenuTemplateUrl&&c(f.dropdownMenuTemplateUrl).then(function(e){d=h.$new(),u(e.trim())(d,function(e){var t=e;f.dropdownMenu.replaceWith(t),f.dropdownMenu=t})}),h.focusToggleElement(),a.open(h,t)):(f.dropdownMenuTemplateUrl&&(d&&d.$destroy(),C=angular.element('<ul class="dropdown-menu"></ul>'),f.dropdownMenu.replaceWith(C),f.dropdownMenu=C),a.close(h,t),f.selectedOption=null),angular.isFunction(b)&&b(e,n)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var i=n.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,r){if(r){t.addClass("dropdown-toggle"),r.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){var t,n=[];for(t=0;t<e.length;t++)n.push(e[t].key);return n},top:function(){return e[e.length-1]},remove:function(t){var n,r=-1;for(n=0;n<e.length;n++)if(t===e[n].key){r=n;break}return e.splice(r,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var r,i=e[t];i&&(r=i.indexOf(n),-1!==r&&i.splice(r,1),i.length||delete e[t])}}}}}).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,n){var r=e.resolver?t.get(e.resolver):null;return{resolve:function(e,i,a,o){if(r)return r.resolve(e,i,a,o);var s=[];return angular.forEach(e,function(e){s.push(angular.isFunction(e)||angular.isArray(e)?n.resolve(t.invoke(e)):angular.isString(e)?n.resolve(t.get(e)):n.resolve(e))}),n.all(s).then(function(t){var n={},r=0;return angular.forEach(e,function(e,i){n[i]=t[r++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function r(t,r,i){i.modalInClass&&(e.addClass(r,i.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(n,a){var o=a();t.modalOptions.animation?e.removeClass(r,i.modalInClass).then(o):o()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(e,t){return e.addClass(t.backdropClass),r}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,n,r){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(i,a,o){a.addClass(o.windowClass||""),a.addClass(o.windowTopClass||""),i.size=o.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},a.on("click",i.close),i.$isRendered=!0;var s=t.defer();o.$observe("modalRender",function(e){"true"===e&&s.resolve()}),s.promise.then(function(){var s=null;o.modalInClass&&(s=n(a,{addClass:o.modalInClass}).start(),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var r=t();n(a,{removeClass:o.modalInClass}).start().then(r)})),t.when(s).then(function(){var t,n=e.getTop();n&&e.modalRendered(n.key),r[0].activeElement&&a[0].contains(r[0].activeElement)||(t=a[0].querySelector("[autofocus]"),t?t.focus():a[0].focus())})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(e,t,n,r,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(e,t,n,r,i,a,o,s,l){function u(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function c(){var e,t=-1,n=$.keys();for(e=0;e<n.length;e++)$.get(n[e]).value.backdrop&&(t=e);return t>-1&&C>t&&(t=C),t}function d(e,t){var n=$.get(e).value,r=n.appendTo;$.remove(e),S=$.top(),S&&(C=parseInt(S.value.modalDomEl.attr("index"),10)),h(n.modalDomEl,n.modalScope,function(){var t,i=n.openedClass||w;x.remove(i,e),t=x.hasKey(i),r.toggleClass(i,t),!t&&y&&y.heightOverflow&&y.scrollbarWidth&&(r.css(y.originalRight?{paddingRight:y.originalRight+"px"}:{paddingRight:""}),y=null),p(!0)},n.closedDeferred),f(),t&&t.focus?t.focus():r.focus&&r.focus()}function p(e){var t;$.length()>0&&(t=$.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function f(){if(b&&-1===c()){var e=v;h(b,v,function(){e=null}),b=void 0,v=void 0}}function h(t,n,r,i){function o(){o.done||(o.done=!0,e.leave(t).then(function(){t.remove(),i&&i.resolve()}),n.$destroy(),r&&r())}var s,l=null,u=function(){return s||(s=a.defer(),l=s.promise),function(){s.resolve()}};return n.$broadcast(k.NOW_CLOSING_EVENT,u),a.when(l).then(o)}function g(e){var t,n,r;if(e.isDefaultPrevented())return e;if(t=$.top())switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),i.$apply(function(){k.dismiss(t.key,"escape key press")}));break;case 9:n=k.loadFocusElementList(t),r=!1,e.shiftKey?(k.isFocusInFirstItem(e,n)||k.isModalFocused(e,t))&&(r=k.focusLastFocusableElement(n)):k.isFocusInLastItem(e,n)&&(r=k.focusFirstFocusableElement(n)),r&&(e.preventDefault(),e.stopPropagation())}}function m(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}var b,v,y,w="modal-open",$=s.createNew(),x=o.createNew(),k={NOW_CLOSING_EVENT:"modal.stack.now-closing"},C=0,S=null,E="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return i.$watch(c,function(e){v&&(v.index=e)}),n.on("keydown",g),i.$on("$destroy",function(){n.off("keydown",g)}),k.open=function(t,a){var o,s,u,d=n[0].activeElement,f=a.openedClass||w;if(p(!1),S=$.top(),$.add(t,{deferred:a.deferred,renderDeferred:a.renderDeferred,closedDeferred:a.closedDeferred,modalScope:a.scope,backdrop:a.backdrop,keyboard:a.keyboard,openedClass:a.openedClass,windowTopClass:a.windowTopClass,animation:a.animation,appendTo:a.appendTo}),x.put(f,t),o=a.appendTo,s=c(),!o.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");s>=0&&!b&&(v=i.$new(!0),v.modalOptions=a,v.index=s,b=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),b.attr("backdrop-class",a.backdropClass),a.animation&&b.attr("modal-animation","true"),r(b)(v),e.enter(b,o),y=l.scrollbarPadding(o),y.heightOverflow&&y.scrollbarWidth&&o.css({paddingRight:y.right+"px"})),C=S?parseInt(S.value.modalDomEl.attr("index"),10)+1:0,u=angular.element('<div uib-modal-window="modal-window"></div>'),u.attr({"template-url":a.windowTemplateUrl,"window-class":a.windowClass,"window-top-class":a.windowTopClass,size:a.size,index:C,animate:"animate"}).html(a.content),a.animation&&u.attr("modal-animation","true"),o.addClass(f),e.enter(r(u)(a.scope),o),$.top().value.modalDomEl=u,$.top().value.modalOpener=d},k.close=function(e,t){var n=$.get(e);return n&&m(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),d(e,n.value.modalOpener),!0):!n},k.dismiss=function(e,t){var n=$.get(e);return n&&m(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),d(e,n.value.modalOpener),!0):!n},k.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},k.getTop=function(){return $.top()},k.modalRendered=function(e){var t=$.get(e);t&&t.value.renderDeferred.resolve()},k.focusFirstFocusableElement=function(e){return e.length>0?(e[0].focus(),!0):!1},k.focusLastFocusableElement=function(e){return e.length>0?(e[e.length-1].focus(),!0):!1},k.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},k.isFocusInFirstItem=function(e,t){return t.length>0?(e.target||e.srcElement)===t[0]:!1},k.isFocusInLastItem=function(e,t){return t.length>0?(e.target||e.srcElement)===t[t.length-1]:!1},k.loadFocusElementList=function(e){var t,n;return e&&(t=e.value.modalDomEl,t&&t.length)?(n=t[0].querySelectorAll(E),n?Array.prototype.filter.call(n,function(e){return u(e)}):n):void 0},k}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,n,r,i,a,o,s){function l(e){return e.template?n.when(e.template):i(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var u={},c=null;return u.getPromiseChain=function(){return c},u.open=function(i){function u(){return d}var d,p,f=n.defer(),h=n.defer(),g=n.defer(),m=n.defer(),b={result:f.promise,opened:h.promise,closed:g.promise,rendered:m.promise,close:function(e){return s.close(b,e)},dismiss:function(e){return s.dismiss(b,e)}};if(i=angular.extend({},e.options,i),i.resolve=i.resolve||{},i.appendTo=i.appendTo||r.find("body").eq(0),!i.template&&!i.templateUrl)throw new Error("One of template or templateUrl options is required.");return d=n.all([l(i),o.resolve(i.resolve,{},null,null)]),p=c=n.all([c]).then(u,u).then(function(e){var n,r,o,l=i.scope||t,u=l.$new();u.$close=b.close,u.$dismiss=b.dismiss,u.$on("$destroy",function(){u.$$uibDestructionScheduled||u.$dismiss("$uibUnscheduledDestruction")}),o={},i.controller&&(o.$scope=u,o.$uibModalInstance=b,angular.forEach(e[1],function(e,t){o[t]=e}),r=a(i.controller,o,!0),i.controllerAs?(n=r.instance,i.bindToController&&(n.$close=u.$close,n.$dismiss=u.$dismiss,angular.extend(n,l)),n=r(),u[i.controllerAs]=n):n=r(),angular.isFunction(n.$onInit)&&n.$onInit()),s.open(b,{scope:u,deferred:f,renderDeferred:m,closedDeferred:g,content:e[0],animation:i.animation,backdrop:i.backdrop,keyboard:i.keyboard,backdropClass:i.backdropClass,windowTopClass:i.windowTopClass,windowClass:i.windowClass,windowTemplateUrl:i.windowTemplateUrl,size:i.size,openedClass:i.openedClass,appendTo:i.appendTo}),h.resolve(!0)},function(e){h.reject(e),f.reject(e)})["finally"](function(){c===p&&(c=null)}),b},u}]};return e}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(t,n,r){t.setNumPages=r.numPages?e(r.numPages).assign:angular.noop,t.ngModelCtrl={$setViewValue:angular.noop},t._watchers=[],t.init=function(e,i){t.ngModelCtrl=e,t.config=i,e.$render=function(){t.render()},r.itemsPerPage?t._watchers.push(n.$parent.$watch(r.itemsPerPage,function(e){t.itemsPerPage=parseInt(e,10),n.totalPages=t.calculateTotalPages(),t.updatePage()})):t.itemsPerPage=i.itemsPerPage,n.$watch("totalItems",function(e,r){(angular.isDefined(e)||e!==r)&&(n.totalPages=t.calculateTotalPages(),t.updatePage())})},t.calculateTotalPages=function(){var e=t.itemsPerPage<1?1:Math.ceil(n.totalItems/t.itemsPerPage);return Math.max(e||0,1)},t.render=function(){n.page=parseInt(t.ngModelCtrl.$viewValue,10)||1},n.selectPage=function(e,r){r&&r.preventDefault();var i=!n.ngDisabled||!r;i&&n.page!==e&&e>0&&e<=n.totalPages&&(r&&r.target&&r.target.blur(),t.ngModelCtrl.$setViewValue(e),t.ngModelCtrl.$render())},n.getText=function(e){return n[e+"Text"]||t.config[e+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},t.updatePage=function(){t.setNumPages(n.$parent,n.totalPages),n.page>n.totalPages?n.selectPage(n.totalPages):t.ngModelCtrl.$render()},n.$on("$destroy",function(){for(;t._watchers.length;)t._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,r){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):r.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(t,n,r,i){var a=i[0],o=i[1];o&&a.init(o,e)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(e,t,n,r,i){function a(e,t,n){return{number:e,text:t,active:n}}function o(e,t){var n,r,i,o,s,l,h,g,m=[],b=1,v=t,y=angular.isDefined(u)&&t>u;for(y&&(c?(b=Math.max(e-Math.floor(u/2),1),v=b+u-1,v>t&&(v=t,b=v-u+1)):(b=(Math.ceil(e/u)-1)*u+1,v=Math.min(b+u-1,t))),n=b;v>=n;n++)r=a(n,f(n),n===e),m.push(r);return y&&u>0&&(!c||d||p)&&(b>1&&((!p||b>3)&&(i=a(b-1,"...",!1),m.unshift(i)),p&&(3===b&&(o=a(2,"2",!1),m.unshift(o)),s=a(1,"1",!1),m.unshift(s))),t>v&&((!p||t-2>v)&&(l=a(v+1,"...",!1),m.push(l)),p&&(v===t-2&&(h=a(t-1,t-1,!1),m.push(h)),g=a(t,t,!1),m.push(g)))),m}var s,l=this,u=angular.isDefined(t.maxSize)?e.$parent.$eval(t.maxSize):i.maxSize,c=angular.isDefined(t.rotate)?e.$parent.$eval(t.rotate):i.rotate,d=angular.isDefined(t.forceEllipses)?e.$parent.$eval(t.forceEllipses):i.forceEllipses,p=angular.isDefined(t.boundaryLinkNumbers)?e.$parent.$eval(t.boundaryLinkNumbers):i.boundaryLinkNumbers,f=angular.isDefined(t.pageLabel)?function(n){return e.$parent.$eval(t.pageLabel,{$page:n})}:angular.identity;e.boundaryLinks=angular.isDefined(t.boundaryLinks)?e.$parent.$eval(t.boundaryLinks):i.boundaryLinks,e.directionLinks=angular.isDefined(t.directionLinks)?e.$parent.$eval(t.directionLinks):i.directionLinks,r.create(this,e,t),t.maxSize&&l._watchers.push(e.$parent.$watch(n(t.maxSize),function(e){u=parseInt(e,10),l.render()})),s=this.render,this.render=function(){s(),e.page>0&&e.page<=e.totalPages&&(e.pages=o(e.page,e.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(e,n,r,i){var a=i[0],o=i[1];o&&a.init(o,t)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},r={};this.options=function(e){angular.extend(r,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(i,a,o,s,l,u,c,d,p){function f(e){if(27===e.which){var t=h.top();t&&(t.value.close(),h.removeTop(),t=null)}}var h=p.createNew();return s.on("keypress",f),c.$on("$destroy",function(){s.off("keypress",f)}),function(i,c,p,f){function g(e){var t=(e||f.trigger||p).split(" "),r=t.map(function(e){return n[e]||e});return{show:t,hide:r}}var m,b,v,y;return f=angular.extend({},t,r,f),m=e(i),b=u.startSymbol(),v=u.endSymbol(),y="<div "+m+'-popup uib-title="'+b+"title"+v+'" '+(f.useContentExp?'content-exp="contentExp()" ':'content="'+b+"content"+v+'" ')+'placement="'+b+"placement"+v+'" popup-class="'+b+"popupClass"+v+'" animation="animation" is-open="isOpen" origin-scope="origScope" class="uib-position-measure"></div>',{compile:function(){var e=a(y);return function(t,n,r){function a(){j.isOpen?p():u()}function u(){(!F||t.$eval(r[c+"Enable"]))&&(y(),x(),j.popupDelay?M||(M=o(m,j.popupDelay,!1)):m())}function p(){b(),j.popupCloseDelay?R||(R=o(v,j.popupCloseDelay,!1)):v()}function m(){return b(),y(),j.content?(w(),void j.$evalAsync(function(){j.isOpen=!0,k(!0),W()})):angular.noop}function b(){M&&(o.cancel(M),M=null),A&&(o.cancel(A),A=null)}function v(){j&&j.$evalAsync(function(){j&&(j.isOpen=!1,k(!1),j.animation?O||(O=o($,150,!1)):$())})}function y(){R&&(o.cancel(R),R=null),O&&(o.cancel(O),O=null)}function w(){D||(N=j.$new(),D=e(N,function(e){H?s.find("body").append(e):n.after(e)}),C())}function $(){b(),y(),S(),D&&(D.remove(),D=null),N&&(N.$destroy(),N=null)}function x(){var e,n,a;j.title=r[c+"Title"],j.content=K?K(t):r[i],j.popupClass=r[c+"Class"],j.placement=angular.isDefined(r[c+"Placement"])?r[c+"Placement"]:f.placement,e=l.parsePlacement(j.placement),_=e[1]?e[0]+"-"+e[1]:e[0],n=parseInt(r[c+"PopupDelay"],10),a=parseInt(r[c+"PopupCloseDelay"],10),j.popupDelay=isNaN(n)?f.popupDelay:n,j.popupCloseDelay=isNaN(a)?f.popupCloseDelay:a}function k(e){z&&angular.isFunction(z.assign)&&z.assign(t,e)}function C(){V.length=0,K?(V.push(t.$watch(K,function(e){j.content=e,!e&&j.isOpen&&v()})),V.push(N.$watch(function(){U||(U=!0,N.$$postDigest(function(){U=!1,j&&j.isOpen&&W()}))}))):V.push(r.$observe(i,function(e){j.content=e,!e&&j.isOpen?v():W()})),V.push(r.$observe(c+"Title",function(e){j.title=e,j.isOpen&&W()})),V.push(r.$observe(c+"Placement",function(e){j.placement=e?e:f.placement,j.isOpen&&W()}))}function S(){V.length&&(angular.forEach(V,function(e){e()}),V.length=0)}function E(e){j&&j.isOpen&&D&&(n[0].contains(e.target)||D[0].contains(e.target)||p())}function T(){var e=r[c+"Trigger"];L(),B=g(e),"none"!==B.show&&B.show.forEach(function(e,t){"outsideClick"===e?(n.on("click",a),s.on("click",E)):e===B.hide[t]?n.on(e,a):e&&(n.on(e,u),n.on(B.hide[t],p)),n.on("keypress",function(e){27===e.which&&p()})})}var D,N,O,M,R,A,_,L,P,I,q,H=angular.isDefined(f.appendToBody)?f.appendToBody:!1,B=g(void 0),F=angular.isDefined(r[c+"Enable"]),j=t.$new(!0),U=!1,z=angular.isDefined(r[c+"IsOpen"])?d(r[c+"IsOpen"]):!1,K=f.useContentExp?d(r[i]):!1,V=[],W=function(){D&&D.html()&&(A||(A=o(function(){var e=l.positionElements(n,D,j.placement,H);D.css({top:e.top+"px",left:e.left+"px"}),D.hasClass(e.placement.split("-")[0])||(D.removeClass(_.split("-")[0]),D.addClass(e.placement.split("-")[0])),D.hasClass(f.placementClassPrefix+e.placement)||(D.removeClass(f.placementClassPrefix+_),D.addClass(f.placementClassPrefix+e.placement)),D.hasClass("uib-position-measure")?(l.positionArrow(D,e.placement),D.removeClass("uib-position-measure")):_!==e.placement&&l.positionArrow(D,e.placement),_=e.placement,A=null},0,!1)))};j.origScope=t,j.isOpen=!1,h.add(j,{close:v}),j.contentExp=function(){return j.content},r.$observe("disabled",function(e){e&&b(),e&&j.isOpen&&v()}),z&&t.$watch(z,function(e){j&&!e===j.isOpen&&a()}),L=function(){B.show.forEach(function(e){"outsideClick"===e?n.off("click",a):(n.off(e,u),n.off(e,a))}),B.hide.forEach(function(e){"outsideClick"===e?s.off("click",E):n.off(e,p)})},T(),P=t.$eval(r[c+"Animation"]),j.animation=angular.isDefined(P)?!!P:f.animation,q=c+"AppendToBody",I=q in r&&void 0===r[q]?!0:t.$eval(r[q]),H=angular.isDefined(I)?I:H,t.$on("$destroy",function(){L(),$(),h.remove(j),j=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,r){return{link:function(i,a,o){var s,l,u,c=i.$eval(o.tooltipTemplateTranscludeScope),d=0,p=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),u&&(e.leave(u).then(function(){l=null}),l=u,u=null)};i.$watch(t.parseAsResourceUrl(o.uibTooltipTemplateTransclude),function(t){var o=++d;t?(r(t,!0).then(function(r){var i,l,f;o===d&&(i=c.$new(),l=r,f=n(l)(i,function(t){p(),e.enter(t,a)}),s=i,u=f,s.$emit("$includeContentLoaded",t))},function(){o===d&&(p(),i.$emit("$includeContentError",t))}),i.$emit("$includeContentRequested",t)):p()}),i.$on("$destroy",p)}}}]).directive("uibTooltipClasses",["$uibPosition",function(e){return{restrict:"A",link:function(t,n,r){if(t.placement){var i=e.parsePlacement(t.placement);n.addClass(i[0])}t.popupClass&&n.addClass(t.popupClass),t.animation()&&n.addClass(r.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{uibTitle:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",uibTitle:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{uibTitle:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){function r(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}var i=this,a=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=r(),this.addBar=function(e,t,n){a||t.css({transition:"none"}),this.bars.push(e),e.max=r(),e.title=n&&angular.isDefined(n.title)?n.title:"progressbar",e.$watch("value",function(){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,i.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(){i.bars.forEach(function(e){e.max=r(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,n){var r={$setViewValue:angular.noop},i=this;this.init=function(i){var a,o;r=i,r.$render=this.render,r.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff,this.enableReset=angular.isDefined(t.enableReset)?e.$parent.$eval(t.enableReset):n.enableReset,a=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):n.titles,this.titles=angular.isArray(a)&&a.length>0?a:n.titles,o=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max),e.range=this.buildTemplateObjects(o)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){if(!e.readonly&&t>=0&&t<=e.range.length){var n=i.enableReset&&r.$viewValue===t?0:t;r.$setViewValue(n),r.$render()}},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=r.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=r.$viewValue,e.title=i.getTitle(e.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(e,t,n,r){var i=r[0],a=r[1];i.init(a)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){function t(e){for(var t=0;t<i.tabs.length;t++)if(i.tabs[t].index===e)return t}var n,r,i=this;i.tabs=[],i.select=function(e,a){var o,s,l;if(!r){if(o=t(n),s=i.tabs[o]){if(s.tab.onDeselect({$event:a}),a&&a.isDefaultPrevented())return;s.tab.active=!1}l=i.tabs[e],l?(l.tab.onSelect({$event:a}),l.tab.active=!0,i.active=l.index,n=l.index):!l&&angular.isNumber(n)&&(i.active=null,n=null)}},i.addTab=function(e){if(i.tabs.push({tab:e,index:e.index}),i.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===i.active||!angular.isNumber(i.active)&&1===i.tabs.length){var n=t(e.index);i.select(n)}},i.removeTab=function(e){var t,n,r;for(n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===e){t=n;break}i.tabs[t].index===i.active&&(r=t===i.tabs.length-1?t-1:t+1%i.tabs.length,i.select(r)),i.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isNumber(e)&&e!==n&&i.select(t(e))}),e.$on("$destroy",function(){r=!0})}]).directive("uibTabset",function(){return{
transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1,angular.isUndefined(n.active)&&(e.active=0)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,n,r,i,a){t.disabled=!1,r.disable&&t.$parent.$watch(e(r.disable),function(e){t.disabled=!!e}),angular.isUndefined(r.index)&&(t.index=i.tabs&&i.tabs.length?Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:0),angular.isUndefined(r.classes)&&(t.classes=""),t.select=function(e){var n,r;if(!t.disabled){for(r=0;r<i.tabs.length;r++)if(i.tabs[r].tab===t){n=r;break}i.select(n,e)}},i.addTab(t),t.$on("$destroy",function(){i.removeTab(t)}),t.$transcludeFn=a}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(t,n,r){var i=t.$eval(r.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,n,r,i,a,o){function s(){var t=+e.hours,n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n&&""!==e.hours?(e.showMeridian&&(12===t&&(t=0),e.meridian===T[1]&&(t+=12)),t):void 0}function l(){var t=+e.minutes,n=t>=0&&60>t;return n&&""!==e.minutes?t:void 0}function u(){var t=+e.seconds;return t>=0&&60>t?t:void 0}function c(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function d(e){p(),E.$setViewValue(new Date(C)),f(e)}function p(){E.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1,e.invalidSeconds=!1}function f(t){if(E.$modelValue){var n=C.getHours(),r=C.getMinutes(),i=C.getSeconds();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:c(n,!D),"m"!==t&&(e.minutes=c(r)),e.meridian=C.getHours()<12?T[0]:T[1],"s"!==t&&(e.seconds=c(i)),e.meridian=C.getHours()<12?T[0]:T[1]}else e.hours=null,e.minutes=null,e.seconds=null,e.meridian=T[0]}function h(e){C=m(C,e),d()}function g(e,t){return m(e,60*t)}function m(e,t){var n=new Date(e.getTime()+1e3*t),r=new Date(e);return r.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),r}function b(){return!(null!==e.hours&&""!==e.hours||null!==e.minutes&&""!==e.minutes||e.showSeconds&&(!e.showSeconds||null!==e.seconds&&""!==e.seconds))}var v,y,w,$,x,k,C=new Date,S=[],E={$setViewValue:angular.noop},T=angular.isDefined(n.meridians)?e.$parent.$eval(n.meridians):o.meridians||a.DATETIME_FORMATS.AMPMS,D=angular.isDefined(n.padHours)?e.$parent.$eval(n.padHours):!0;e.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,r){var i,a,s,l,u;E=t,E.$render=this.render,E.$formatters.unshift(function(e){return e?new Date(e):null}),i=r.eq(0),a=r.eq(1),s=r.eq(2),l=angular.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):o.mousewheel,l&&this.setupMousewheelEvents(i,a,s),u=angular.isDefined(n.arrowkeys)?e.$parent.$eval(n.arrowkeys):o.arrowkeys,u&&this.setupArrowkeyEvents(i,a,s),e.readonlyInput=angular.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):o.readonlyInput,this.setupInputEvents(i,a,s)},v=o.hourStep,n.hourStep&&S.push(e.$parent.$watch(r(n.hourStep),function(e){v=+e})),y=o.minuteStep,n.minuteStep&&S.push(e.$parent.$watch(r(n.minuteStep),function(e){y=+e})),S.push(e.$parent.$watch(r(n.min),function(e){var t=new Date(e);w=isNaN(t)?void 0:t})),S.push(e.$parent.$watch(r(n.max),function(e){var t=new Date(e);$=isNaN(t)?void 0:t})),x=!1,n.ngDisabled&&S.push(e.$parent.$watch(r(n.ngDisabled),function(e){x=e})),e.noIncrementHours=function(){var e=g(C,60*v);return x||e>$||C>e&&w>e},e.noDecrementHours=function(){var e=g(C,60*-v);return x||w>e||e>C&&e>$},e.noIncrementMinutes=function(){var e=g(C,y);return x||e>$||C>e&&w>e},e.noDecrementMinutes=function(){var e=g(C,-y);return x||w>e||e>C&&e>$},e.noIncrementSeconds=function(){var e=m(C,k);return x||e>$||C>e&&w>e},e.noDecrementSeconds=function(){var e=m(C,-k);return x||w>e||e>C&&e>$},e.noToggleMeridian=function(){return C.getHours()<12?x||g(C,720)>$:x||g(C,-720)<w},k=o.secondStep,n.secondStep&&S.push(e.$parent.$watch(r(n.secondStep),function(e){k=+e})),e.showSeconds=o.showSeconds,n.showSeconds&&S.push(e.$parent.$watch(r(n.showSeconds),function(t){e.showSeconds=!!t})),e.showMeridian=o.showMeridian,n.showMeridian&&S.push(e.$parent.$watch(r(n.showMeridian),function(t){if(e.showMeridian=!!t,E.$error.time){var n=s(),r=l();angular.isDefined(n)&&angular.isDefined(r)&&(C.setHours(n),d())}else f()})),this.setupMousewheelEvents=function(t,n,r){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){x||e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){x||e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()}),r.bind("mousewheel wheel",function(t){x||e.$apply(i(t)?e.incrementSeconds():e.decrementSeconds()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n,r){t.bind("keydown",function(t){x||(38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply()))}),n.bind("keydown",function(t){x||(38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply()))}),r.bind("keydown",function(t){x||(38===t.which?(t.preventDefault(),e.incrementSeconds(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementSeconds(),e.$apply()))})},this.setupInputEvents=function(t,n,r){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void(e.updateSeconds=angular.noop);var i=function(t,n,r){E.$setViewValue(null),E.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n),angular.isDefined(r)&&(e.invalidSeconds=r)};e.updateHours=function(){var e=s(),t=l();E.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(C.setHours(e),C.setMinutes(t),w>C||C>$?i(!0):d("h")):i(!0)},t.bind("blur",function(){E.$setTouched(),b()?p():null===e.hours||""===e.hours?i(!0):!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours,!D)})}),e.updateMinutes=function(){var e=l(),t=s();E.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(C.setHours(t),C.setMinutes(e),w>C||C>$?i(void 0,!0):d("m")):i(void 0,!0)},n.bind("blur",function(){E.$setTouched(),b()?p():null===e.minutes?i(void 0,!0):!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})}),e.updateSeconds=function(){var e=u();E.$setDirty(),angular.isDefined(e)?(C.setSeconds(e),d("s")):i(void 0,void 0,!0)},r.bind("blur",function(){b()?p():!e.invalidSeconds&&e.seconds<10&&e.$apply(function(){e.seconds=c(e.seconds)})})},this.render=function(){var t=E.$viewValue;isNaN(t)?(E.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(C=t),w>C||C>$?(E.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):p(),f())},e.showSpinners=angular.isDefined(n.showSpinners)?e.$parent.$eval(n.showSpinners):o.showSpinners,e.incrementHours=function(){e.noIncrementHours()||h(60*v*60)},e.decrementHours=function(){e.noDecrementHours()||h(60*-v*60)},e.incrementMinutes=function(){e.noIncrementMinutes()||h(60*y)},e.decrementMinutes=function(){e.noDecrementMinutes()||h(60*-y)},e.incrementSeconds=function(){e.noIncrementSeconds()||h(k)},e.decrementSeconds=function(){e.noDecrementSeconds()||h(-k)},e.toggleMeridian=function(){var t=l(),n=s();e.noToggleMeridian()||(angular.isDefined(t)&&angular.isDefined(n)?h(720*(C.getHours()<12?60:-60)):e.meridian=e.meridian===T[0]?T[1]:T[0])},e.blur=function(){E.$setTouched()},e.$on("$destroy",function(){for(;S.length;)S.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(e){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(t,n){return n.templateUrl||e.templateUrl},link:function(e,t,n,r){var i=r[0],a=r[1];a&&i.init(a,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(e,t,n,r,i,a,o,s,l,u,c,d,p){function f(){P.moveInProgress||(P.moveInProgress=!0,P.$digest()),W()}function h(){P.position=C?d.offset(t):d.position(t),P.position.top+=t.prop("offsetHeight")}var g,m,b,v,y,w,$,x,k,C,S,E,T,D,N,O,M,R,A,_,L,P,I,q,H,B,F,j,U,z,K,V,W,Q,G,Y,X,Z,J=[9,13,27,38,40],ee=200,te=e.$eval(n.typeaheadMinLength);te||0===te||(te=1),e.$watch(n.typeaheadMinLength,function(e){te=e||0===e?e:1}),b=e.$eval(n.typeaheadWaitMs)||0,v=e.$eval(n.typeaheadEditable)!==!1,e.$watch(n.typeaheadEditable,function(e){v=e!==!1}),y=i(n.typeaheadLoading).assign||angular.noop,w=i(n.typeaheadOnSelect),$=angular.isDefined(n.typeaheadSelectOnBlur)?e.$eval(n.typeaheadSelectOnBlur):!1,x=i(n.typeaheadNoResults).assign||angular.noop,k=n.typeaheadInputFormatter?i(n.typeaheadInputFormatter):void 0,C=n.typeaheadAppendToBody?e.$eval(n.typeaheadAppendToBody):!1,S=n.typeaheadAppendTo?e.$eval(n.typeaheadAppendTo):null,E=e.$eval(n.typeaheadFocusFirst)!==!1,T=n.typeaheadSelectOnExact?e.$eval(n.typeaheadSelectOnExact):!1,D=i(n.typeaheadIsOpen).assign||angular.noop,N=e.$eval(n.typeaheadShowHint)||!1,O=i(n.ngModel),M=i(n.ngModel+"($$$p)"),R=function(t,n){return angular.isFunction(O(e))&&m&&m.$options&&m.$options.getterSetter?M(t,{$$$p:n}):O.assign(t,n)},A=p.parse(n.uibTypeahead),P=e.$new(),I=e.$on("$destroy",function(){P.$destroy()}),P.$on("$destroy",I),q="typeahead-"+P.$id+"-"+Math.floor(1e4*Math.random()),t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":q}),N&&(H=angular.element("<div></div>"),H.css("position","relative"),t.after(H),B=t.clone(),B.attr("placeholder",""),B.attr("tabindex","-1"),B.val(""),B.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),t.css({position:"relative","vertical-align":"top","background-color":"transparent"}),H.append(B),B.after(t)),F=angular.element("<div uib-typeahead-popup></div>"),F.attr({id:q,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(n.typeaheadTemplateUrl)&&F.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&F.attr("popup-template-url",n.typeaheadPopupTemplateUrl),j=function(){N&&B.val("")},U=function(){P.matches=[],P.activeIdx=-1,t.attr("aria-expanded",!1),j()},z=function(e){return q+"-option-"+e},P.$watch("activeIdx",function(e){0>e?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",z(e))}),K=function(e,t){return P.matches.length>t&&e?e.toUpperCase()===P.matches[t].label.toUpperCase():!1},V=function(n,r){var i={$viewValue:n};y(e,!0),x(e,!1),a.when(A.source(e,i)).then(function(a){var o,s,l=n===g.$viewValue;if(l&&_)if(a&&a.length>0){for(P.activeIdx=E?0:-1,x(e,!1),P.matches.length=0,o=0;o<a.length;o++)i[A.itemName]=a[o],P.matches.push({id:z(o),label:A.viewMapper(P,i),model:a[o]});P.query=n,h(),t.attr("aria-expanded",!0),T&&1===P.matches.length&&K(n,0)&&(angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?c(function(){P.select(0,r)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(0,r)),N&&(s=P.matches[0].label,B.val(angular.isString(n)&&n.length>0&&s.slice(0,n.length).toUpperCase()===n.toUpperCase()?n+s.slice(n.length):""))}else U(),x(e,!0);l&&y(e,!1)},function(){U(),y(e,!1),x(e,!0)})},C&&(angular.element(l).on("resize",f),s.find("body").on("scroll",f)),W=c(function(){P.matches.length&&h(),P.moveInProgress=!1},ee),P.moveInProgress=!1,P.query=void 0,G=function(e){Q=o(function(){V(e)},b)},Y=function(){Q&&o.cancel(Q)},U(),P.assignIsOpen=function(t){D(e,t)},P.select=function(r,i){var a,s,l={};L=!0,l[A.itemName]=s=P.matches[r].model,a=A.modelMapper(e,l),R(e,a),g.$setValidity("editable",!0),g.$setValidity("parse",!0),w(e,{$item:s,$model:a,$label:A.viewMapper(e,l),$event:i}),U(),P.$eval(n.typeaheadFocusOnSelect)!==!1&&o(function(){t[0].focus()},0,!1)},t.on("keydown",function(t){if(0!==P.matches.length&&-1!==J.indexOf(t.which)){if(-1===P.activeIdx&&(9===t.which||13===t.which)||9===t.which&&t.shiftKey)return U(),void P.$digest();t.preventDefault();var n;switch(t.which){case 9:case 13:P.$apply(function(){angular.isNumber(P.debounceUpdate)||angular.isObject(P.debounceUpdate)?c(function(){P.select(P.activeIdx,t)},angular.isNumber(P.debounceUpdate)?P.debounceUpdate:P.debounceUpdate["default"]):P.select(P.activeIdx,t)});break;case 27:t.stopPropagation(),U(),e.$digest();break;case 38:P.activeIdx=(P.activeIdx>0?P.activeIdx:P.matches.length)-1,P.$digest(),n=F.find("li")[P.activeIdx],n.parentNode.scrollTop=n.offsetTop;break;case 40:P.activeIdx=(P.activeIdx+1)%P.matches.length,P.$digest(),n=F.find("li")[P.activeIdx],n.parentNode.scrollTop=n.offsetTop}}}),t.bind("focus",function(e){_=!0,0!==te||g.$viewValue||o(function(){V(g.$viewValue,e)},0)}),t.bind("blur",function(e){$&&P.matches.length&&-1!==P.activeIdx&&!L&&(L=!0,P.$apply(function(){angular.isObject(P.debounceUpdate)&&angular.isNumber(P.debounceUpdate.blur)?c(function(){P.select(P.activeIdx,e)},P.debounceUpdate.blur):P.select(P.activeIdx,e)})),!v&&g.$error.editable&&(g.$setViewValue(),g.$setValidity("editable",!0),g.$setValidity("parse",!0),t.val("")),_=!1,L=!1}),X=function(n){t[0]!==n.target&&3!==n.which&&0!==P.matches.length&&(U(),u.$$phase||e.$digest())},s.on("click",X),e.$on("$destroy",function(){s.off("click",X),(C||S)&&Z.remove(),C&&(angular.element(l).off("resize",f),s.find("body").off("scroll",f)),F.remove(),N&&H.remove()}),Z=r(F)(P),C?s.find("body").append(Z):S?angular.element(S).eq(0).append(Z):t.after(Z),this.init=function(t,n){g=t,m=n,P.debounceUpdate=g.$options&&i(g.$options.debounce)(e),g.$parsers.unshift(function(t){return _=!0,0===te||t&&t.length>=te?b>0?(Y(),G(t)):V(t):(y(e,!1),Y(),U()),v?t:t?void g.$setValidity("editable",!1):(g.$setValidity("editable",!0),null)}),g.$formatters.push(function(t){var n,r,i={};return v||g.$setValidity("editable",!0),k?(i.$model=t,k(e,i)):(i[A.itemName]=t,n=A.viewMapper(e,i),i[A.itemName]=void 0,r=A.viewMapper(e,i),n!==r?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(e,t,n,r){r[2].init(r[0],r[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(e){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(t,n,r){t.templateUrl=r.templateUrl,t.isOpen=function(){var e=t.matches.length>0;return t.assignIsOpen({isOpen:e}),e},t.isActive=function(e){return t.active===e},t.selectActive=function(e){t.active=e},t.selectMatch=function(n,r){var i=t.debounce();angular.isNumber(i)||angular.isObject(i)?e(function(){t.select({activeIdx:n,evt:r})},angular.isNumber(i)?i:i["default"]):t.select({activeIdx:n,evt:r})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(r,i,a){var o=n(a.templateUrl)(r.$parent)||"uib/template/typeahead/typeahead-match.html";e(o).then(function(e){var n=angular.element(e.trim());i.replaceWith(n),t(n)(r)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(e){return/<.*>/g.test(e)}var a;return a=t.has("$sanitize"),function(t,o){return!a&&i(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=o?(""+t).replace(new RegExp(r(o),"gi"),"<strong>$&</strong>"):t,a||(t=e.trustAsHtml(t)),t}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n    <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n');

}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),angular.module("ui.bootstrap.ext",["ui.bootstrap"]).config(["uibDatepickerPopupConfig",function(e){e.datetimepickerPopup="dd.MM.yyyy HH:mm",e.showMeridian=!1}]).run(["$templateCache",function(e){e.put("uib/template/datetimepicker/popup.html",'<ul class="uib-datepicker-popup dropdown-menu" dropdown-nested ng-if="isOpen" style="max-height:450px;display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li style="text-align:center"><div style="display:inline-block;" uib-timepicker ng-model="date" ng-change="dateSelection(date)" readonly-input="$parent.$parent.readonlyInput" show-seconds="$parent.$parent.showSeconds" hour-step="$parent.$parent.hourStep" minute-step="$parent.$parent.minuteStep" show-meridian="$parent.$parent.showMeridian" min="$parent.$parent.min" max="$parent.$parent.max"></div></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px" class="uib-button-bar">\n		<button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]).directive("uibDatetimepickerPopup",["uibDatepickerPopupConfig",function(e){return{restrict:"A",require:"ngModel",replace:!0,template:'<input uib-datepicker-popup="{{dateFormat}}" close-on-date-selection="false" datepicker-popup-template-url="uib/template/datetimepicker/popup.html">',link:function(t,n,r){var i="yyyy-MM-dd HH:mm:ss";t.readonlyInput=r.readonlyInput,t.hourStep=r.hourStep||1,t.minuteStep=r.minuteStep||1,t.showMeridian=r.showMeridian||e.showMeridian,t.min=r.min,t.max=r.max,t.showSeconds=r.showSeconds,t.dateFormat=r.uibDatetimepickerPopup||e.datetimepickerPopup||i}}}]).service("uibDropdownService",["$document","$rootScope",function(e,t){var n,r,i=null;this.open=function(t,a){i||(e.on("click",n),a.on("keydown",r)),i&&i!==t&&(i.isOpen=!1),i=t},this.close=function(t,a){i===t&&(i=null,e.off("click",n),a.off("keydown",r))},n=function(e){var n,r;i&&(e&&"disabled"===i.getAutoClose()||e&&3===e.which||(n=i.getToggleElement(),e&&n&&n[0].contains(e.target)||(r=i.getDropdownElement(),e&&"outsideClick"===i.getAutoClose()&&r&&r[0].contains(e.target)||(i.isOpen=!1,t.$$phase||i.$apply()))))},r=function(e){27===e.which?(e.stopPropagation(),i&&i.focusToggleElement(),n()):i&&i.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&i.isOpen&&(e.preventDefault(),e.stopPropagation(),i.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,i,a,o,s,l,u,c){var d,p,f=this,h=e.$new(),g=i.appendToOpenClass,m=i.openClass,b=angular.noop,v=n.onToggle?r(n.onToggle):angular.noop,y=!1,w=null,$=!1,x=l.find("body");t.addClass("dropdown"),this.init=function(){if(n.isOpen&&(p=r(n.isOpen),b=p.assign,e.$watch(p,function(e){h.isOpen=!!e})),angular.isDefined(n.dropdownAppendTo)){var i=r(n.dropdownAppendTo)(h);i&&(w=angular.element(i))}y=angular.isDefined(n.dropdownAppendToBody),$=angular.isDefined(n.keyboardNav),y&&!w&&(w=x),w&&f.dropdownMenu&&(w.append(f.dropdownMenu),t.on("$destroy",function(){f.dropdownMenu.remove()}))},this.toggle=function(e){return h.isOpen=arguments.length?!!e:!h.isOpen,angular.isFunction(b)&&b(h,h.isOpen),h.isOpen},this.isOpen=function(){return h.isOpen},h.getToggleElement=function(){return f.toggleElement},h.getAutoClose=function(){return n.autoClose||"always"},h.getElement=function(){return t},h.isKeynavEnabled=function(){return $},h.focusDropdownEntry=function(e){var n=f.dropdownMenu?angular.element(f.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:f.selectedOption=angular.isNumber(f.selectedOption)?f.selectedOption===n.length-1?f.selectedOption:f.selectedOption+1:0;break;case 38:f.selectedOption=angular.isNumber(f.selectedOption)?0===f.selectedOption?0:f.selectedOption-1:n.length-1}n[f.selectedOption]&&n[f.selectedOption].focus()},h.getDropdownElement=function(){return f.dropdownMenu},h.focusToggleElement=function(){f.toggleElement&&f.toggleElement[0].focus()},h.$watch("isOpen",function(n,r){var i,l,p,$,x,k,C;w&&f.dropdownMenu&&(i=s.positionElements(t,f.dropdownMenu,"bottom-left",!0),l={top:i.top+"px",display:n?"block":"none"},p=f.dropdownMenu.hasClass("dropdown-menu-right"),p?(l.left="auto",l.right=window.innerWidth-(i.left+t.prop("offsetWidth"))+"px"):(l.left=i.left+"px",l.right="auto"),y||($=s.offset(w),l.top=i.top-$.top+"px",p?l.right=window.innerWidth-(i.left-$.left+t.prop("offsetWidth"))+"px":l.left=i.left-$.left+"px"),f.dropdownMenu.css(l)),x=w?w:t,k=x.hasClass(w?g:m),k===!n&&o[n?"addClass":"removeClass"](x,w?g:m).then(function(){angular.isDefined(n)&&n!==r&&v(e,{open:!!n})}),n?(f.dropdownMenuTemplateUrl&&c(f.dropdownMenuTemplateUrl).then(function(e){d=h.$new(),u(e.trim())(d,function(e){var t=e;f.dropdownMenu.replaceWith(t),f.dropdownMenu=t})}),h.focusToggleElement(),a.open(h,t)):(f.dropdownMenuTemplateUrl&&(d&&d.$destroy(),C=angular.element('<ul class="dropdown-menu"></ul>'),f.dropdownMenu.replaceWith(C),f.dropdownMenu=C),a.close(h,t),f.selectedOption=null),angular.isFunction(b)&&b(e,n)})}]);
//# sourceMappingURL=./ne-modules-all.min.js.map